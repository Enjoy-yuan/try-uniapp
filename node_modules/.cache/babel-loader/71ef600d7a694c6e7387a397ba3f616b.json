{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/supplierManagement/supplierAccess/platformNote/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/supplierManagement/supplierAccess/platformNote/index.vue","mtime":1596610933939},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from \"vuex\";\nimport * as api from \"@/api/project/srm/supplierManage/supplierAccess/platformNote\";\nimport { DICT_CODE } from '@/utils/constant';\nimport tabNote from \"./tab/tabNote\"; // 分页组件\n\nimport tabDetail from \"./tab/tabDetail\"; // 分页组件\n\nimport caiGou from '@/components/Select/xtpt/caigou'; //下拉组件\n\nimport dialogGysxz from '@/components/Dialog/dialogsGysxz'; //供应商选择\n\nimport dialogMaterielCategory from '@/components/Dialog/dialogMaterielCategory'; //物料分类选择\n\nimport dialogAdd from \"./dialog/dialogAdd\";\nimport dialogSet from \"./dialog/dialogSet\";\nexport default {\n  name: 'platformNotifiy',\n  components: {\n    caiGou: caiGou,\n    tabNote: tabNote,\n    tabDetail: tabDetail,\n    dialogGysxz: dialogGysxz,\n    dialogAdd: dialogAdd,\n    dialogSet: dialogSet,\n    dialogMaterielCategory: dialogMaterielCategory\n  },\n  data: function data() {\n    return {\n      tabName: 'tabNote',\n      listQuery: {\n        orgCode: null,\n        supplierName: null,\n        noticeNo: null,\n        state: null\n      },\n      filterConfig: [{\n        type: 'selectcaiGou',\n        label: '采购组织',\n        prop: 'orgCode',\n        width: '',\n        copmNum: 0,\n        class: 'filter-item'\n      }, {\n        type: 'commonInput',\n        label: '供应商名称',\n        prop: 'supplierName',\n        width: '',\n        class: 'filter-item ml_5'\n      }, {\n        type: 'commonInput',\n        label: '通知书号',\n        prop: 'noticeNo',\n        width: '',\n        class: 'filter-item ml_5'\n      }, {\n        type: 'dictSelect',\n        dType: 'dt_srm_p0',\n        label: '状态',\n        prop: 'state',\n        width: '',\n        optionArr: [],\n        class: 'filter-item ml_5'\n      }],\n      tabConfig: [{\n        label: '平台通知',\n        name: 'tabNote',\n        prop: 'tabNote'\n      }, {\n        label: '提案详情',\n        name: 'tabDetail',\n        prop: 'tabDetail'\n      }],\n      dialogConfig: [{\n        titleA: '入平台通知新增',\n        title: '入平台通知编辑',\n        curdialogStatus: 'add',\n        unMutiple: false\n      }, {\n        title: '供应商信息',\n        isRequired: false,\n        unMutiple: true\n      }, {\n        title: '新增物料分类信息',\n        isRequired: false,\n        unMutiple: false\n      }],\n      DICT_CODE: DICT_CODE,\n      gysType: null\n    };\n  },\n  computed: _objectSpread({}, mapState({\n    dt_srm_p0: function dt_srm_p0(state) {\n      return state.dict.dt_srm_p0;\n    },\n    //状态\n    dt_srm_pae: function dt_srm_pae(state) {\n      return state.dict.dt_srm_pae;\n    },\n    //资质类型\n    dt_srm_pao: function dt_srm_pao(state) {\n      return state.dict.dt_srm_pao;\n    },\n    //引入类型\n    dt_srm_pap: function dt_srm_pap(state) {\n      return state.dict.dt_srm_pap;\n    },\n    //问题类型\n    dt_srm_paf: function dt_srm_paf(state) {\n      return state.dict.dt_srm_paf;\n    } //审核状态\n\n  })),\n  mounted: function mounted() {\n    this.$store.dispatch(\"dict/getDicData\", [\"dt_srm_p0\", \"dt_srm_pae\", \"dt_srm_pao\", \"dt_srm_pap\", \"dt_srm_paf\"]);\n    this.getList();\n  },\n  watch: {\n    listQuery: {\n      handler: function handler(val) {\n        for (var key in val) {\n          this.$refs.refNote[0].listQuery[key] = val[key];\n          this.$refs.refDetail[0].listQuery[key] = val[key];\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    handleQuery: function handleQuery() {\n      this.listQuery.currentPage = 1;\n      this.getList();\n    },\n    getList: function getList() {\n      this.$refs.refNote[0].getList();\n      this.$refs.refDetail[0].getList();\n    },\n    //供应商确认\n    handleGysClick: function handleGysClick(gysRows) {\n      if (this.gysType === 'mc') {\n        this.$refs.refMC.setGys(gysRows);\n      } else {\n        this.$refs.refadd.setGys(gysRows);\n      }\n    },\n    showGys: function showGys(type) {\n      this.gysType = type;\n      this.$refs.refGys.getList();\n      this.$refs.refGys.dialogVisible = true;\n    },\n    //确认添加/编辑\n    confirmAddEdit: function confirmAddEdit(cdata) {\n      var _this = this;\n\n      if (this.dialogConfig[0].curdialogStatus === 'add') {\n        api.createRecords(cdata).then(function () {\n          _this.$message({\n            type: 'success',\n            message: '新增成功'\n          });\n\n          _this.getList();\n        });\n      } else if (this.dialogConfig[0].curdialogStatus === 'edit') {\n        //编辑api patch\n        api.updateRecords(cdata.noticeDTO.noticeNo, cdata).then(function () {\n          _this.$message({\n            type: 'success',\n            message: '编辑成功'\n          });\n\n          _this.getList();\n        });\n      }\n    },\n    handleAdd: function handleAdd(type, adata) {\n      if (type === 'add') {\n        this.dialogConfig[0].curdialogStatus = 'add';\n      } else if (type === 'edit') {\n        this.dialogConfig[0].curdialogStatus = 'edit';\n      }\n\n      this.$refs.refadd.initForm(type, adata);\n      this.$refs.refadd.dialogVisible = true;\n    },\n    handleSet: function handleSet() {\n      // this.$refs.refSet.initForm()\n      this.$refs.refSet.dialogVisible = true;\n    },\n    //批量设置确认\n    confirmSet: function confirmSet(sdata) {\n      this.$refs.tabDetail.setData(sdata);\n    },\n    showMC: function showMC(orgCode, mtableData) {\n      this.$refs.refMC.listQuery.orgCode = orgCode;\n      this.$refs.refMC.selectedRows = mtableData;\n      this.$refs.refMC.handleQuery();\n      this.$refs.refMC.dialogVisible = true;\n    },\n    //materialcategory confirm\n    handleConfirmMC: function handleConfirmMC(mdata) {\n      var _this2 = this;\n\n      mdata.map(function (item) {\n        item.materielClass = item.classCode;\n        item.materielClassName = item.className;\n      });\n      var data = [];\n      mdata.forEach(function (item) {\n        var isD = true;\n\n        if (_this2.$refs.refadd.tableData) {\n          //save edited before\n          _this2.$refs.refadd.tableData.forEach(function (itemt) {\n            if (itemt.materielClass === item.classCode) {\n              data.push(itemt);\n              isD = false;\n            }\n          });\n        }\n\n        if (isD) {\n          data.push(item);\n        }\n      });\n      this.$refs.refadd.tableData = JSON.parse(JSON.stringify(data));\n    },\n    setData: function setData(sdata) {\n      this.$refs.refDetail[0].handleSetData(sdata);\n    }\n  }\n};",null]}