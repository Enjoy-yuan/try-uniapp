{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/priceManage/supplierQuote/detailQuoteNote/Dialog/dialogCompare.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/priceManage/supplierQuote/detailQuoteNote/Dialog/dialogCompare.vue","mtime":1596610933727},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as api from \"@/api/project/srm/supplierSelect/priceReview\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: 'dialogCompare',\n  props: ['unMutiple', 'title', 'curdialogStatus'],\n  data: function data() {\n    return {\n      formData: {},\n      listSelected: [],\n      //已选项\n      dialogVisible: false,\n      list: [],\n      listSub: []\n    };\n  },\n  computed: _objectSpread({}, mapState({\n    dt_srm_pdj: function dt_srm_pdj(state) {\n      return state.dict.dt_srm_pdj;\n    },\n    dt_srm_pdf: function dt_srm_pdf(state) {\n      return state.dict.dt_srm_pdf;\n    }\n  })),\n  filters: {\n    stateFilter: function stateFilter(a) {\n      if (a === \"0\") {\n        return \"否\";\n      } else {\n        return \"是\";\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.$store.dispatch(\"dict/getDicData\", [\"dt_srm_pdj\", 'dt_srm_pdf']);\n  },\n  methods: {\n    getList: function getList(val) {\n      var _this = this;\n\n      this.formData = val;\n      var dto = {\n        materielCode: val.materielCode,\n        rfqNo: val.noticeNo,\n        supplierCode: val.supplierCode,\n        quotationSource: 'notice'\n      };\n      api.priceCompare(dto).then(function (res) {\n        _this.list = res.data;\n      });\n    },\n    selectChange: function selectChange(val) {\n      this.listSelected = val;\n    },\n    //对比按钮单击事件\n    handleCompare: function handleCompare() {\n      if (this.listSelected.length === 2) {\n        if (this.formData.quotationMethod == \"PDI0\") {\n          this.listSub = this.listSelected.map(function (v) {\n            v.rawMaterialCost = 0;\n            v.subtotalCosts = 0;\n            v.recoveryValue = 0;\n            v.outsourcingCost = 0;\n            v.toolingCost = 0;\n            v.processingCost = 0;\n            v.wasteLoss = 0;\n            v.designCost = 0;\n            v.managementRate = 0;\n            v.managementCost = 0;\n            v.financialRate = 0;\n            v.packingCost = 0;\n            v.logisticsCost = 0;\n            v.otherCost = 0;\n            v.profitRate = 0;\n            v.profit = 0;\n            v.financialCost = 0;\n            v.realPrice = v.taxFreePrice;\n            return v;\n          });\n        } else {\n          this.listSub = this.listSelected.map(function (v) {\n            v.totalQuotation.quoteRounds = v.quoteRounds;\n            v.totalQuotation.rowId = v.rowId;\n            return v.totalQuotation;\n          });\n        }\n\n        var rawMaterialCost = parseFloat(this.listSub[0].rawMaterialCost) - parseFloat(this.listSub[1].rawMaterialCost);\n        var subtotalCosts = parseFloat(this.listSub[0].subtotalCosts) - parseFloat(this.listSub[1].subtotalCosts);\n        var recoveryValue = parseFloat(this.listSub[0].recoveryValue) - parseFloat(this.listSub[1].recoveryValue);\n        var outsourcingCost = parseFloat(this.listSub[0].outsourcingCost) - parseFloat(this.listSub[1].outsourcingCost);\n        var toolingCost = parseFloat(this.listSub[0].toolingCost) - parseFloat(this.listSub[1].toolingCost);\n        var processingCost = parseFloat(this.listSub[0].processingCost) - parseFloat(this.listSub[1].processingCost);\n        var wasteLoss = parseFloat(this.listSub[0].wasteLoss) - parseFloat(this.listSub[1].wasteLoss);\n        var designCost = parseFloat(this.listSub[0].designCost) - parseFloat(this.listSub[1].designCost);\n        var managementRate = parseFloat(this.listSub[0].managementRate) - parseFloat(this.listSub[1].managementRate);\n        var managementCost = parseFloat(this.listSub[0].managementCost) - parseFloat(this.listSub[1].managementCost);\n        var financialRate = parseFloat(this.listSub[0].financialRate) - parseFloat(this.listSub[1].financialRate);\n        var financialCost = parseFloat(this.listSub[0].financialCost) - parseFloat(this.listSub[1].financialCost);\n        var packingCost = parseFloat(this.listSub[0].packingCost) - parseFloat(this.listSub[1].packingCost);\n        var logisticsCost = parseFloat(this.listSub[0].logisticsCost) - parseFloat(this.listSub[1].logisticsCost);\n        var otherCost = parseFloat(this.listSub[0].otherCost) - parseFloat(this.listSub[1].otherCost);\n        var profitRate = parseFloat(this.listSub[0].profitRate) - parseFloat(this.listSub[1].profitRate);\n        var profit = parseFloat(this.listSub[0].profit) - parseFloat(this.listSub[1].profit);\n        var realPrice = parseFloat(this.listSub[0].realPrice) - parseFloat(this.listSub[1].realPrice);\n        var dataSum = {\n          key: 'sum',\n          quoteRounds: '差异',\n          rawMaterialCost: rawMaterialCost,\n          subtotalCost: subtotalCosts,\n          recoveryValue: recoveryValue,\n          outsourcingCost: outsourcingCost,\n          toolingCost: toolingCost,\n          processingCost: processingCost,\n          wasteLoss: wasteLoss,\n          designCost: designCost,\n          managementRate: managementRate,\n          managementCost: managementCost,\n          financialRate: financialRate,\n          financialCost: financialCost,\n          packingCost: packingCost,\n          logisticsCost: logisticsCost,\n          otherCost: otherCost,\n          profitRate: profitRate,\n          profit: profit,\n          realPrice: realPrice\n        };\n        this.listSub.push(dataSum);\n      } else {\n        this.$message({\n          type: 'warning',\n          message: '请选择两条报价信息对比'\n        });\n      }\n    }\n  }\n};",null]}