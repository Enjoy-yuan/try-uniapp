{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/components/Select/employeesSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/components/Select/employeesSelect.vue","mtime":1596610933167},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Pagination from '@/components/Pagination'; // Secondary package based on el-pagination\n\nimport { selectlists } from '@/api/system/employees';\nimport { selecttree } from '@/api/system/organization';\nexport default {\n  name: 'employeesManagement',\n  components: {\n    Pagination: Pagination\n  },\n  props: {\n    isTick: {\n      type: Boolean,\n      default: true //true 为多选\n\n    },\n    // 父组件中已选记录集合\n    listSelected: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      theight: 0,\n      //表格高度\n      selectedRows: null,\n      //多选时选中的所有行\n      selectlistRow: undefined,\n      //当前选择的\n      tableKey: 0,\n      //表格索引，虚拟dom渲染表格时使用\n      list: [],\n      total: 0,\n      orgName: [],\n      listLoading: true,\n      listQuery: {\n        currentPage: 1,\n        pageSize: 15,\n        page: 1,\n        scope: false\n      },\n      readonly: false\n    };\n  },\n  computed: {\n    organizationId: {\n      get: function get() {\n        return this.organizationId; //获取的时候直接获取值\n      },\n      set: function set(listQuery) {\n        this.organizationId = listQuery.organizationName; //设置的时候变为大写\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$store.dispatch('dict/getDicData', ['dt_org_type', 'dt_org_function']);\n    this.setTableHeight(); //表格高度自适应\n\n    window.onresize = function () {\n      _this.setTableHeight();\n    };\n\n    this.getList();\n  },\n  methods: {\n    //表格高度计算\n    setTableHeight: function setTableHeight() {\n      this.theight = this.$myFun.getSingleTbHeight();\n    },\n    getList: function getList() {\n      var _this2 = this;\n\n      //查询\n      this.listLoading = true;\n      this.listQuery.filterEmployeeCodes = this.listSelected.map(function (item) {\n        return item.maintainerCode;\n      }).join(',');\n      selectlists(this.listQuery).then(function (response) {\n        _this2.list = response.data.list;\n        _this2.total = response.data.pages.count;\n        setTimeout(function () {\n          _this2.listLoading = false;\n        }, 1.5 * 100);\n      }), selecttree().then(function (response) {\n        //获取树数据\n        _this2.treeData = _this2.$myFun.addTreeRoot(response.data);\n        _this2.orgName = response.data.map(function (itmes) {\n          return [itmes.rowId, itmes.organizationName];\n        });\n        setTimeout(function () {\n          _this2.listLoading = false;\n        }, 1.5 * 100);\n      });\n    },\n    filertOrgName: function filertOrgName(val) {\n      for (var i = 0; i < this.orgName.length; i++) {\n        if (this.orgName[i][0] == val) {\n          return this.orgName[i][1];\n        }\n\n        if (val == 0) {\n          return '根目录';\n        }\n      }\n    },\n    handleFilter: function handleFilter() {\n      var _this3 = this;\n\n      //查询组织列表\n      this.listQuery.page = 1;\n      this.listLoading = true;\n      selectlists(this.listQuery).then(function (response) {\n        _this3.list = response.data.list;\n        _this3.total = response.data.pages.count;\n        setTimeout(function () {\n          _this3.listLoading = false;\n        }, 1.5 * 100);\n      });\n    },\n    // 表格选择框选中 注:参数为选中的所有行的数组\n    selectChange: function selectChange(val) {\n      if (this.isTick) {\n        this.selectedRows = val;\n        this.$emit('change', this.selectedRows);\n        this.$emit('input', this.selectedRows.length ? this.selectedRows[0].employeeCode : undefined);\n      } else {\n        this.selectlistRow = val[val.length - 1];\n\n        if (val.length > 1) {\n          this.$refs.tb.clearSelection();\n          this.$refs.tb.toggleRowSelection(val[val.length - 1]);\n        }\n\n        this.$refs.tb.setCurrentRow(this.selectlistRow);\n        this.$emit('change', this.selectlistRow);\n        this.$emit('input', this.selectlistRow ? this.selectlistRow.employeeCode : undefined);\n      }\n    }\n  }\n};",null]}