{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/data-base/materielTransferType/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/data-base/materielTransferType/index.vue","mtime":1596610933335},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as api from \"@/api/data-base/material_transfer_type\";\nimport { DICT_CODE } from '@/utils/constant';\nimport Pagination from \"@/components/Pagination\";\nimport dialogAddMain from \"./dialog/dialogAddMain\";\nimport dialogAddSub1 from \"./dialog/dialogAddSub1\";\nimport dialogAddSub2 from \"./dialog/dialogAddSub2\";\nimport dialogAddSub3 from \"./dialog/dialogAddSub3\";\nimport { mapState } from 'vuex';\nexport default {\n  name: \"materiel_transfer_type\",\n  components: {\n    Pagination: Pagination,\n    dialogAddMain: dialogAddMain,\n    dialogAddSub1: dialogAddSub1,\n    dialogAddSub2: dialogAddSub2,\n    dialogAddSub3: dialogAddSub3\n  },\n  data: function data() {\n    return {\n      total: 0,\n      DICT_CODE: DICT_CODE,\n      listMain: [],\n      copyDialogFormVisible: false,\n      //复制弹框\n      listMainQuery: {\n        wareRuleCode: '',\n        wareRuleName: '',\n        statsClassify: '',\n        currentPage: 0,\n        pageSize: 15\n      },\n      zdywlxList: [],\n      copyList: {\n        wareRuleCode: '',\n        wareRuleName: '',\n        oldWareRuleCode: '',\n        oldWareRuleName: ''\n      },\n      selectMainRow: [],\n      selectTabRow1: null,\n      selectTabRow2: null,\n      selectTabRow3: null,\n      tabIndex: 1,\n      //从表索引\n      tabList1: [],\n      tabList2: [],\n      tabList3: [],\n      tabDetail1: [],\n      tabDetail2: [],\n      tabDetail3: [],\n      isMainClear: false,\n      //主表是否清空选择\n      copyrules: {\n        wareRuleCode: [{\n          required: true,\n          message: this.$t('validate.required'),\n          trigger: 'blur'\n        }],\n        wareRuleName: [{\n          required: true,\n          message: this.$t('validate.required'),\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  computed: _objectSpread({}, mapState({\n    dt_statistic_type: function dt_statistic_type(state) {\n      return state.dict.dt_statistic_type;\n    },\n    dt_stock_type: function dt_stock_type(state) {\n      return state.dict.dt_stock_type;\n    },\n    dt_stock_status: function dt_stock_status(state) {\n      return state.dict.dt_stock_status;\n    }\n  })),\n  mounted: function mounted() {\n    this.$store.dispatch('dict/getDicData', ['dt_statistic_type', 'dt_stock_type', 'dt_stock_status']);\n    this.getMainList();\n    this.getProofList();\n  },\n  methods: {\n    //查询\n    handleQuery: function handleQuery() {\n      this.getMainList();\n    },\n    //获取凭证id和类型\n    getProofList: function getProofList() {\n      var _this = this;\n\n      api.getRowId().then(function (res) {\n        for (var i = 0; i < res.data.list.length; i++) {\n          if (res.data.list[i].referentType === 'LC06') {\n            var rowProodId = res.data.list[i].rowId;\n\n            _this.setProofList(rowProodId, res.data.list[i].objectType);\n          }\n        }\n      });\n    },\n    //处理凭证数据\n    setProofList: function setProofList(rowProodId, objectType) {\n      var _this2 = this;\n\n      api.getPIList(rowProodId).then(function (resp) {\n        // for(let j=0;j<resp.length;j++){\n        //     this.$refs.addSub3.AddSublist.wareRuleHandleDetails.push(\n        //         {\n        //             targetRefRowId:rowProodId,\n        //             targetRefItemRowId:resp[j].rowId,\n        //             objectType:objectType,\n        //             targetConfigCode:resp[j].attributeCode,\n        //             targetConfigName:resp[j].attributeName\n        //         }\n        //     );\n        // }\n        resp.data.forEach(function (item) {\n          item.objectType = objectType;\n\n          _this2.$refs.addSub2.proofList.push(item);\n\n          _this2.$refs.addSub3.proofList.push(item);\n        });\n      });\n    },\n    //获取主表数据\n    getMainList: function getMainList() {\n      var _this3 = this;\n\n      api.queryRecords(this.listMainQuery).then(function (res) {\n        res.data.list.forEach(function (item, index) {\n          res.data.list[index].fetchStockStatArr = res.data.list[index].fetchStockStat.split(',');\n          res.data.list[index].fetchStockTypeArr = res.data.list[index].fetchStockType.split(',');\n          res.data.list[index].fetchStockStatName = [];\n          res.data.list[index].fetchStockTypeName = [];\n          res.data.list[index].fetchStockStatArr.forEach(function (val) {\n            _this3.dt_stock_status.forEach(function (st) {\n              if (st.dictItemKey === val) {\n                res.data.list[index].fetchStockStatName.push(st.dictItemValue);\n              }\n            });\n          });\n          res.data.list[index].fetchStockTypeArr.forEach(function (val) {\n            _this3.dt_stock_type.forEach(function (st) {\n              if (st.dictItemKey === val) {\n                res.data.list[index].fetchStockTypeName.push(st.dictItemValue);\n              }\n            });\n          });\n          res.data.list[index].fetchStockTypeName = res.data.list[index].fetchStockTypeName.join(',');\n          res.data.list[index].fetchStockStatName = res.data.list[index].fetchStockStatName.join(',');\n        });\n        _this3.listMain = res.data.list;\n        _this3.total = res.data.pages.count;\n        _this3.listMainQuery.pageSize = 10000;\n        api.queryRecords(_this3.listMainQuery).then(function (res) {\n          _this3.zdywlxList = res.data.list;\n          _this3.listMainQuery.pageSize = 15;\n        }); // this.showTab();\n      });\n    },\n    //主表行选择变化，显示从表\n    mainSelectChange: function mainSelectChange(val) {\n      if (val.length > 1) {\n        this.selectMainRow = val[val.length - 1];\n        this.$refs.tbmain.clearSelection();\n        this.isMainClear = true;\n        this.$refs.tbmain.toggleRowSelection(val[val.length - 1], 'selected');\n        this.showTab();\n      } else if (val.length !== 0 && this.isMainClear) {\n        this.isMainClear = false;\n        this.selectMainRow = val;\n        this.showTab();\n      } else if (!this.isMainClear && val.length !== 0) {\n        this.selectMainRow = val;\n        this.showTab();\n      } else if (!this.isMainClear && val.length === 0) {\n        this.selectMainRow = val;\n        this.tabList1 = [];\n        this.tabDetail1 = [];\n      }\n    },\n    //点击行显示从(tab)表\n    showTabTable: function showTabTable(val) {\n      this.selectMainRow = val;\n      this.$refs.tbmain.clearSelection();\n      this.$refs.tbmain.toggleRowSelection(val, 'selected');\n      this.showTab();\n    },\n    showTab: function showTab(i) {\n      var _this4 = this;\n\n      var wareRuleCode = '';\n\n      if (this.selectMainRow) {\n        if (this.selectMainRow.length) {\n          wareRuleCode = this.selectMainRow[0].wareRuleCode;\n        }\n      } else {\n        if (this.listMain[0].wareRuleCode) wareRuleCode = this.listMain[0].wareRuleCode;\n      }\n\n      if (wareRuleCode) switch (i) {\n        case 1:\n          {\n            api.querySub1(wareRuleCode).then(function (res) {\n              _this4.tabList1 = res.data;\n              _this4.tabDetail1 = [];\n            });\n            break;\n          }\n\n        case 2:\n          {\n            api.querySubLeft(wareRuleCode, 'i').then(function (res) {\n              _this4.tabList2 = res.data;\n              _this4.tabDetail2 = [];\n            });\n            break;\n          }\n\n        case 3:\n          {\n            api.querySubLeft(wareRuleCode, 'p').then(function (res) {\n              _this4.tabList3 = res.data;\n              _this4.tabDetail3 = [];\n            });\n            break;\n          }\n\n        default:\n          {\n            api.querySub1(wareRuleCode).then(function (res) {\n              _this4.tabList1 = res.data;\n            });\n            api.querySubLeft(wareRuleCode, 'i').then(function (res) {\n              _this4.tabList2 = res.data;\n            });\n            api.querySubLeft(wareRuleCode, 'p').then(function (res) {\n              _this4.tabList3 = res.data;\n            });\n          }\n      }\n    },\n    //tab表行选择变化\n    subSelectChange1: function subSelectChange1(val) {\n      this.tabIndex = 1;\n\n      if (val.length > 1) {\n        this.selectTabRow1 = val[val.length - 1];\n        this.$refs.tabsub1.clearSelection();\n        this.$refs.tabsub1.toggleRowSelection(val[val.length - 1], 'selected');\n        this.showSub(this.tabIndex);\n      } else if (val.length !== 0) {\n        this.selectTabRow1 = val;\n        this.showSub(this.tabIndex);\n      }\n    },\n    subSelectChange2: function subSelectChange2(val) {\n      this.tabIndex = 2;\n\n      if (val.length > 1) {\n        this.selectTabRow2 = val[val.length - 1];\n        this.$refs.tabsub2.clearSelection();\n        this.$refs.tabsub2.toggleRowSelection(val[val.length - 1], 'selected');\n        this.showSub(this.tabIndex);\n      } else if (val.length !== 0) {\n        this.selectTabRow2 = val;\n        this.showSub(this.tabIndex);\n      }\n    },\n    subSelectChange3: function subSelectChange3(val) {\n      this.tabIndex = 3;\n\n      if (val.length > 1) {\n        this.selectTabRow3 = val[val.length - 1];\n        this.$refs.tabsub3.clearSelection();\n        this.$refs.tabsub3.toggleRowSelection(val[val.length - 1], 'selected');\n        this.showSub(this.tabIndex);\n      } else if (val.length !== 0) {\n        this.selectTabRow3 = val;\n        this.showSub(this.tabIndex);\n      }\n    },\n    //tab从表选择详情\n    showSubDetail1: function showSubDetail1(val) {\n      this.tabIndex = 1;\n      this.selectTabRow1 = val;\n      this.$refs.tabsub1.clearSelection();\n      this.$refs.tabsub1.toggleRowSelection(val, 'selected');\n      this.showSub(this.tabIndex);\n    },\n    showSubDetail2: function showSubDetail2(val) {\n      this.tabIndex = 2;\n      this.selectTabRow2 = val;\n      this.$refs.tabsub2.clearSelection();\n      this.$refs.tabsub2.toggleRowSelection(val, 'selected');\n      this.showSub(this.tabIndex);\n    },\n    showSubDetail3: function showSubDetail3(val) {\n      this.tabIndex = 3;\n      this.selectTabRow3 = val;\n      this.$refs.tabsub3.clearSelection();\n      this.$refs.tabsub3.toggleRowSelection(val, 'selected');\n      this.showSub(this.tabIndex);\n    },\n    showSub: function showSub(i) {\n      var _this5 = this;\n\n      switch (i) {\n        case 1:\n          {\n            var wareRuleCode = '';\n            var updateObject = '';\n\n            if (this.selectTabRow1) {\n              wareRuleCode = this.selectTabRow1[0].wareRuleCode;\n              updateObject = this.selectTabRow1[0].updateObject;\n            } else {\n              wareRuleCode = this.tabList1[0].wareRuleCode;\n              updateObject = this.tabList1[0].updateObject;\n            }\n\n            if (wareRuleCode && updateObject) {\n              api.querySub1Row(wareRuleCode, updateObject).then(function (res) {\n                _this5.tabDetail1 = res.data.wareRuleTriggerDetails;\n              });\n            }\n\n            break;\n          }\n\n        case 2:\n          {\n            var _wareRuleCode = this.selectTabRow2[0].wareRuleCode;\n            var rowId = this.selectTabRow2[0].rowId;\n\n            if (_wareRuleCode && rowId) {\n              api.querySubLeftRow(_wareRuleCode, rowId).then(function (res) {\n                _this5.tabDetail2 = res.data.wareRuleHandleDetails;\n              });\n            }\n\n            break;\n          }\n\n        case 3:\n          {\n            var _wareRuleCode2 = this.selectTabRow3[0].wareRuleCode;\n            var _rowId = this.selectTabRow3[0].rowId;\n\n            if (_wareRuleCode2 && _rowId) {\n              api.querySubLeftRow(_wareRuleCode2, _rowId).then(function (res) {\n                _this5.tabDetail3 = res.data.wareRuleHandleDetails;\n              });\n            }\n\n            break;\n          }\n      }\n    },\n    //主表新增（移动类型）\n    addMain: function addMain() {\n      this.$refs.addMain.AddMainlist = {\n        wareRuleCode: '',\n        wareRuleName: '',\n        statsClassify: '',\n        screenGroupNum: '',\n        isProdBatch: '',\n        isQcNotice: '',\n        refSources: '',\n        isSuperIndicaChk: '',\n        refUpdate: '',\n        isNegativeStockChk: '',\n        fetchStockStatArr: [],\n        fetchStockStat: '',\n        fetchStockTypeArr: [],\n        fetchStockType: '',\n        storeStockStat: '',\n        storeStockType: '',\n        isAccount: '',\n        accountField: '',\n        accountDirection: '',\n        bizTypeFlag: '',\n        isTrigProdInd: '',\n        isTrigAutoProof: '',\n        reversalBizType: ''\n      };\n      this.$refs.addMain.resetForm();\n      this.$refs.addMain.getAttrRule();\n      this.$refs.addMain.dialogFormVisible = true;\n      this.$refs.addMain.dialogStatus = 0;\n    },\n    //主表修改（移动类型）\n    updateMain: function updateMain() {\n      if (this.selectMainRow && this.selectMainRow.length == 1) {\n        this.$refs.addMain.dialogStatus = 1;\n        this.$refs.addMain.AddMainlist = this.selectMainRow[0];\n        this.$refs.addMain.getAttrRule();\n        this.$refs.addMain.dialogFormVisible = true;\n        this.getMainList();\n      } else {\n        this.$message({\n          title: \"警告\",\n          message: \"请选择一条信息\",\n          type: \"warning\"\n        });\n      }\n    },\n    //主表删除（移动类型）\n    deleteMain: function deleteMain() {\n      var _this6 = this;\n\n      if (this.selectMainRow.length === 1) {\n        this.$confirm('确认要删除该条记录吗?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(function () {\n          api.deleteRules(_this6.selectMainRow[0].wareRuleCode).then(function () {\n            _this6.getMainList();\n\n            _this6.$message({\n              type: 'success',\n              message: '删除成功'\n            });\n          });\n        }).catch(function () {\n          _this6.$message({\n            type: 'info',\n            message: '已取消'\n          });\n        });\n      } else {\n        this.$message.warning(\"请勾选一条记录！\");\n        return;\n      }\n    },\n    //添加从表\n    addSub: function addSub(i) {\n      switch (i) {\n        case 1:\n          {\n            if (this.selectMainRow && this.selectMainRow.length == 1) {\n              this.$refs.addSub1.AddSublist.wareRuleCode = this.selectMainRow[0].wareRuleCode;\n              this.$refs.addSub1.AddSublist.wareRuleName = this.selectMainRow[0].wareRuleName;\n              this.$refs.addSub1.AddSublist.wareRuleTriggerDetails = [];\n              this.$refs.addSub1.AddSublist.description = '';\n              this.$refs.addSub1.AddSublist.status = '';\n              this.$refs.addSub1.AddSublist.updateObject = '';\n              this.$refs.addSub1.getAttrRule(this.selectMainRow[0].refSources);\n              this.$refs.addSub1.dialogStatus = 0;\n              this.$refs.addSub1.dialogFormVisible = true;\n            } else {\n              this.$message({\n                title: this.$t('message.warning'),\n                message: this.$t('message.checkedoneplease'),\n                type: \"warning\"\n              });\n            }\n\n            break;\n          }\n\n        case 2:\n          {\n            if (this.selectMainRow && this.selectMainRow.length == 1) {\n              this.$refs.addSub2.AddSublist = {\n                wareRuleCode: '',\n                wareRuleName: '',\n                targetWareRuleCode: '',\n                status: '',\n                description: '',\n                wareRuleHandleDetails: []\n              };\n              this.$refs.addSub2.AddSublist.wareRuleCode = this.selectMainRow[0].wareRuleCode;\n              this.$refs.addSub2.AddSublist.wareRuleName = this.selectMainRow[0].wareRuleName;\n              this.$refs.addSub2.indicateBizTypeList = this.zdywlxList;\n              this.$refs.addSub2.dialogFormVisible = true;\n              this.$refs.addSub2.dialogStatus = 0;\n            } else {\n              this.$message({\n                title: this.$t('message.warning'),\n                message: this.$t('message.checkedoneplease'),\n                type: \"warning\"\n              });\n            }\n\n            break;\n          }\n\n        case 3:\n          {\n            if (this.selectMainRow && this.selectMainRow.length == 1) {\n              this.$refs.addSub3.AddSublist.wareRuleCode = this.selectMainRow[0].wareRuleCode;\n              this.$refs.addSub3.AddSublist.wareRuleName = this.selectMainRow[0].wareRuleName;\n              this.$refs.addSub3.AddSublist.wareRuleHandleDetails = [];\n              this.$refs.addSub3.AddSublist.status = '';\n              this.$refs.addSub3.AddSublist.description = '';\n              this.$refs.addSub3.AddSublist.targetWareRuleCode = '';\n              this.$refs.addSub3.AddSublist.mainUpdateObject = '';\n              this.$refs.addSub3.AddSublist.detailUpdateObject = '';\n              this.$refs.addSub3.AddSublist.serviceName = '';\n              this.$refs.addSub3.indicateBizTypeList = this.zdywlxList;\n              this.$refs.addSub3.dialogFormVisible = true;\n              this.$refs.addSub3.dialogStatus = 0;\n            } else {\n              this.$message({\n                title: this.$t('message.warning'),\n                message: this.$t('message.checkedoneplease'),\n                type: \"warning\"\n              });\n            }\n\n            break;\n          }\n      }\n    },\n    //更新从表\n    updateSub: function updateSub(i) {\n      var _this7 = this;\n\n      switch (i) {\n        case 1:\n          {\n            if (this.selectTabRow1 && this.selectTabRow1.length == 1) {\n              var wareRuleCode = this.selectTabRow1[0].wareRuleCode;\n              var updateObject = this.selectTabRow1[0].updateObject;\n\n              if (wareRuleCode && updateObject) {\n                api.querySub1Row(wareRuleCode, updateObject).then(function (res) {\n                  _this7.$refs.addSub1.AddSublist = res.data;\n\n                  _this7.$refs.addSub1.setTableRow(res.data.refRowId);\n\n                  _this7.$refs.addSub1.AddSublist.wareRuleName = _this7.selectMainRow[0].wareRuleName;\n                  _this7.$refs.addSub1.dialogStatus = 1;\n                  _this7.$refs.addSub1.dialogFormVisible = true;\n\n                  _this7.$refs.addSub1.getAttrRule(_this7.selectMainRow[0].refSources);\n                });\n              }\n            } else {\n              this.$message({\n                title: this.$t('message.warning'),\n                message: this.$t('message.checkedoneplease'),\n                type: \"warning\"\n              });\n            }\n\n            break;\n          }\n\n        case 2:\n          {\n            if (this.selectTabRow2 && this.selectTabRow2.length == 1) {\n              var _wareRuleCode3 = this.selectTabRow2[0].wareRuleCode;\n              var rowId = this.selectTabRow2[0].rowId;\n\n              if (_wareRuleCode3 && rowId) {\n                api.querySubLeftRow(_wareRuleCode3, rowId).then(function (res) {\n                  _this7.$refs.addSub2.AddSublist = res.data;\n                  _this7.$refs.addSub2.indicateBizTypeList = _this7.zdywlxList;\n                  _this7.$refs.addSub2.dialogStatus = 1;\n                  _this7.$refs.addSub2.dialogFormVisible = true;\n                });\n              }\n            } else {\n              this.$message({\n                title: this.$t('message.warning'),\n                message: this.$t('message.checkedoneplease'),\n                type: \"warning\"\n              });\n            }\n\n            break;\n          }\n\n        case 3:\n          {\n            if (this.selectTabRow3 && this.selectTabRow3.length == 1) {\n              var _wareRuleCode4 = this.selectTabRow3[0].wareRuleCode;\n              var _rowId2 = this.selectTabRow3[0].rowId;\n\n              if (_wareRuleCode4 && _rowId2) {\n                api.querySubLeftRow(_wareRuleCode4, _rowId2).then(function (res) {\n                  _this7.$refs.addSub3.AddSublist = res.data;\n                  _this7.$refs.addSub3.indicateBizTypeList = _this7.zdywlxList;\n                  _this7.$refs.addSub3.dialogStatus = 1;\n                  _this7.$refs.addSub3.dialogFormVisible = true;\n                });\n              }\n            } else {\n              this.$message({\n                title: this.$t('message.warning'),\n                message: this.$t('message.checkedoneplease'),\n                type: \"warning\"\n              });\n            }\n\n            break;\n          }\n      }\n    },\n    //删除从表\n    deleteSub: function deleteSub(i) {\n      var _this8 = this;\n\n      switch (i) {\n        case 1:\n          {\n            if (this.selectTabRow1 && this.selectTabRow1.length == 1) {\n              this.$confirm(this.$t('message.isDeleteContinue'), this.$t('message.prompt'), {\n                confirmButtonText: this.$t('message.confirm'),\n                cancelButtonText: this.$t('message.cancel'),\n                type: 'warning'\n              }).then(function () {\n                var wareRuleCode = _this8.selectTabRow1[0].wareRuleCode;\n                var updateObject = _this8.selectTabRow1[0].updateObject;\n\n                if (wareRuleCode && updateObject) {\n                  api.deleteSub1(wareRuleCode, updateObject).then(function () {\n                    _this8.showTab(1);\n                  });\n                }\n              }).catch(function () {\n                _this8.$message({\n                  type: 'info',\n                  message: _this8.$t('message.deleteCanceled')\n                });\n              });\n            } else {\n              this.$message({\n                title: this.$t('message.warning'),\n                message: this.$t('message.checkedoneplease'),\n                type: \"warning\"\n              });\n            }\n\n            break;\n          }\n\n        case 2:\n          {\n            if (this.selectTabRow2 && this.selectTabRow2.length == 1) {\n              this.$confirm(this.$t('message.isDeleteContinue'), this.$t('message.prompt'), {\n                confirmButtonText: this.$t('message.confirm'),\n                cancelButtonText: this.$t('message.cancel'),\n                type: 'warning'\n              }).then(function () {\n                var wareRuleCode = _this8.selectTabRow2[0].wareRuleCode;\n                var rowId = _this8.selectTabRow2[0].rowId;\n\n                if (wareRuleCode && rowId) {\n                  api.deleteSubLeft(wareRuleCode, rowId).then(function () {\n                    _this8.$message({\n                      type: 'success',\n                      message: '删除成功'\n                    });\n\n                    _this8.showTab(2);\n                  });\n                }\n              }).catch(function () {\n                _this8.$message({\n                  type: 'info',\n                  message: _this8.$t('message.deleteCanceled')\n                });\n              });\n            } else {\n              this.$message({\n                title: this.$t('message.warning'),\n                message: this.$t('message.checkedoneplease'),\n                type: \"warning\"\n              });\n            }\n\n            break;\n          }\n\n        case 3:\n          {\n            if (this.selectTabRow3 && this.selectTabRow3.length == 1) {\n              this.$confirm(this.$t('message.isDeleteContinue'), this.$t('message.prompt'), {\n                confirmButtonText: this.$t('message.confirm'),\n                cancelButtonText: this.$t('message.cancel'),\n                type: 'warning'\n              }).then(function () {\n                var wareRuleCode = _this8.selectTabRow3[0].wareRuleCode;\n                var rowId = _this8.selectTabRow3[0].rowId;\n\n                if (wareRuleCode && rowId) {\n                  api.deleteSubLeft(wareRuleCode, rowId).then(function () {\n                    _this8.$message({\n                      type: 'success',\n                      message: '删除成功'\n                    });\n\n                    _this8.showTab(3);\n                  });\n                }\n              }).catch(function () {\n                _this8.$message({\n                  type: 'info',\n                  message: _this8.$t('message.deleteCanceled')\n                });\n              });\n            } else {\n              this.$message({\n                title: this.$t('message.warning'),\n                message: this.$t('message.checkedoneplease'),\n                type: \"warning\"\n              });\n            }\n\n            break;\n          }\n      }\n    },\n    //拷贝\n    handleCopy: function handleCopy() {\n      if (this.selectMainRow && this.selectMainRow.length == 1) {\n        this.copyDialogFormVisible = true;\n        this.copyList.oldWareRuleCode = this.selectMainRow[0].wareRuleCode;\n        this.copyList.oldWareRuleName = this.selectMainRow[0].wareRuleName;\n      } else {\n        this.$message({\n          title: this.$t('message.warning'),\n          message: this.$t('message.checkedoneplease'),\n          type: \"warning\"\n        });\n      }\n    },\n    //拷贝确认\n    confirmCopy: function confirmCopy() {\n      var _this9 = this;\n\n      this.$refs.copyForm.validate(function (valid) {\n        if (valid) {\n          api.copyType(_this9.copyList).then(function () {\n            _this9.$message({\n              type: 'success',\n              message: '拷贝成功'\n            });\n\n            _this9.copyList.wareRuleCode = '';\n            _this9.copyList.wareRuleName = '';\n            _this9.copyDialogFormVisible = false;\n\n            _this9.getMainList();\n          });\n        }\n      });\n    }\n  }\n};",null]}