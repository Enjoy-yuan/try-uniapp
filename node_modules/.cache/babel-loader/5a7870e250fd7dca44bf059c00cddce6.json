{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/energyConsumptionReport/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/energyConsumptionReport/index.vue","mtime":1596610933522},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as api from '@/api/project/ems/energyReport/energyConsumptionReport.js';\nimport Bar from '@/views/project/EMS/energyReport/temp/bar.vue';\nimport { mapState } from 'vuex'; // import Pagination from '@/components/Pagination'\n\nexport default {\n  name: 'energyConsumptionReport',\n  //工序级能源消耗报表\n  components: {\n    Bar: Bar\n  },\n  data: function data() {\n    return {\n      theight: 0,\n      //表格高度\n      xAxisData: [],\n      listQuery: {\n        //查询\n        startTime: undefined,\n        energyConsumptionLevel: 'level_step'\n      },\n      barData: {\n        id: 'echartsaa',\n        data: null\n      },\n      color: ['#fd6361', '#02b7ae', '#37454e', '#606b6d', '#fd6361', '#ff9669', '#05b7ab'] //黄 蓝 黑 灰 红 橘  绿\n\n    };\n  },\n  computed: _objectSpread({}, mapState({\n    dt_energyConsumption_level: function dt_energyConsumption_level(state) {\n      return state.emsDict.dt_energyConsumption_level;\n    }\n  })),\n  mounted: function mounted() {\n    var _this = this;\n\n    this.setTableHeight(); //表格高度自适应\n\n    window.onresize = function () {\n      _this.setTableHeight();\n    };\n\n    this.$store.dispatch('emsDict/getDicData', ['dt_energyConsumption_level']);\n    this.getList(); // this.drawLine()\n  },\n  destroyed: function destroyed() {\n    this.setTableHeight();\n    this.$store.dispatch('emsDict/getDicData', ['dt_energyConsumption_level']);\n    this.getList();\n  },\n  methods: {\n    //表格高度计算\n    setTableHeight: function setTableHeight() {\n      this.theight = this.$myFun.getSingleTbHeight();\n    },\n    deleteQuery: function deleteQuery() {\n      // 清除查询条件\n      this.listQuery.energyConsumptionLevel = 'level_step'; //level_step\n\n      this.listQuery.startTime = undefined;\n      this.getList();\n    },\n    //获取表格数据\n    getList: function getList() {\n      var _this2 = this;\n\n      api.query(this.listQuery).then(function (response) {\n        // this.list = response.data\n        var eleEnergy = [];\n        var gasEnergy = [];\n        var waterEnergy = [];\n        _this2.xAxisData = [];\n        response.data.forEach(function (item) {\n          eleEnergy.push(item.eleCost);\n          gasEnergy.push(item.gasCost);\n          waterEnergy.push(item.waterCost);\n\n          _this2.xAxisData.push(item.levelCode);\n        });\n        _this2.barData.data = [{\n          name: '水能耗',\n          type: 'bar',\n          data: waterEnergy,\n          itemStyle: {\n            normal: {\n              color: _this2.color[0]\n            }\n          }\n        }, {\n          name: '电能耗',\n          type: 'bar',\n          data: eleEnergy,\n          itemStyle: {\n            normal: {\n              color: _this2.color[1]\n            }\n          }\n        }, {\n          name: '气能耗',\n          type: 'bar',\n          data: gasEnergy,\n          itemStyle: {\n            normal: {\n              color: _this2.color[2]\n            }\n          }\n        }];\n      });\n    },\n    drawLine: function drawLine() {\n      this.myChart = this.$echarts.init(document.getElementById('myChart'));\n    }\n  }\n};",null]}