{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/supplierManagement/supplierChange/supplierModification/Tab/tab1.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/supplierManagement/supplierChange/supplierModification/Tab/tab1.vue","mtime":1596610933959},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as api from \"@/api/project/srm/supplierManagement/supplierRegister\";\nimport * as api1 from '@/api/project/srm/supplierManage/supplierConfigure';\nimport { mapState } from \"vuex\";\nexport default {\n  data: function data() {\n    var validatePhoneTwo = function validatePhoneTwo(rule, value, callback) {\n      var reg = /^\\d{6}$/;\n\n      if (value == '' || value == undefined || value == null) {\n        callback();\n      } else {\n        if (!reg.test(value) && value != '') {\n          callback(new Error('请输入正确的邮编'));\n        } else {\n          callback();\n        }\n      }\n    };\n\n    var validateMoney = function validateMoney(rule, value, callback) {\n      var reg = /(^[1-9]\\d{0,7}$)/;\n\n      if (value == '' || value == undefined || value == null) {\n        callback();\n      } else {\n        if (!reg.test(value) && value != '') {\n          callback(new Error('请输入正确的金额'));\n        } else {\n          callback();\n        }\n      }\n    };\n\n    var validatePercentage = function validatePercentage(rule, value, callback) {\n      var reg = /^(100|[1-9]?\\d(\\.\\d\\d?\\d?)?)%$|0$/;\n\n      if (value == '' || value == undefined || value == null) {\n        callback();\n      } else {\n        if (!reg.test(value) && value != '') {\n          callback(new Error('请输入正确的百分比'));\n        } else {\n          callback();\n        }\n      }\n    };\n\n    var validatePerson = function validatePerson(rule, value, callback) {\n      var reg = /(^[1-9]\\d{0,7}$)/;\n\n      if (value == '' || value == undefined || value == null) {\n        callback();\n      } else {\n        if (!reg.test(value) && value != '') {\n          callback(new Error('请输入首位不为0的1-8位数'));\n        } else {\n          callback();\n        }\n      }\n    };\n\n    var validateArea = function validateArea(rule, value, callback) {\n      var reg = /(^[1-9]\\d{0,9}$)/;\n\n      if (value == '' || value == undefined || value == null) {\n        callback();\n      } else {\n        if (!reg.test(value) && value != '') {\n          callback(new Error('请输入首位不为0的1-10位数'));\n        } else {\n          callback();\n        }\n      }\n    };\n\n    return {\n      rowId: null,\n      edit: false,\n      mainFactory: [],\n      country: [],\n      province: [],\n      city: [],\n      mainList: {\n        supplierCode: undefined,\n        supplierName: undefined,\n        supplierShortName: undefined,\n        legalPerson: undefined,\n        registeredAddress: undefined,\n        enterpriseCode: undefined,\n        specialPermit: undefined,\n        businessLicense: undefined,\n        taxRegistrationCertificate: undefined,\n        specialTaxPolicy: undefined,\n        bank: undefined\n      },\n      obj: {\n        supplierCode: 'no',\n        supplierName: 'no',\n        supplierShortName: 'no',\n        legalPerson: 'no',\n        registeredAddress: 'no',\n        enterpriseCode: 'no',\n        specialPermit: 'no',\n        businessLicense: 'no',\n        taxRegistrationCertificate: 'no',\n        specialTaxPolicy: 'no',\n        bank: 'no',\n        account: 'no',\n        paymentWay: 'no',\n        settlementPeriod: 'no',\n        enterpriseType: 'no',\n        classification: 'no',\n        supplyClassification: 'no',\n        supplierType: 'no',\n        frozenState: 'no',\n        cooperationType: 'no',\n        country: 'no',\n        province: 'no',\n        city: 'no',\n        grade: 'no',\n        mainFactory: 'no',\n        contacts: 'no',\n        telephone: 'no',\n        email: 'no',\n        fax: 'no',\n        postalCode: 'no',\n        contactAddress: 'no',\n        registeredCapital: 'no',\n        fixedAssets: 'no',\n        mainVenture: 'no',\n        shareRatio: 'no',\n        area: 'no',\n        website: 'no',\n        workerNumber: 'no',\n        enterpriseNumber: 'no',\n        manageNumber: 'no',\n        technologyNumber: 'no',\n        establishmentTime: 'no',\n        recommendedUnit: 'no',\n        profile: 'no'\n      },\n      activeCollNames: ['1', '2', '3'],\n      rules: {\n        supplierName: [{\n          required: true,\n          message: '供应商名称不能为空',\n          trigger: 'blur'\n        }],\n        supplierShortName: [{\n          required: true,\n          message: '供应商简称不能为空',\n          trigger: 'blur'\n        }],\n        legalPerson: [{\n          required: true,\n          message: '法人代表不能为空',\n          trigger: 'blur'\n        }],\n        registeredAddress: [{\n          required: true,\n          message: '注册地址不能为空',\n          trigger: 'blur'\n        }],\n        enterpriseCode: [{\n          required: true,\n          message: '企业代码不能为空',\n          trigger: 'blur'\n        }],\n        businessLicense: [{\n          required: true,\n          message: '营业执照不能为空',\n          trigger: 'blur'\n        }],\n        specialPermit: [{\n          required: true,\n          message: '特殊许可证不能为空',\n          trigger: 'blur'\n        }],\n        email: [{\n          required: false,\n          message: '请输入邮箱地址',\n          trigger: 'blur'\n        }, {\n          type: 'email',\n          message: '请输入正确的邮箱地址',\n          trigger: ['blur', 'change']\n        }],\n        postalCode: [{\n          required: false,\n          message: \"请输入邮编\",\n          trigger: \"blur\"\n        }, {\n          validator: validatePhoneTwo,\n          trigger: \"blur\"\n        }],\n        registeredCapital: [{\n          validator: validateMoney,\n          trigger: \"blur\",\n          message: \"请输入首位不为0的1-8位数\"\n        }],\n        fixedAssets: [{\n          validator: validateMoney,\n          trigger: \"blur\",\n          message: \"请输入首位不为0的1-8位数\"\n        }],\n        shareRatio: [{\n          validator: validatePercentage,\n          trigger: \"blur\"\n        }],\n        workerNumber: [{\n          validator: validatePerson,\n          trigger: \"blur\"\n        }],\n        enterpriseNumber: [{\n          validator: validatePerson,\n          trigger: \"blur\"\n        }],\n        manageNumber: [{\n          validator: validatePerson,\n          trigger: \"blur\"\n        }],\n        technologyNumber: [{\n          validator: validatePerson,\n          trigger: \"blur\"\n        }],\n        area: [{\n          validator: validateArea,\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  computed: _objectSpread({}, mapState({\n    dt_srm_pa2: function dt_srm_pa2(state) {\n      return state.dict.dt_srm_pa2;\n    },\n    dt_srm_pa3: function dt_srm_pa3(state) {\n      return state.dict.dt_srm_pa3;\n    },\n    dt_srm_pa1: function dt_srm_pa1(state) {\n      return state.dict.dt_srm_pa1;\n    },\n    dt_srm_pa5: function dt_srm_pa5(state) {\n      return state.dict.dt_srm_pa5;\n    },\n    dt_srm_pa6: function dt_srm_pa6(state) {\n      return state.dict.dt_srm_pa6;\n    },\n    dt_srm_pay: function dt_srm_pay(state) {\n      return state.dict.dt_srm_pay;\n    },\n    dt_srm_pax: function dt_srm_pax(state) {\n      return state.dict.dt_srm_pax;\n    }\n  })),\n  mounted: function mounted() {\n    this.$store.dispatch(\"dict/getDicData\", [\"dt_srm_pa2\", \"dt_srm_pa3\", \"dt_srm_pa1\", \"dt_srm_pa5\", \"dt_srm_pa6\", \"dt_srm_pay\", \"dt_srm_pax\"]);\n  },\n  methods: {\n    setTabData: function setTabData(val) {\n      this.mainList = val;\n      console.log(this.mainList, val, 56789);\n    },\n    getList: function getList(row) {\n      var _this = this;\n\n      var a = {\n        rowId: row.rowId\n      };\n      api.updateRecords(a).then(function (res) {\n        _this.mainList = res.data.baseInfoDTO;\n      });\n    },\n    getListCompare: function getListCompare() {\n      var _this2 = this;\n\n      var a = {\n        state: 'P002',\n        changeMode: 'PAR0'\n      };\n      api1.queryRecords(a).then(function (res) {\n        _this2.rowId = res.data.map(function (v) {\n          return v.rowId;\n        });\n        var saveData = new Promise(function (resolve, reject) {\n          console.log(reject);\n          var saveList = [];\n\n          _this2.rowId.forEach(function (v) {\n            api1.queryRecordItem(v).then(function (res) {\n              saveList.push(res.data);\n\n              if (_this2.rowId.length == saveList.length) {\n                resolve(saveList);\n              }\n            });\n          });\n        });\n        saveData.then(function (res) {\n          res.forEach(function (item) {\n            item.forEach(function (v) {\n              Object.keys(_this2.mainList).forEach(function (n) {\n                if (v.fieldCode !== n) {\n                  _this2.obj[v.fieldCode] = 'yes';\n                } else {\n                  _this2.obj[v.fieldCode] = 'no';\n                }\n              });\n            });\n          });\n        });\n      });\n    },\n    //获取国家下拉列表方法\n    getCountry: function getCountry() {\n      var _this3 = this;\n\n      var a = {\n        areatype: 'country'\n      };\n      api.queryRecordArea(a).then(function (res) {\n        _this3.country = res.data;\n      });\n    },\n    //获取省份下拉列表方法\n    getProvince: function getProvince() {\n      var _this4 = this;\n\n      if (this.mainList.country) {\n        var a = {\n          areatype: 'province',\n          equalcode: this.mainList.country\n        };\n        api.queryRecordArea(a).then(function (res) {\n          _this4.province = res.data;\n          console.log(res.data, '777');\n\n          _this4.$set(_this4.mainList, 'province');\n        });\n      } else {\n        this.province = [];\n        this.mainList.province = undefined;\n      }\n    },\n    //获取城市下拉列表方法\n    getCity: function getCity() {\n      var _this5 = this;\n\n      if (this.mainList.province && this.mainList.country) {\n        var a = {\n          areatype: 'city',\n          equalcode: this.mainList.province\n        };\n        api.queryRecordArea(a).then(function (res) {\n          _this5.city = res.data;\n\n          _this5.$set(_this5.mainList, 'city');\n        });\n      } else {\n        this.city = [];\n        this.mainList.city = undefined;\n      }\n    },\n    //获取工厂下拉列表方法\n    getFactory: function getFactory(row) {\n      var _this6 = this;\n\n      api.queryRecordFactory(row.rowId).then(function (res) {\n        _this6.mainFactory = res.data;\n      });\n    },\n    resetTemp: function resetTemp() {\n      this.mainList = {\n        supplierCode: undefined,\n        supplierName: undefined,\n        supplierShortName: undefined,\n        legalPerson: undefined,\n        registeredAddress: undefined,\n        enterpriseCode: undefined,\n        specialPermit: undefined,\n        businessLicense: undefined,\n        taxRegistrationCertificate: undefined,\n        specialTaxPolicy: undefined,\n        bank: undefined,\n        account: undefined,\n        paymentWay: undefined,\n        settlementPeriod: undefined,\n        enterpriseType: undefined,\n        classification: undefined,\n        supplyClassification: undefined,\n        supplierType: undefined,\n        frozenState: undefined,\n        cooperationType: undefined,\n        country: undefined,\n        province: undefined,\n        city: undefined,\n        grade: undefined,\n        mainFactory: undefined,\n        contacts: undefined,\n        telephone: undefined,\n        email: undefined,\n        fax: undefined,\n        postalCode: undefined,\n        contactAddress: undefined,\n        registeredCapital: undefined,\n        fixedAssets: undefined,\n        mainVenture: undefined,\n        shareRatio: undefined,\n        area: undefined,\n        website: undefined,\n        workerNumber: undefined,\n        enterpriseNumber: undefined,\n        manageNumber: undefined,\n        technologyNumber: undefined,\n        establishmentTime: undefined,\n        recommendedUnit: undefined,\n        profile: undefined\n      };\n    }\n  }\n};",null]}