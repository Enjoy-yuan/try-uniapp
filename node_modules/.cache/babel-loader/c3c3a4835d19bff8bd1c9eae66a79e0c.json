{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/priceManage/actuarialPrice/actuarialDetailCost/tab/tabQuote.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/priceManage/actuarialPrice/actuarialDetailCost/tab/tabQuote.vue","mtime":1596610933675},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from \"vuex\";\nexport default {\n  name: 'tabQuote',\n  props: ['tabQuoteList'],\n  data: function data() {\n    return {\n      type: null,\n      tableData: [],\n      tableConfig: [{\n        label: '制造总费用',\n        prop: 'no1',\n        align: 'center',\n        width: 'auto',\n        innerArr: [{\n          label: '类型',\n          fixed: true,\n          prop: 'totalType',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '原材料费用',\n          prop: 'rawMaterialCost',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '回收价值',\n          prop: 'recoveryValue',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '外购/协费用',\n          prop: 'outsourcingCost',\n          align: 'center',\n          width: '100'\n        }, {\n          label: '专业工装费用',\n          prop: 'toolingCost',\n          align: 'center',\n          width: '120'\n        }, {\n          label: '加工费用',\n          prop: 'processingCost',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '废品损失',\n          prop: 'wasteLoss',\n          align: 'center',\n          width: 'auto'\n        }]\n      }, {\n        label: '期间费用',\n        prop: 'no2',\n        align: 'center',\n        width: 'auto',\n        innerArr: [{\n          type: 'commonInput',\n          label: '设计/实验费用',\n          prop: 'designCost',\n          align: 'center',\n          width: '120'\n        }, {\n          label: '管理费率',\n          prop: 'managementRate',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '管理费',\n          prop: 'managementCost',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '财务费率',\n          prop: 'financialRate',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '财务费用',\n          prop: 'financialCost',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '包装费用',\n          prop: 'packingCost',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '物流费用',\n          prop: 'logisticsCost',\n          align: 'center',\n          width: 'auto'\n        }, {\n          type: 'commonInput',\n          label: '其它费用',\n          prop: 'otherCost',\n          align: 'center',\n          width: 'auto'\n        }]\n      }, {\n        label: '利润率',\n        prop: 'profitRate',\n        align: 'center',\n        width: 'auto'\n      }, {\n        label: '利润',\n        prop: 'profit',\n        align: 'center',\n        width: 'auto'\n      }, {\n        label: '核实价',\n        prop: 'realPrice',\n        align: 'center',\n        width: 'auto'\n      }]\n    };\n  },\n  computed: _objectSpread({}, mapState({\n    sums: function sums(state) {\n      return state.getData.sums;\n    },\n    //原材料小计精算(A)\n    RecoveryValue: function RecoveryValue(state) {\n      return state.getData.recoveryValue;\n    },\n    //回收价值精算(A6)\n    WGsums: function WGsums(state) {\n      return state.getData.WGsums;\n    },\n    //外购小计精算(B)\n    ApportionmentFee: function ApportionmentFee(state) {\n      return state.getData.ApportionmentFee;\n    },\n    //单件摊销精算(C)\n    JGsums: function JGsums(state) {\n      return state.getData.JGsums;\n    },\n    //加工费用精算(D)\n    Part: function Part(state) {\n      return state.getData.Part;\n    },\n    //单零件成本精算(H)\n    Wldata: function Wldata(state) {\n      return state.getData.Wldata;\n    },\n    //物流小计精算精算(I)\n    WasteLossYCL: function WasteLossYCL(state) {\n      return state.getData.WasteLossYCL;\n    },\n    //(A8)\n    Loss: function Loss(state) {\n      return state.getData.Loss;\n    },\n    //(B4)\n    WasteLossZY: function WasteLossZY(state) {\n      return state.getData.WasteLossZY;\n    },\n    //(C4)\n    RatedPower: function RatedPower(state) {\n      return state.getData.RatedPower;\n    } //(D6)\n\n  })),\n  watch: {\n    tabQuoteList: function tabQuoteList(val) {\n      if (this.type == 'add') {\n        var arr = JSON.parse(JSON.stringify(val));\n        arr.forEach(function (i) {\n          i.totalType = '报价';\n        });\n        this.tableData = arr;\n        var dto = {\n          totalType: '精算',\n          rawMaterialCost: 0,\n          recoveryValue: 0,\n          outsourcingCost: 0,\n          toolingCost: 0,\n          processingCost: 0,\n          wasteLoss: 0,\n          designCost: 0,\n          managementRate: 0,\n          managementCost: 0,\n          financialRate: 0,\n          financialCost: 0,\n          packingCost: 0,\n          logisticsCost: 0,\n          otherCost: 0,\n          realPrice: 0,\n          profit: 0\n        };\n        dto.otherCost = this.tableData[0].otherCost;\n        dto.designCost = this.tableData[0].designCost;\n        dto.managementRate = this.tableData[0].managementRate;\n        dto.financialRate = this.tableData[0].financialRate;\n        dto.profitRate = this.tableData[0].profitRate;\n        this.tableData.push(dto);\n        this.getRealPrice();\n      } else {\n        console.log(val, '9999');\n\n        var _arr = JSON.parse(JSON.stringify(val));\n\n        this.tableData = _arr; // this.tableData = arr.map(v => {\n        //     v.totalType = '精算'\n        //     return v\n        // })\n\n        console.log(this.tableData, '123');\n        this.getRealPrice();\n      }\n    },\n    //原材料费用（A）\n    'sums': function sums(val) {\n      if (this.tableData.length > 0) {\n        this.$set(this.tableData[this.tableData.length - 1], 'rawMaterialCost', val);\n        this.getRealPrice();\n      }\n    },\n    //回收价值(A6)\n    'RecoveryValue': function RecoveryValue(val) {\n      if (this.tableData.length > 0) {\n        this.$set(this.tableData[this.tableData.length - 1], 'recoveryValue', val);\n        this.getRealPrice();\n      }\n    },\n    //外购小计精算(B)\n    'WGsums': function WGsums(val) {\n      if (this.tableData.length > 0) {\n        this.$set(this.tableData[this.tableData.length - 1], 'outsourcingCost', val);\n        this.getRealPrice();\n      }\n    },\n    //单件摊销精算(C)\n    'ApportionmentFee': function ApportionmentFee(val) {\n      if (this.tableData.length > 0) {\n        this.$set(this.tableData[this.tableData.length - 1], 'toolingCost', val);\n        this.getRealPrice();\n      }\n    },\n    //加工费用精算(D)\n    'JGsums': function JGsums(val) {\n      if (this.tableData.length > 0) {\n        this.$set(this.tableData[this.tableData.length - 1], 'processingCost', val);\n        this.getRealPrice();\n      }\n    },\n    //单零件成本精算(H)\n    'Part': function Part(val) {\n      if (this.tableData.length > 0) {\n        this.$set(this.tableData[this.tableData.length - 1], 'packingCost', val);\n        this.getRealPrice();\n      }\n    },\n    //物流精算(I)\n    'Wldata': function Wldata(val) {\n      if (this.tableData.length > 0) {\n        this.$set(this.tableData[this.tableData.length - 1], 'logisticsCost', val);\n        this.getRealPrice();\n      }\n    },\n    //物流精算(A8)\n    'WasteLossYCL': function WasteLossYCL() {\n      if (this.tableData.length > 0) {\n        this.getRealPrice();\n      }\n    },\n    //物流精算(B4)\n    'Loss': function Loss() {\n      if (this.tableData.length > 0) {\n        this.getRealPrice();\n      }\n    },\n    //物流精算(C4)\n    'WasteLossZY': function WasteLossZY() {\n      if (this.tableData.length > 0) {\n        this.getRealPrice();\n      }\n    },\n    //物流精算(D6)\n    'RatedPower': function RatedPower() {\n      if (this.tableData.length > 0) {\n        this.getRealPrice();\n      }\n    }\n  },\n  methods: {\n    //废品损失计算\n    getwasteLossData: function getwasteLossData() {\n      var a = this.WasteLossYCL + this.Loss + this.WasteLossZY + this.RatedPower;\n      this.$emit('getLossData', this.checkValue(a));\n      return this.WasteLossYCL + this.Loss + this.WasteLossZY + this.RatedPower;\n    },\n    //利润计算\n    getProfit: function getProfit() {\n      var dataItem = this.sums - this.RecoveryValue + this.WGsums + this.ApportionmentFee + this.JGsums; //(A-A6+B+C+D)\n\n      var EData = this.WasteLossYCL + this.Loss + this.WasteLossZY + this.RatedPower; //(A8+B4+C4+D6)//E\n      // let GLcost = (dataItem + EData) * 0.05 //F\n      // let CWcost = (dataItem + EData) * 0.05 //G\n\n      var GLcost = (dataItem + EData) * parseFloat(this.tableData[this.tableData.length - 1].managementRate); //F\n\n      var CWcost = (dataItem + EData) * parseFloat(this.tableData[this.tableData.length - 1].financialRate); //G\n\n      var Profit = (dataItem + EData + GLcost + CWcost) * this.tableData[this.tableData.length - 1].profitRate; //K\n\n      this.$emit('getProfit', this.checkValue(Profit));\n      return this.checkValue(Profit);\n    },\n    //核实价计算\n    getRealPrice: function getRealPrice() {\n      var dataItem = this.sums - this.RecoveryValue + this.WGsums + this.ApportionmentFee + this.JGsums; //(A-A6+B+C+D)\n\n      var EData = this.WasteLossYCL + this.Loss + this.WasteLossZY + this.RatedPower; //(A8+B4+C4+D6)//E\n      // let GLcost = (dataItem + EData) * 0.05 //F\n      // let CWcost = (dataItem + EData) * 0.05 //G\n      // let Profit = (dataItem + EData + GLcost + CWcost) * 0.2 //K\n\n      var GLcost = (dataItem + EData) * parseFloat(this.tableData[this.tableData.length - 1].managementRate) || 0; //F\n\n      var CWcost = (dataItem + EData) * parseFloat(this.tableData[this.tableData.length - 1].financialRate) || 0; //G\n\n      var Profit = (dataItem + EData + GLcost + CWcost) * parseFloat(this.tableData[this.tableData.length - 1].profitRate) || 0; //K\n\n      var a;\n      a = this.checkValue(parseFloat(dataItem) + parseFloat(EData) + parseFloat(GLcost) + parseFloat(CWcost) + parseFloat(Profit) + this.Part + this.Wldata + parseFloat(this.tableData[this.tableData.length - 1].otherCost) + parseFloat(this.tableData[this.tableData.length - 1].designCost));\n      this.$emit('getReal', a);\n      return a;\n    },\n    checkValue: function checkValue(val) {\n      if (isNaN(val) || val == Infinity) {\n        return undefined;\n      } else {\n        if (val.toString().indexOf('.') !== -1) {\n          val = parseFloat(val).toFixed(2);\n        }\n\n        return val;\n      }\n    },\n    getList: function getList(val) {\n      if (val && val[0].totalQuotation) {\n        this.tableData = [val[0].totalQuotation].map(function (v) {\n          v.type = '报价';\n          return v;\n        });\n      } else {\n        this.tableData = val[0].totalQuotations.map(function (v) {\n          v.type = '报价';\n          return v;\n        });\n      }\n\n      var dto = {\n        type: '精算',\n        rawMaterialCost: null,\n        recoveryValue: null,\n        outsourcingCost: null,\n        toolingCost: null,\n        processingCost: null,\n        wasteLoss: null,\n        designCost: null,\n        managementRate: null,\n        managementCost: null,\n        financialRate: null,\n        financialCost: null,\n        packingCost: null,\n        logisticsCost: null,\n        otherCost: null\n      };\n      dto.otherCost = this.tableData[0].otherCost;\n      dto.designCost = this.tableData[0].designCost;\n      dto.managementRate = this.tableData[0].managementRate;\n      dto.financialRate = this.tableData[0].financialRate;\n      dto.profitRate = this.tableData[0].profitRate;\n      this.tableData.push(dto); // this.getrealPrice()\n    },\n    initData: function initData(val) {\n      this.type = val;\n      this.tableData = [];\n    }\n  }\n};",null]}