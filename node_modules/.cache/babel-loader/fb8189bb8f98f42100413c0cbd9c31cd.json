{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EAS/RF/indexAnalysis/OEE/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EAS/RF/indexAnalysis/OEE/index.vue","mtime":1596610933418},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as api from '@/api/data-base/color';\nimport Pagination from '@/components/Pagination';\nimport deviceType from \"../../../components/deviceTypeSelect\";\nimport useDept from \"../../../components/useDeptSelect\";\nimport deviceSelect from \"./singleDeviceSelect\";\nexport default {\n  name: 'OEE',\n  components: {\n    Pagination: Pagination,\n    deviceType: deviceType,\n    useDept: useDept,\n    deviceSelect: deviceSelect\n  },\n  data: function data() {\n    return {\n      list: [{\n        date: '2020-5-1',\n        deviceCode: 'SBTZ20200622001',\n        deviceName: '转向吸油软管',\n        deviceType: '拧紧设备',\n        OEE: '85.64%'\n      }, {\n        date: '2020-5-2',\n        deviceCode: 'SBBM20200615002',\n        deviceName: '真空泵支架',\n        deviceType: '生产设备',\n        OEE: '92.33%'\n      }, {\n        date: '2020-5-3',\n        deviceCode: 'SBTZ20200615',\n        deviceName: '电动力真空泵支架',\n        deviceType: '测试设备',\n        OEE: '90.99%'\n      }, {\n        date: '2020-5-4',\n        deviceCode: 'SBZT12Z20200615',\n        deviceName: '转向吸油软管',\n        deviceType: '传动设备',\n        OEE: '88.24%'\n      }, {\n        date: '2020-5-5',\n        deviceCode: 'SBCT00Z20200615',\n        deviceName: '电动力真空泵支架',\n        deviceType: '拆分设备',\n        OEE: '94.95%'\n      }],\n      value: undefined,\n      total: 0,\n      theight: 0,\n      //表格高度\n      listQuery: {\n        page: true,\n        currentPage: 1,\n        pageSize: 15,\n        colorCode: undefined,\n        colorName: undefined\n      },\n      temp: {\n        colorCode: undefined,\n        colorName: undefined,\n        colorAbbreviation: undefined,\n        state: 1,\n        remark: undefined\n      },\n      deviceVisible: false,\n      colorCode: undefined,\n      selectCode: [],\n      tableKey: 0\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.drawLine();\n    this.setTableHeight(); //表格高度自适应\n\n    window.onresize = function () {\n      _this.setTableHeight();\n    }; // this.getList()\n\n  },\n  methods: {\n    handleDevice: function handleDevice() {\n      this.deviceVisible = true;\n    },\n    getDevice: function getDevice(val) {\n      if (val) {\n        Object.assign(this.listQuery, val);\n      } else {\n        return;\n      }\n    },\n    drawLine: function drawLine() {\n      // 基于准备好的dom，初始化echarts实例\n      var myChart = this.$echarts.init(document.getElementById('myChart')); // 绘制图表\n\n      myChart.setOption({\n        title: {\n          text: '平均值项：OEE'\n        },\n        tooltip: {},\n        xAxis: {\n          data: this.list.map(function (item) {\n            return item.deviceName;\n          })\n        },\n        yAxis: {},\n        series: [{\n          name: '销量',\n          type: 'bar',\n          data: this.list.map(function (item) {\n            return item.OEE.replace(/[^0-9]/gi, '') / 100;\n          })\n        }]\n      });\n      var myChart1 = this.$echarts.init(document.getElementById('myChart1')); // 绘制图表\n\n      myChart1.setOption({\n        title: {\n          text: '求和项：OEE'\n        },\n        tooltip: {},\n        xAxis: {\n          data: this.list.map(function (item) {\n            return item.date;\n          })\n        },\n        yAxis: {},\n        series: [{\n          name: '销量',\n          type: 'line',\n          data: [5, 20, 36, 10, 10, 20]\n        }]\n      });\n    },\n    getList: function getList() {\n      var _this2 = this;\n\n      api.queryRecords(this.listQuery).then(function (res) {\n        _this2.list = res.data.list;\n        _this2.total = res.data.pages.count;\n      });\n    },\n    //表格高度计算\n    setTableHeight: function setTableHeight() {\n      this.theight = this.$myFun.getSingleTbHeight();\n    },\n    handleQuery: function handleQuery() {\n      //查询\n      this.listQuery.currentPage = 1;\n      this.getList();\n    },\n    calMain: function calMain(row) {\n      // 计划停机时间小计\n      row.officeCal = Number(row.beforeOffice ? row.beforeOffice : 0) + Number(row.pointCheck ? row.pointCheck : 0); // 计划运行时间\n\n      row.planRunTime = Number(row.officeHour ? row.officeHour : 0) - Number(row.officeCal ? row.officeCal : 0); // 非计划停机时间小计\n\n      row.preNumCal = Number(row.preNum1 ? row.preNum1 : 0) + Number(row.preNum2 ? row.preNum2 : 0) + Number(row.preNum3 ? row.preNum3 : 0) + Number(row.preNum4 ? row.preNum4 : 0) + Number(row.preNum5 ? row.preNum5 : 0) + Number(row.preNum6 ? row.preNum6 : 0) + Number(row.preNum7 ? row.preNum7 : 0); // 实际运行时间\n\n      row.preActualTime = Number(row.planRunTime ? row.planRunTime : 0) - Number(row.preNumCal ? row.preNumCal : 0); // 运行有效率\n\n      row.actualRate = (Number(row.preActualTime ? row.preActualTime : 0) <= Number(row.planRunTime ? row.planRunTime : 0) && Number(row.preActualTime ? row.preActualTime : 0) > 0 ? (Number(row.preActualTime ? row.preActualTime : 0) / Number(row.planRunTime ? row.planRunTime : 0) * 100).toFixed(2) : 0) + '%'; // 如果 计划运行时间 >= 实际运行时间 > 0  则计算 否则返回0\n      // 质量合格率\n\n      row.outPutRate = (Number(row.output ? row.output : 0) > 0 && Number(row.output ? row.output : 0) > Number(row.unqualified ? row.unqualified : 0) ? ((Number(row.output ? row.output : 0) - Number(row.unqualified ? row.unqualified : 0)) / Number(row.output ? row.output : 0) * 100).toFixed(2) : 0) + '%'; // 表现率\n\n      row.preformRate = (Number(row.standardTime ? row.standardTime : 0) > 0 && Number(row.actualTime ? row.actualTime : 0) > 0 ? (Number(row.standardTime ? row.standardTime : 0) / Number(row.actualTime ? row.actualTime : 0) * 100).toFixed(2) : 0) + '%'; // OEE\n\n      var actualRate = (row.actualRate ? row.actualRate : 0).replace(/[^0-9]/gi, '') / 10000;\n      var outPutRate = (row.outPutRate ? row.outPutRate : 0).replace(/[^0-9]/gi, '') / 10000;\n      var preformRate = (row.preformRate ? row.preformRate : 0).replace(/[^0-9]/gi, '') / 10000;\n      row.OEE = (actualRate * outPutRate * preformRate * 100).toFixed(2) + '%';\n    }\n  }\n};",null]}