{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/components/Dialog/dialogMaterielCategory.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/components/Dialog/dialogMaterielCategory.vue","mtime":1596610933150},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Tree from \"@/components/Tree\";\nimport caiGou from '@/components/Select/xtpt/caigou'; //下拉组件\n\nimport { DICT_CODE } from '@/utils/constant';\nimport { queryRecords as getMaterielCateList } from \"@/api/project/srm/materialClassify/materialMaintain\";\nimport Pagination from '@/components/Pagination';\nexport default {\n  name: 'personSelect',\n  components: {\n    caiGou: caiGou,\n    Pagination: Pagination,\n    Tree: Tree\n  },\n  props: ['unMutiple', 'title', 'propName', 'propCode', 'required'],\n  data: function data() {\n    return {\n      valueType: 'code',\n      //code返回code name,row返回一行\n      treeType: 'materielCategory',\n      treeParams: {\n        orgCode: null\n      },\n      treeStyleObj: {\n        height: '460px',\n        overflow: 'auto'\n      },\n      activeName: 'first',\n      DICT_CODE: DICT_CODE,\n      tableKey: [0, 1, 2],\n      dialogVisible: false,\n      list: [],\n      total: 0,\n      listLoading: true,\n      listQuery: {\n        currentPage: 1,\n        pageSize: 10,\n        page: 1,\n        supplierCode: null,\n        supplierName: null,\n        orgCode: null,\n        classCode: null,\n        className: null\n      },\n      selectedRows: [],\n      currentSelectedRow: null,\n      filterConfig: [{\n        type: 'selectcaiGou',\n        label: '组织编码',\n        prop: 'orgCode',\n        width: '',\n        class: 'filter-item ml_5'\n      }, {\n        type: 'inputBtnGys',\n        label: '供应商名称',\n        prop: 'supplierName',\n        width: '',\n        class: 'ml_5'\n      }, {\n        type: 'commonInput',\n        label: '分类编码',\n        prop: 'classCode',\n        width: '',\n        class: 'filter-item ml_5'\n      }, {\n        type: 'commonInput',\n        label: '分类名称',\n        prop: 'className',\n        width: '',\n        class: 'filter-item ml_5'\n      }],\n      mainTitle: [{\n        width: null,\n        align: 'left',\n        label: '分类编码',\n        prop: 'classCode'\n      }, {\n        width: null,\n        align: 'left',\n        label: '分类名称',\n        prop: 'className'\n      }, {\n        width: null,\n        align: 'left',\n        label: '上级分类',\n        prop: 'parentRowId'\n      }, {\n        width: null,\n        align: 'left',\n        label: '采购组',\n        prop: 'orgCode'\n      }] //备选项主表头数据\n\n    };\n  },\n  watch: {\n    'listQuery.orgCode': function listQueryOrgCode(val) {\n      this.treeParams.orgCode = val;\n    }\n  },\n  methods: {\n    //选中某一行\n    checked: function checked(i) {\n      this.$refs.tbselect.toggleRowSelection(this.list[i], true);\n    },\n    handleQuery: function handleQuery() {\n      var _this = this;\n\n      this.listQuery.page = 1;\n      getMaterielCateList(this.listQuery).then(function (response) {\n        _this.list = response.data.list;\n        _this.total = response.data.pages.count;\n\n        if (_this.selectedRows) {\n          _this.selectedRows.forEach(function (items) {\n            _this.list.forEach(function (item, index) {\n              if (item.classCode === items.materielClass) {\n                _this.$nextTick(function () {\n                  this.checked(index);\n                });\n              }\n            });\n          });\n        }\n      });\n    },\n    selectChange: function selectChange(val) {\n      //备选项选中行\n      if (this.unMutiple) {\n        if (val.length > 1) {\n          this.$refs.tbselect.clearSelection(); //清除其他行的选中\n\n          this.$refs.tbselect.toggleRowSelection(val[val.length - 1], \"selected\"); //单击行绑定点击事件\n        } else if (val.length === 1) {\n          this.selectedRows = val;\n          this.currentSelectedRow = val[val.length - 1];\n        } else if (val.length === 0) {\n          this.selectedRows = val;\n          this.currentSelectedRow = null;\n        }\n      } else {\n        this.selectedRows = val;\n        this.currentSelectedRow = val[val.length - 1];\n      }\n    },\n    handleConfirm: function handleConfirm() {\n      if (this.required && this.selectedRows) {\n        if (this.selectedRows.length === 0) {\n          this.$message({\n            type: 'warning',\n            message: '请选择一条数据'\n          });\n        } else {\n          this.$emit('handleConfirm', this.selectedRows);\n          this.dialogVisible = false;\n        }\n      } else {\n        if (this.selectedRows) {\n          if (this.selectedRows.length === 0) {\n            if (this.valueType === 'code') {\n              this.$emit('handleConfirm', [{\n                materielClass: null,\n                materielClassName: null\n              }]);\n            } else {\n              this.$emit('handleConfirm', null);\n            }\n          } else {\n            this.$emit('handleConfirm', this.selectedRows);\n          }\n        } else {\n          if (this.valueType === 'code') {\n            this.$emit('handleConfirm', [{\n              materielClass: null,\n              materielClassName: null\n            }]);\n          } else {\n            this.$emit('handleConfirm', null);\n          }\n        }\n\n        this.dialogVisible = false;\n      }\n    },\n    showGys: function showGys() {\n      this.$emit('showGys', 'mc');\n    },\n    setGys: function setGys(gysRows) {\n      this.$set(this.listQuery, 'supplierName', gysRows[0].supplierName);\n      this.$set(this.listQuery, 'supplierCode', gysRows[0].supplierCode);\n    },\n    setTreeDatas: function setTreeDatas(classCode) {\n      this.$set(this.listQuery, 'classCode', classCode);\n      this.handleQuery();\n    }\n  }\n};",null]}