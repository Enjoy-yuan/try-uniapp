{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/IOT/MOM/logService/components/operationLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/IOT/MOM/logService/components/operationLog.vue","mtime":1601000744807},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport throttle from 'lodash/throttle';\nimport Pagination from '@/components/Pagination';\nimport * as api from '@/api/project/iot/MOM/logService';\nexport default {\n  components: {\n    Pagination: Pagination\n  },\n  data: function data() {\n    return {\n      time: '',\n      listQuery: {\n        currentPage: 1,\n        pageSize: 15,\n        startTime: '',\n        endTime: '',\n        userName: '',\n        ip: ''\n      },\n      listLoading: false,\n      tableData: [],\n      theight: 0,\n      total: 0\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.theight = this.$myFun.getSingleTbHeight() - 30;\n\n    window.onresize = function () {\n      _this.theight = _this.$myFun.getSingleTbHeight() - 30;\n    };\n\n    this.handleQuery();\n  },\n  methods: {\n    //表格查询\n    handleQuery: throttle(function () {\n      this.listQuery.currentPage = 1;\n      this.getList();\n    }, 2000, {\n      leading: true,\n      trailing: false\n    }),\n    getList: function getList() {\n      var _this2 = this;\n\n      this.listLoading = true;\n\n      if (this.time) {\n        this.listQuery.startTime = this.time[0];\n        this.listQuery.endTime = this.time[1];\n      }\n\n      api.getOperation(this.listQuery).then(function (res) {\n        _this2.tableData = [];\n        res.data.list.map(function (item) {\n          if (item.logInfo) {\n            item.logInfo.operation = item.operation;\n            item.logInfo.createTime = item.createTime;\n\n            _this2.tableData.push(item.logInfo);\n          }\n        });\n        _this2.total = res.data.total;\n        _this2.listLoading = false;\n      });\n    }\n  }\n};",null]}