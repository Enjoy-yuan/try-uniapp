{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/components/UserAvatar/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/components/UserAvatar/index.vue","mtime":1596610933184},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.typed.uint8-array\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getUserAvatar, userAvatar } from '@/api/system/user';\nexport default {\n  computed: {\n    myHeader: function myHeader() {\n      return {\n        authToken: window.sessionStorage.getItem('authToken')\n      };\n    }\n  },\n  created: function created() {\n    this.handleAvatarSuccess();\n  },\n  data: function data() {\n    return {\n      imageUrl: null\n    };\n  },\n  methods: {\n    upLoad: function upLoad(file) {\n      var _this = this;\n\n      var formData = new FormData();\n      formData.append('file', file.file);\n      userAvatar(formData).then(function () {\n        _this.handleAvatarSuccess();\n      }).catch(function () {\n        _this.$message.error('上传失败，请重新上传');\n      });\n    },\n    handleAvatarSuccess: function handleAvatarSuccess() {\n      var _this2 = this;\n\n      getUserAvatar().then(function (res) {\n        //获取用户头像信息\n        return 'data:image/png;base64,' + btoa(new Uint8Array(res.data).reduce(function (data, byte) {\n          return data + String.fromCharCode(byte);\n        }, ''));\n      }).then(function (data) {\n        _this2.imageUrl = data || '';\n      });\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === 'image/jpeg';\n      var isPNG = file.type === 'image/png';\n      var isGIF = file.type === 'image/gif';\n      var isLt2M = file.size / 1024 < 200; //图片大小不能超过65k\n\n      if (!isJPG && !isPNG && !isGIF) {\n        this.$message.error('上传头像图片只能是 JPG/PNG/GIF 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 200k!');\n      } // return isJPG && isLt2M;\n\n\n      return isLt2M && (isJPG || isPNG || isGIF);\n    }\n  }\n};",null]}