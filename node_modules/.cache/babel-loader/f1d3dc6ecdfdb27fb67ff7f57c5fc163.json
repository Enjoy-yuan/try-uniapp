{"remainingRequest":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/cf_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/cf_web/src/views/system/processManage/processConfiguration/diaLog/dialog2.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/cf_web/src/views/system/processManage/processConfiguration/diaLog/dialog2.vue","mtime":1600927611534},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as api from '@/api/system/process/processConfiguration';\nimport contentBaisc from \"../tab/tabBasic\";\nimport contentPerson from \"../tab/tabPerson\";\nimport contentRule from \"../tab/tabRule\";\nexport default {\n  name: 'dict',\n  components: {\n    contentBaisc: contentBaisc,\n    contentPerson: contentPerson,\n    contentRule: contentRule\n  },\n  data: function data() {\n    return {\n      src: null,\n      activeContent: 'content1',\n      showPersonc: false,\n      showRulesc: false,\n      type: null,\n      infoList: {},\n      dialogVisible: false,\n      nodeQuery: {\n        prodefId: null,\n        activityid: null,\n        type: 'userTask'\n      },\n      nodeConfigList: null,\n      formData: {\n        activityUpdateDTO: {},\n        taskUpdateDTO: {},\n        taskRuleUpdateDTOS: []\n      },\n      activityUpdateDTO: {\n        actcompleted: null,\n        actstarted: null,\n        beftasking: null,\n        //任务分配前事件\n        datastate: null,\n        //数据状态\n        flowstate: null,\n        //流程状态\n        servicename: null,\n        //活动名称\n        servicetype: null,\n        taskcompleted: null,\n        //任务转向后事件\n        taskcreated: null //任务转向前事件\n\n      },\n      taskUpdateDTO: {\n        assignee: null,\n        assigneename: null,\n        assigneetype: null,\n        //类型配置\n        autonode: null,\n        autoreminder: null,\n        //循环间隔(时)\n        carboncopy: null,\n        claim: null,\n        countersign: null,\n        defroleNames: null,\n        defuserNames: null,\n        defusers: null,\n        desctype: null,\n        discusstag: null,\n        exclusivetype: null,\n        messagetype: null,\n        //消息类型\n        percent: null,\n        //百分比配置\n        role: null,\n        rolename: null,\n        rolebackhi: null,\n        rollbacknode: null,\n        rollbacktype: null,\n        //驳回配置\n        samepauto: null,\n        //\n        secretary: null,\n        seq: null,\n        timeauto: null,\n        variable: null,\n        webroot: null //业务页面配置\n\n      },\n      taskRuleUpdateDTOS: []\n    };\n  },\n  computed: {},\n  mounted: function mounted() {},\n  methods: {\n    initData: function initData() {\n      this.src = null;\n      this.activeContent = 'content1';\n      this.showPersonc = false;\n      this.showRulesc = false;\n\n      if (typeof this.$refs.cbasic !== 'undefined') {\n        if (this.$refs.cbasic.showAll) {\n          this.$refs.cbasic.showAll = false;\n        }\n      }\n\n      this.formData = {\n        activityUpdateDTO: {},\n        taskUpdateDTO: {},\n        taskRuleUpdateDTOS: []\n      };\n    },\n    //保存节点配置\n    handleSave: function handleSave() {\n      var _this = this;\n\n      this.$refs.cbasic.setCheckVal();\n      this.setFormData();\n      console.log('保存当前节点配置', this.formData);\n      api.updateConfig(this.nodeQuery, this.formData).then(function () {\n        _this.dialogVisible = false;\n\n        _this.$emit('refresh');\n      });\n    },\n    setFormData: function setFormData() {\n      for (var key in this.activityUpdateDTO) {\n        for (var keyf in this.$refs.cbasic.formList) {\n          if (keyf === key) {\n            this.activityUpdateDTO[key] = this.$refs.cbasic.formList[key];\n          }\n        }\n\n        for (var _keyf in this.$refs.cperson.formList) {\n          if (_keyf === key) {\n            this.activityUpdateDTO[key] = this.$refs.cperson.formList[key];\n          }\n        }\n      }\n\n      for (var _key in this.taskUpdateDTO) {\n        for (var _keyf2 in this.$refs.cbasic.formList) {\n          if (_keyf2 === _key) {\n            this.taskUpdateDTO[_key] = this.$refs.cbasic.formList[_key];\n          }\n        }\n\n        for (var _keyf3 in this.$refs.cperson.formList) {\n          if (_keyf3 === _key) {\n            this.taskUpdateDTO[_key] = this.$refs.cperson.formList[_key];\n          }\n        }\n      }\n\n      this.taskRuleUpdateDTOS = this.$refs.crule.tableList;\n      this.formData.activityUpdateDTO = this.activityUpdateDTO;\n      this.formData.taskUpdateDTO = this.taskUpdateDTO;\n      this.formData.taskRuleUpdateDTOS = this.taskRuleUpdateDTOS;\n    },\n    //点击节点后触发\n    nodeClick: function nodeClick(data) {\n      this.activeContent = \"content1\";\n      this.type = data.params.data.type;\n      this.nodeQuery.prodefId = this.infoList.id;\n      this.nodeQuery.activityid = data.params.data.activityId;\n\n      if (this.type.toUpperCase() === 'USERTASK') {\n        this.showPersonc = true;\n        this.showRulesc = true;\n        this.$refs.cbasic.showAll = true;\n        this.getNodeList(data.params.data, this.nodeQuery);\n        this.getNodeConfig(this.nodeQuery);\n      } else if (this.type.toUpperCase() === 'EXCLUSIVEGATEWAY') {\n        this.showRulesc = true;\n        this.showPersonc = false;\n        this.$refs.cbasic.showAll = true;\n        this.getNodeList(data.params.data, this.nodeQuery);\n        this.getNodeConfig(this.nodeQuery);\n      } else {\n        this.showPersonc = false;\n        this.showRulesc = false;\n        this.$refs.cbasic.showAll = false;\n      }\n    },\n    selectClick: function selectClick(i) {\n      this.$emit('selectClick', i);\n    },\n    setPerson: function setPerson(val) {\n      this.$refs.cperson.setPerson(val);\n    },\n    //初始化所有tab的值\n    initTab: function initTab(data) {\n      this.infoList = data;\n    },\n    changeTab: function changeTab(val) {\n      if (val.name === 'content3') {\n        this.$refs.crule.initForm(this.nodeConfigList.taskRuleDTOS);\n        this.$refs.crule.varNameList = this.infoList.variableList;\n        this.$refs.crule.getNodeDir({\n          prodefId: this.infoList.id\n        });\n      } else if (val.name === 'content2') {\n        this.$refs.cperson.initForm(this.nodeConfigList);\n      }\n    },\n    //获取指定节点下拉框内容\n    getNodeList: function getNodeList(data, query) {\n      var _this2 = this;\n\n      api.getActivity(query).then(function (res) {\n        _this2.$refs.cbasic.getNodeList(data, res.data);\n      });\n    },\n    //获取节点配置\n    getNodeConfig: function getNodeConfig(query) {\n      var _this3 = this;\n\n      api.getActivityConfig(query).then(function (res) {\n        _this3.nodeConfigList = res.data;\n\n        _this3.$refs.cbasic.initForm(_this3.nodeConfigList);\n\n        _this3.$emit('setTabSelect', _this3.nodeConfigList.taskDTO.assigneetype);\n\n        console.log(_this3.nodeConfigList.taskDTO.assigneetype === \"0\", 8888888);\n      });\n    },\n    changeAssigneetype: function changeAssigneetype(val) {\n      this.$emit('setTabSelect', val);\n      this.$refs.cperson.setDisabled(val);\n    }\n  }\n};",null]}