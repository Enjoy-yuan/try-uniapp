{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EAS/database/equipmentInventory/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EAS/database/equipmentInventory/index.vue","mtime":1596610933479},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Pagination from '@/components/Pagination'; // Secondary package based on el-pagination\n\nimport * as api from '@/api/project/mes/dataBase/stationEquipment/stationEquipment';\nexport default {\n  name: 'stationEquipment',\n  components: {\n    Pagination: Pagination\n  },\n  data: function data() {\n    return {\n      theight: 0,\n      //表格高度\n      workCenterData: [],\n      select_a: [],\n      select_b: [],\n      list_a: [],\n      list_b: [],\n      total_a: 0,\n      total_b: 0,\n      listQuery_a: {\n        currentPage: 1,\n        pageSize: 10,\n        stationCode: undefined,\n        stationName: undefined\n      },\n      listQuery_b: {\n        currentPage: 1,\n        pageSize: 10,\n        equipmentCode: undefined,\n        equipmentName: undefined\n      },\n      temp: {},\n      dialogFormVisible: false,\n      dialogStatus: '',\n      rules: {\n        colorCode: [{\n          required: true,\n          message: '对象不能为空',\n          trigger: 'blur'\n        }],\n        colorName: [{\n          required: true,\n          message: '对象不能为空',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.setTableHeight();\n    this.getList_a(); //表格高度自适应\n\n    window.onresize = function () {\n      _this.setTableHeight();\n    };\n  },\n  methods: {\n    //表格高度计算\n    setTableHeight: function setTableHeight() {\n      this.theight = this.$myFun.getSingleTbHeight() + 20;\n      this.stheight = this.theight - 6;\n    },\n    // 查询工位列表\n    getList_a: function getList_a() {\n      var _this2 = this;\n\n      this.list_b = [];\n      api.getStationList(this.listQuery_a).then(function (res) {\n        _this2.list_a = res.data.list;\n        _this2.total_a = res.data.pages.count;\n      });\n    },\n    // 查询工位对应设备\n    getList_b: function getList_b() {\n      var _this3 = this;\n\n      api.getStationEquipmentList(this.listQuery_b, this.select_a[0].stationCode).then(function (res) {\n        _this3.list_b = res.data.list;\n        _this3.total_b = res.data.pages.count;\n      });\n    },\n    selectRow_a: function selectRow_a(val) {\n      this.select_a = val;\n\n      if (val.length == 0) {\n        this.select_a = [];\n        this.list_b = [];\n        return false;\n      }\n\n      if (val.length > 1) {\n        this.$refs.tb_a.clearSelection();\n        this.$refs.tb_a.toggleRowSelection(val[val.length - 1]);\n      }\n\n      this.$refs.tb_a.setCurrentRow(this.select_a[0]);\n\n      if (this.select_a.length) {\n        this.getList_b();\n      }\n    },\n    selectRow_b: function selectRow_b(val) {\n      this.select_b = val;\n\n      if (val.length > 1) {\n        this.$refs.tb_b.clearSelection();\n        this.$refs.tb_b.toggleRowSelection(val[val.length - 1]);\n      }\n\n      this.$refs.tb_b.setCurrentRow(this.select_b[0]);\n    },\n    //单击行绑定点击事件\n    rowClick_a: function rowClick_a(val) {\n      this.$refs.tb_a.toggleRowSelection(val, 'selected');\n    },\n    rowClick_b: function rowClick_b(val) {\n      this.$refs.tb_b.toggleRowSelection(val, 'selected');\n    },\n    handleCreate: function handleCreate() {\n      this.resetB();\n      this.dialogStatus = 'create';\n      this.dialogFormVisible = true;\n    },\n    create: function create() {\n      var _this4 = this;\n\n      this.$refs.temp.validate(function (valid) {\n        if (valid) {// api.xxxx(this.temp).then(() => {\n          //     this.getList_a()\n          //     this.dialogFormVisible = false\n          //     this.$message({\n          //         title: '成功',\n          //         message: '新增成功',\n          //         type: 'success',\n          //         duration: 2000\n          //     })\n          // })\n        } else {\n          _this4.clearValidate('temp');\n\n          return false;\n        }\n      });\n    },\n    handleUpdate: function handleUpdate() {\n      if (this.select_a && this.select_a.length == 1) {\n        this.$refs.temp.resetFields();\n        this.dialogStatus = 'update';\n        this.dialogFormVisible = true;\n      } else {\n        this.$message({\n          title: '警告',\n          message: '请选择一条信息',\n          type: 'warning'\n        });\n      }\n    },\n    update: function update() {\n      this.$refs.temp.validate(function (valid) {\n        if (valid) {// api.xxxx(this.temp).then(() => {\n          //     this.getList_a()\n          //     this.dialogFormVisible = false\n          //     this.$message({\n          //         title: '成功',\n          //         message: '更新成功',\n          //         type: 'success',\n          //         duration: 2000\n          //     })\n          // })\n        } else {\n          return false;\n        }\n      });\n    },\n    resetB: function resetB() {\n      this.listQuery_b = {\n        currentPage: 1,\n        pageSize: 10,\n        equipmentCode: undefined,\n        equipmentName: undefined\n      };\n    },\n    handleDelete: function handleDelete() {// if (this.select_a && this.select_a.length == 1) {\n      //     this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n      //         confirmButtonText: '确定',\n      //         cancelButtonText: '取消',\n      //         type: 'warning'\n      //     })\n      //         .then(() => {\n      //             let ids = []\n      //             this.selectlistRow.forEach((val, index) => {\n      //                 ids[index] = val.colorCode\n      //             })\n      //             api.deleteRecord(ids).then(() => {\n      //                 this.getList_a()\n      //                 this.$message({\n      //                     title: '成功',\n      //                     message: '删除成功',\n      //                     type: 'success',\n      //                     duration: 2000\n      //                 })\n      //             })\n      //         })\n      //         .catch(() => {\n      //             this.$message({\n      //                 type: 'info',\n      //                 message: '已取消删除'\n      //             })\n      //         })\n      // } else {\n      //     this.$message({\n      //         title: '警告',\n      //         message: '请选择一条信息',\n      //         type: 'warning'\n      //     })\n      // }\n    }\n  }\n};",null]}