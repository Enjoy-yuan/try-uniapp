{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/keyReport/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/keyReport/index.vue","mtime":1596610933524},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as api from '@/api/project/ems/energyReport/keyReport.js';\nimport Bar from '@/views/project/EMS/energyReport/temp/bar.vue';\nimport { mapState } from 'vuex';\nexport default {\n  name: 'keyReport',\n  //重点产品报表\n  components: {\n    Bar: Bar\n  },\n  data: function data() {\n    return {\n      theight: 0,\n      //表格高度\n      isSingle: true,\n      //表格是否单选 点击各按钮根据流程逻辑控制单多选\n      list: [],\n      chartsData: {\n        name: '',\n        id: 'myChartKey',\n        data: null\n      },\n      xAxisData: [],\n      listQuery: {\n        //查询\n        productCode: undefined,\n        month: undefined\n      },\n      color: ['#fd6361', '#02b7ae', '#37454e', '#606b6d', '#fd6361', '#ff9669', '#05b7ab'] //黄 蓝 黑 灰 红 橘  绿\n\n    };\n  },\n  computed: _objectSpread({}, mapState({\n    dt_cp_product_list: function dt_cp_product_list(state) {\n      return state.businessComponent.dt_cp_product_list;\n    }\n  })),\n  mounted: function mounted() {\n    var _this = this;\n\n    this.setTableHeight(); //表格高度自适应\n\n    window.onresize = function () {\n      _this.setTableHeight();\n    };\n\n    this.$store.dispatch('businessComponent/getBusinessComponentData', ['dt_cp_product_list']);\n    this.getList();\n  },\n  destroyed: function destroyed() {\n    this.setTableHeight();\n    this.$store.dispatch('businessComponent/getBusinessComponentData', ['dt_cp_product_list']);\n    this.getList();\n  },\n  methods: {\n    //获取表格数据\n    getList: function getList() {\n      var _this2 = this;\n\n      this.series = [];\n      this.xAxisData = [];\n      api.query(this.listQuery).then(function (response) {\n        _this2.list = response.data;\n        var eleEnergy = [];\n        var gasEnergy = [];\n        var waterEnergy = [];\n        response.data.forEach(function (item) {\n          eleEnergy.push(item.eleEnergy);\n          gasEnergy.push(item.gasEnergy);\n          waterEnergy.push(item.waterEnergy);\n\n          _this2.xAxisData.push(item.productCode);\n        });\n        _this2.chartsData.data = [{\n          name: '水能耗',\n          type: 'bar',\n          data: waterEnergy,\n          itemStyle: {\n            normal: {\n              color: _this2.color[0]\n            }\n          }\n        }, {\n          name: '电能耗',\n          type: 'bar',\n          data: eleEnergy,\n          itemStyle: {\n            normal: {\n              color: _this2.color[1]\n            }\n          }\n        }, {\n          name: '气能耗',\n          type: 'bar',\n          data: gasEnergy,\n          itemStyle: {\n            normal: {\n              color: _this2.color[2]\n            }\n          }\n        }];\n      });\n    },\n    setTableHeight: function setTableHeight() {\n      this.theight = this.$myFun.getSingleTbHeight();\n    },\n    deleteQuery: function deleteQuery() {\n      // 清除查询条件\n      this.listQuery.productCode = undefined;\n      this.listQuery.month = undefined;\n      this.getList();\n    }\n  }\n};",null]}