{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/components/Select/gysxz.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/components/Select/gysxz.vue","mtime":1596610933167},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Pagination from '@/components/Pagination'; // 分页组件\n\nimport * as api from '@/api/data-base/supplier';\nexport default {\n  components: {\n    Pagination: Pagination\n  },\n  //是否多选，名称，是否必须选择\n  props: ['unMutiple', 'isRequired', 'title'],\n  data: function data() {\n    return {\n      initSelected: null,\n      //初始选中值\n      listAll: null,\n      //备选项\n      listSelected: [],\n      //已选项\n      listSub: null,\n      //备选项子表\n      dialogVisible: false,\n      totalAll: 0,\n      //总条数\n      totalSelected: 0,\n      //选中的条数 暂未使用\n      activeName: 'first',\n      //tab激活内容\n      tableKey: [0, 1, 2],\n      //表格索引\n      selectRowData: null,\n      listQueryAll: {\n        page: true,\n        currentPage: 1,\n        pageSize: 10\n      },\n      //备选项查询条件\n      mainTitle: [{\n        width: null,\n        align: 'left',\n        label: this.$t('poFormulation.supplierCode'),\n        prop: 'supplierCode'\n      }, {\n        width: null,\n        align: 'left',\n        label: this.$t('poFormulation.supplierName'),\n        prop: 'supplierName'\n      }, {\n        width: null,\n        align: 'left',\n        label: this.$t('poFormulation.supplierTypeName'),\n        prop: 'supplierTypeName'\n      }, {\n        width: null,\n        align: 'left',\n        label: this.$t('poFormulation.supplyClassifyName'),\n        prop: 'supplyClassifyName'\n      }, {\n        width: null,\n        align: 'left',\n        label: this.$t('poFormulation.supplierGradeName'),\n        prop: 'supplierGradeName'\n      }, {\n        width: null,\n        align: 'left',\n        label: this.$t('poFormulation.contact'),\n        prop: 'contact'\n      }, {\n        width: null,\n        align: 'left',\n        label: this.$t('poFormulation.contactNumber'),\n        prop: 'contactNumber'\n      }, {\n        width: null,\n        align: 'left',\n        label: this.$t('poFormulation.email'),\n        prop: 'email'\n      }, {\n        width: null,\n        align: 'left',\n        label: this.$t('poFormulation.address'),\n        prop: 'address'\n      }, {\n        width: null,\n        align: 'left',\n        label: this.$t('poFormulation.des'),\n        prop: 'remark'\n      }] //备选项主表头数据\n\n    };\n  },\n  mounted: function mounted() {\n    //创建时加载备选项\n    this.getList1();\n  },\n  methods: {\n    //初始化选中内容\n    initSelect: function initSelect(val) {\n      this.listAll = null;\n      this.listSelected = null;\n      this.listSelected = val;\n      this.getList1();\n    },\n    //选中某一行\n    checked: function checked(i) {\n      this.$refs.tbselect.toggleRowSelection(this.listAll[i], true);\n    },\n    handleFilter1: function handleFilter1() {\n      //查询备选项\n      this.getList1();\n    },\n    getList1: function getList1() {\n      var _this = this;\n\n      //备选项查询\n      api.queryRecords(this.listQueryAll).then(function (res) {\n        _this.listAll = res.data.list;\n        _this.totalAll = res.data.pages.count;\n      });\n\n      if (this.listSelected) {\n        this.listSelected.forEach(function (items) {\n          _this.listAll.forEach(function (item, index) {\n            if (item.supplierCode === items.supplierCode) {\n              _this.$nextTick(function () {\n                this.checked(index);\n              });\n            }\n          });\n        });\n      }\n    },\n    getList2: function getList2() {\n      //已选项查询\n      this.listSelected = this.selectRowData;\n    },\n    selectChange: function selectChange(val) {\n      if (this.unMutiple) {\n        this.selectOneRow(val);\n      } else {\n        this.selectRows(val);\n      }\n    },\n    selectRows: function selectRows(val) {\n      //备选项选中行\n      this.selectRowData = val;\n      this.listSelected = this.selectRowData;\n    },\n    selectOneRow: function selectOneRow(val) {\n      var arr = [];\n      arr.push(val[val.length - 1]);\n      this.selectRowData = arr;\n\n      if (val.length > 1) {\n        this.$refs.tbselect.clearSelection();\n        this.$refs.tbselect.toggleRowSelection(val[val.length - 1], 'selected');\n      }\n\n      this.listSelected = this.selectRowData;\n    },\n    //供应商选择确定\n    dialogConfirm: function dialogConfirm() {\n      if (this.isGysRequired) {\n        if (!this.listSelected) {\n          this.$message({\n            title: this.$t('message.warning'),\n            message: this.$t('message.checkedoneplease'),\n            type: \"warning\"\n          });\n        } else if (!this.unMutiple && this.listSelected.length > 1) {\n          this.$message({\n            title: this.$t('message.warning'),\n            message: this.$t('message.checkedoneplease'),\n            type: \"warning\"\n          });\n        } else {\n          this.$emit('handleGysClick', this.listSelected);\n          this.dialogVisible = false;\n        }\n      } else {\n        this.$emit('handleGysClick', this.listSelected);\n        this.dialogVisible = false;\n      }\n    }\n  }\n};",null]}