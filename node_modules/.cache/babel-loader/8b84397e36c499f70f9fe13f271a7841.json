{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/contractManage/supplierPerformance/dailyEvaluation/evaluationFormat/dialog/addMainSub.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/contractManage/supplierPerformance/dailyEvaluation/evaluationFormat/dialog/addMainSub.vue","mtime":1597995949088},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport evaPerson from \"@/components/Dialog/dialogPersonSelect\";\nimport * as api from \"@/api/project/srm/contractManage/evaluationModel\";\nimport { mapState } from 'vuex';\nexport default {\n  components: {\n    evaPerson: evaPerson\n  },\n  data: function data() {\n    return {\n      dialogVisible: false,\n      tableKey: 0,\n      list: [],\n      listQuery: {},\n      selectedRows: null,\n      currentSelectedRow: null\n    };\n  },\n  computed: _objectSpread({}, mapState({\n    dt_srm_pb4: function dt_srm_pb4(state) {\n      return state.dict.dt_srm_pb4;\n    } // 评价项 \n\n  })),\n  mounted: function mounted() {\n    this.$store.dispatch('dict/getDicData', ['dt_srm_pb4']);\n\n    if (this.dt_srm_pb4) {\n      this.getList();\n    }\n  },\n  methods: {\n    handleQuery: function handleQuery() {},\n    getList: function getList() {\n      var _this = this;\n\n      var dto = {\n        page: true,\n        currentPage: 1,\n        pageSize: 15,\n        parentCode: 'root',\n        method: 'configure'\n      };\n      api.queryRecordTree(dto).then(function (res) {\n        // console.log(res)\n        setTimeout(function () {\n          // console.log(this.dt_srm_pb4)\n          _this.$nextTick(function () {\n            _this.dt_srm_pb4.forEach(function (item, index) {\n              var obj = {\n                num: '',\n                evaluationItem: '',\n                evaluationModel: ''\n              };\n              obj.num = index + 1;\n              obj.evaluationItem = item.dictItemKey;\n              res.data.list.forEach(function (val) {\n                if (val.evaluationItem == item.dictItemKey) {\n                  obj.evaluationModel = val.classificationCode;\n                }\n              });\n\n              _this.list.push(obj);\n\n              _this.list = _this.$myFun.srmCodeToName(_this.list, [_this.dt_srm_pb4], ['evaluationItem']);\n            });\n          });\n        }, 100);\n      });\n    },\n    // 评价人选择\n    showPJPS: function showPJPS(index) {\n      this.index = index;\n      this.$refs.selectPerson.selectedRows = null;\n      this.$refs.selectPerson.dialogVisible = true;\n    },\n    // 评价人选择确定\n    personConfirm: function personConfirm(selectedRow) {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        _this2.$set(_this2.list[_this2.index], 'evaluationUser', selectedRow[0].employeeCode);\n\n        _this2.$set(_this2.list[_this2.index], 'evaluationUserName', selectedRow[0].employeeName);\n      });\n    },\n    // 设置评价模型页确定\n    handleModel: function handleModel() {\n      if (!this.selectedRow.length) {\n        this.$message({\n          type: 'warning',\n          message: '请选择一条或者几条！'\n        });\n      } else {\n        this.dialogVisible = false;\n        this.$emit('modelList', this.selectedRow); // console.log(this.selectedRow)\n      }\n    },\n    // 表格选择框选中 注:参数为选中的所有行的数组\n    selectChange: function selectChange(val) {\n      if (this.isSingle) {\n        if (val.length > 1) {\n          this.$refs.tb.clearSelection(); //清除其他行的选中\n\n          this.$refs.tb.toggleRowSelection(val[val.length - 1], \"selected\"); //单击行绑定点击事件\n        } else if (val.length === 1) {\n          this.selectedRows = val;\n          this.currentSelectedRow = val[val.length - 1];\n        }\n      } else {\n        this.selectedRows = val;\n        this.currentSelectedRow = val[val.length - 1];\n      }\n    },\n    //点击表格某一行\n    rowClick: function rowClick(val) {\n      if (this.isSingle) {\n        this.$refs.tb.clearSelection(); //清除其他行的选中\n      }\n\n      this.$refs.tb.toggleRowSelection(val, \"selected\"); //单击行绑定点击事件\n    }\n  }\n};",null]}