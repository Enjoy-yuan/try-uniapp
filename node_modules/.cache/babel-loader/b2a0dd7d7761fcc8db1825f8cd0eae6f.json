{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/MES/qualityManagement/unqualifiedProductManagement/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/MES/qualityManagement/unqualifiedProductManagement/index.vue","mtime":1596610933589},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as auth from '@/utils/auth';\nimport * as api from '@/api/project/mes/dataBase/unqualifiedProduct';\nimport Pagination from '@/components/Pagination'; // import { mapState } from \"vuex\"\n\nexport default {\n  name: 'unqualified',\n  components: {\n    Pagination: Pagination\n  },\n  data: function data() {\n    return {\n      username: auth.getName(),\n      list: [''],\n      selectlistRow: undefined,\n      total: 0,\n      theight: 0,\n      //表格高度\n      listQuery: {\n        page: true,\n        currentPage: 1,\n        pageSize: 10,\n        barCode: undefined,\n        state: 'quality_inspection20'\n      },\n      tableKey: 0\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.setTableHeight(); //表格高度自适应\n\n    window.onresize = function () {\n      _this.setTableHeight();\n    };\n\n    this.getList();\n  },\n  methods: {\n    getList: function getList() {\n      var _this2 = this;\n\n      api.queryRecords(this.listQuery).then(function (res) {\n        _this2.list = res.data.list;\n        _this2.total = res.data.pages.count;\n      });\n    },\n    //表格高度计算\n    setTableHeight: function setTableHeight() {\n      this.theight = this.$myFun.getSingleTbHeight() * 0.85;\n    },\n    handleQuery: function handleQuery() {\n      //查询\n      this.listQuery.currentPage = 1;\n      this.getList();\n    },\n    // 获取表格选中时的数据\n    selectList: function selectList(val) {\n      this.selectlistRow = val[val.length - 1];\n\n      if (val.length > 1) {\n        this.$refs.mainList.clearSelection();\n        this.$refs.mainList.toggleRowSelection(val[val.length - 1], 'selected');\n      }\n    },\n    //主表行点击\n    selectListRow: function selectListRow(val) {\n      this.selectlistRow = val;\n      this.$refs.mainList.clearSelection();\n      this.$refs.mainList.toggleRowSelection(val, 'selected');\n    },\n    patchRecords: function patchRecords(method) {\n      var _this3 = this;\n\n      if (this.selectlistRow == undefined) {\n        this.$message({\n          title: '警告',\n          message: '请选择待维修项',\n          type: 'warning'\n        });\n        return false;\n      }\n\n      this.$confirm('确认' + (method == 'REPAIR' ? '维修完成?' : method == 'CONCEDE' ? '让步接收?' : method == 'DOWNGRADE' ? '降级处理?' : method == 'SCRAP' ? '报废?' : ''), '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        api.patchRecords(_this3.selectlistRow.rowId, method).then(function (res) {\n          if (res.status == 201) {\n            _this3.$message({\n              title: '成功',\n              message: '操作成功',\n              type: 'success'\n            });\n\n            _this3.getList();\n          }\n        });\n      });\n    }\n  }\n};",null]}