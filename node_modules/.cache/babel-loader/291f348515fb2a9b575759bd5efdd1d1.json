{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EAS/database/stationDefine/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EAS/database/stationDefine/index.vue","mtime":1596610933498},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _slicedToArray from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport RightContent from \"./rightcontent\";\nimport { buildTree } from '@/utils';\nimport { selectlists as listOrg } from '@/api/system/organization';\nimport { queryRecords as listWorkCenter } from '@/api/project/eas/database/work-center';\nimport orgSelect from '@/components/Select/orgSelect.vue';\nexport default {\n  name: 'gw',\n  components: {\n    RightContent: RightContent,\n    orgSelect: orgSelect\n  },\n  data: function data() {\n    return {\n      data: [],\n      defaultProps: {\n        children: 'children',\n        label: 'label'\n      },\n      //树高度样式\n      contentStyleObj: {\n        height: ''\n      },\n      orgCode: '',\n      DT_ORG_TYPE: 'dt_org_type_factory'\n    };\n  },\n  created: function created() {\n    window.addEventListener('resize', this.getHeight);\n    this.initTree();\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    //表格高度自适应\n    window.onresize = function () {\n      _this.setTreeHeight();\n    };\n\n    this.setTreeHeight();\n  },\n  methods: {\n    initTree: function initTree() {\n      var _this2 = this;\n\n      var orgQuery = {\n        type: this.DT_ORG_TYPE,\n        organizationCode: this.orgCode,\n        state: 1\n      };\n      var org = listOrg(orgQuery);\n      var workCenter = listWorkCenter({\n        orgCode: this.orgCode\n      });\n      Promise.all([org, workCenter]).then(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            org = _ref2[0],\n            workCenter = _ref2[1];\n\n        var workCenters = workCenter.data.map(function (v) {\n          return {\n            orgCode: v.orgCode,\n            parentCode: v.parentCode,\n            workCenterCode: v.workCenterCode,\n            label: v.workCenterName,\n            lineCode: v.lineCode,\n            feedArea: v.feedArea\n          };\n        });\n        var wcsTree = buildTree(workCenters, 'workCenterCode', 'parentCode', 'children');\n        _this2.data = org.data.map(function (v) {\n          var children = wcsTree.filter(function (v1) {\n            return v1.orgCode == v.organizationCode;\n          });\n          return {\n            label: v.organizationName,\n            orgCode: v.organizationCode,\n            children: children\n          };\n        });\n      });\n    },\n    handleFresh: function handleFresh(val) {\n      if (val) {\n        this.initTree();\n      }\n    },\n    handleChange: function handleChange(val) {\n      this.orgCode = val;\n      this.initTree();\n      this.$refs.uploadRef.list = [];\n    },\n    handleNodeClick: function handleNodeClick(data) {\n      this.$refs.uploadRef.getList(data);\n    },\n    getHeight: function getHeight() {\n      this.contentStyleObj.height = document.body.scrollHeight - 197 + 'px';\n    },\n    //树高度设置\n    setTreeHeight: function setTreeHeight() {\n      this.contentStyleObj.height = parseInt(this.$myFun.getTreehHeight()) - 40 + 'px';\n    }\n  },\n  destroyed: function destroyed() {\n    window.removeEventListener('resize', this.getHeight);\n  }\n};",null]}