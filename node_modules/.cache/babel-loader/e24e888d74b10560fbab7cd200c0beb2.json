{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/energyCostsReport/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/energyCostsReport/index.vue","mtime":1596610933523},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as api from '@/api/project/ems/energyReport/energyCostsReport.js';\nimport Pie from '@/views/project/EMS/energyReport/temp/pie.vue';\nimport { mapState } from 'vuex';\nexport default {\n  name: 'keyReport',\n  //重点产品报表\n  components: {\n    Pie: Pie\n  },\n  data: function data() {\n    return {\n      theight: 0,\n      //表格高度\n      list: [],\n      dataTime: undefined,\n      listQuery: {\n        energyConsumptionLevel: undefined,\n        //level_step\n        startTime: undefined\n      },\n      xAxis: null,\n      chartData: []\n    };\n  },\n  computed: _objectSpread({}, mapState({\n    dt_energyConsumption_level: function dt_energyConsumption_level(state) {\n      return state.emsDict.dt_energyConsumption_level;\n    }\n  }), {\n    holder: function holder() {\n      return this.list.length % 3 == 0 ? 0 : 3 - this.list.length % 3;\n    }\n  }),\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$store.dispatch('emsDict/getDicData', ['dt_energyConsumption_level']);\n    this.setTableHeight(); //表格高度自适应\n\n    window.onresize = function () {\n      _this.setTableHeight();\n    };\n\n    this.getList();\n  },\n  destroyed: function destroyed() {\n    this.$store.dispatch('emsDict/getDicData', ['dt_energyConsumption_level']);\n    this.setTableHeight();\n    this.getList();\n  },\n  methods: {\n    //表格高度计算\n    setTableHeight: function setTableHeight() {\n      this.theight = this.$myFun.getSingleTbHeight();\n    },\n    //获取表格数据\n    getList: function getList() {\n      var _this2 = this;\n\n      api.query(this.listQuery).then(function (response) {\n        _this2.list = response.data;\n        _this2.xAxis = response.data.map(function (res) {\n          return res.levelCode;\n        });\n        var chartData = [];\n        response.data.forEach(function (i, index) {\n          var s = [{\n            value: i.waterCost,\n            name: '水'\n          }, {\n            value: i.eleCost,\n            name: '电'\n          }, {\n            value: i.gasCost,\n            name: '气'\n          }];\n          chartData.push({\n            id: \"pie-costs-\".concat(index),\n            name: i.levelCode,\n            data: s\n          });\n        });\n        _this2.chartData = chartData;\n      });\n    },\n    deleteQuery: function deleteQuery() {\n      // 清除查询条件\n      this.listQuery.energyConsumptionLevel = undefined; //level_step\n\n      this.listQuery.startTime = undefined;\n      this.getList();\n    },\n    //表格查询\n    handleQuery: function handleQuery() {\n      this.listQuery.currentPage = 1;\n      this.getList();\n    }\n  }\n};",null]}