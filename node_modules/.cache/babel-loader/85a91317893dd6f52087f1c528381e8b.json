{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/supplierSelection/supplierRFQ/supplierRFQAnswer/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/supplierSelection/supplierRFQ/supplierRFQAnswer/index.vue","mtime":1599136050909},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as api from \"@/api/project/srm/supplierSelect/supplierRFQ/supplierRFQAnswer\";\nimport { DICT_CODE } from '@/utils/constant';\nimport caiGou from '@/components/Select/xtpt/caigou'; //下拉组件\n\nimport { mapState } from \"vuex\";\nimport Pagination from \"@/components/Pagination\"; // import dialogImport from '@/components/Dialog/dialogImport'\n\nimport dialogGysxz from '@/components/Dialog/dialogsGysxz'; //供应商选择\n\nimport dialogQuote from \"./dialog/dialogQuote\"; //明细报价\n\nimport dialogQuoteTotal from \"./dialog/dialogQuoteTotal\"; //总价报价\n\nimport dialogQuoteLevel1 from \"./dialog/dialogQuoteLevel1\"; //一级报价\n\nimport technicalResponse from \"./dialog/technicalResponse\"; //一级报价\n\nexport default {\n  name: \"supplierRFQAnswer\",\n  components: {\n    caiGou: caiGou,\n    Pagination: Pagination,\n    dialogGysxz: dialogGysxz,\n    dialogQuote: dialogQuote,\n    dialogQuoteTotal: dialogQuoteTotal,\n    dialogQuoteLevel1: dialogQuoteLevel1,\n    technicalResponse: technicalResponse\n  },\n  data: function data() {\n    return {\n      theight: 0,\n      //表格高度\n      isSingle: true,\n      //表格是否单选 点击各按钮根据流程逻辑控制单多选\n      Single: false,\n      dataList: [],\n      itemList: [],\n      //从表数据\n      total: 0,\n      totalItem: 0,\n      listQuery: {\n        //查询\n        page: true,\n        currentPage: 1,\n        pageSize: 10,\n        orgCode: null,\n        supplierName: null,\n        supplierCode: null,\n        materielCode: null,\n        rfqNo: null,\n        state: null\n      },\n      itemQuery: {\n        page: true,\n        currentPage: 1,\n        pageSize: 10,\n        proposalNo: null\n      },\n      DICT_CODE: DICT_CODE,\n      currentSelectedSubRow: null,\n      //从表当前选中行\n      selectedSubRows: [],\n      //多选时选中的所有行从表\n      currentSelectedRow: null,\n      //当前选中的行\n      selectedRows: [],\n      //多选时选中的所有行\n      tableKey: 0,\n      //表格索引\n      filterConfig: [{\n        type: 'selectcaiGou',\n        label: '采购组织',\n        prop: 'orgCode',\n        width: '',\n        copmNum: 0,\n        class: 'filter-item'\n      }, {\n        type: 'inputBtnGys',\n        label: '供应商名称',\n        prop: 'supplierName',\n        width: '',\n        class: 'ml_5'\n      }, {\n        type: 'commonInput',\n        label: '物料编码',\n        prop: 'materielCode',\n        width: '',\n        class: 'filter-item ml_5'\n      }, {\n        type: 'commonInput',\n        label: 'RFQ单号',\n        prop: 'rfqNo',\n        width: '',\n        class: 'filter-item ml_5'\n      }, {\n        type: 'dictSelect',\n        dType: 'dt_srm_p0',\n        label: '状态',\n        prop: 'state',\n        width: '',\n        class: 'filter-item ml_5'\n      }],\n      oprateBtnConfig: {\n        main: [{\n          id: 0,\n          class: 'filter-item',\n          icon: 'el-icon-download',\n          clickMethod: 'handleDownload',\n          name: '邀标资料下载'\n        }, {\n          id: 1,\n          class: 'filter-item ml_5',\n          icon: 'el-icon-finished',\n          clickMethod: 'handlePlanSubmit',\n          name: '技术方案提交'\n        }, {\n          id: 2,\n          class: 'filter-item ml_5',\n          icon: 'el-icon-finished',\n          clickMethod: 'handleQuoteSubmit',\n          name: '报价提交'\n        }],\n        sub: [{\n          id: 0,\n          class: 'filter-item',\n          icon: 'el-icon-plus',\n          clickMethod: 'handleRfq',\n          name: '技术应答'\n        }, {\n          id: 1,\n          class: 'filter-item ml_5',\n          icon: 'el-icon-plus',\n          clickMethod: 'handleQuote',\n          name: '报价'\n        }, {\n          id: 2,\n          class: 'filter-item ml_5',\n          icon: 'el-icon-download',\n          clickMethod: 'handleSorDownload',\n          name: 'SOR下载'\n        }, {\n          id: 3,\n          class: 'filter-item ml_5',\n          icon: 'el-icon-upload2',\n          clickMethod: 'handleFileImport',\n          name: '附件上传'\n        }, {\n          id: 4,\n          class: 'filter-item ml_5',\n          icon: 'el-icon-download',\n          clickMethod: 'handleQuoteImport',\n          name: '报价导入'\n        }, {\n          id: 5,\n          class: 'filter-item ml_5',\n          icon: 'el-icon-plus',\n          clickMethod: 'handleQuoteView',\n          name: '报价预览'\n        }]\n      },\n      tableConfig: {\n        main: [{\n          label: 'RFQ状态',\n          prop: 'stateCN',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: 'RFQ单号',\n          prop: 'rfqNo',\n          align: 'center',\n          width: '160'\n        }, {\n          label: '方案号',\n          prop: 'planNo',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '方案描述',\n          prop: 'planDesc',\n          align: 'center',\n          width: '200'\n        }, {\n          label: '选择方式',\n          prop: 'choiceMethodCN',\n          align: 'center',\n          width: 'auto'\n        }, //type: 'dictSelect', dType: 'dt_srm_pdf', label: '选择方式', prop: 'choiceMethod', \n        {\n          label: '是否技术应答',\n          prop: 'technicalProposal',\n          align: 'center',\n          width: '150'\n        }, //wu\n        {\n          label: '技术应答截止时间',\n          prop: 'technicalBidDeadline',\n          align: 'center',\n          width: '150'\n        }, {\n          label: '报价截止时间',\n          prop: 'quotationDeadline',\n          align: 'center',\n          width: '150'\n        }, {\n          label: '技术开标时间',\n          prop: 'technicalBidOpeningTime',\n          align: 'center',\n          width: '150'\n        }, {\n          label: '商务开标时间',\n          prop: 'businessOpeningTime',\n          align: 'center',\n          width: '150'\n        }, {\n          label: '报价方式',\n          prop: 'quotationMethodCN',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '采购组织',\n          prop: 'orgName',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '编制单位',\n          prop: 'editOrgName',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '编制人',\n          prop: 'editorName',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '编制时间',\n          prop: 'createTime',\n          align: 'center',\n          width: '150'\n        }, {\n          label: '备注',\n          prop: 'remark',\n          align: 'center',\n          width: 'auto'\n        }],\n        sub: [{\n          label: '是否技术应答',\n          prop: 'technicalProposalState',\n          align: 'center',\n          width: '120'\n        }, //wu\n        {\n          label: '是否已报价',\n          prop: 'quotedProposalState',\n          align: 'center',\n          width: ''\n        }, //wu\n        {\n          label: '是否报价提交',\n          prop: 'quoteCommitState',\n          align: 'center',\n          width: ''\n        }, //wu\n        {\n          label: '轮次',\n          prop: 'quoteRounds',\n          align: 'center',\n          width: ''\n        }, //wu\n        {\n          label: '当前报价',\n          prop: 'totalPrice',\n          align: 'center',\n          width: '150'\n        }, {\n          label: '上轮报价',\n          prop: 'preTotalPrice',\n          align: 'center',\n          width: '150'\n        }, {\n          label: '物料编码',\n          prop: 'materielCode',\n          align: 'center',\n          width: '120'\n        }, {\n          label: '物料名称',\n          prop: 'materielName',\n          align: 'center',\n          width: '120'\n        }, {\n          label: '物料分类',\n          prop: 'materielClass',\n          align: 'center',\n          width: '200'\n        }, {\n          label: '特殊区分',\n          prop: 'specialDistinction',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '项目号',\n          prop: 'projectNo',\n          align: 'center',\n          width: 'auto'\n        }, {\n          label: '车型',\n          prop: 'carType',\n          align: 'center',\n          width: 'auto'\n        }, //wu\n        {\n          label: '基准年',\n          prop: 'baseYearQuantity',\n          align: 'center',\n          width: '120'\n        }, {\n          label: '第一年需求',\n          prop: 'firstYearQuantity',\n          align: 'center',\n          width: '120'\n        }, {\n          label: '第二年需求',\n          prop: 'secondYearQuantity',\n          align: 'center',\n          width: '120'\n        }, {\n          label: '第三年需求',\n          prop: 'thirdYearQuantity',\n          align: 'center',\n          width: '120'\n        }, {\n          label: '第四年需求',\n          prop: 'forthYearQuantity',\n          align: 'center',\n          width: '120'\n        }, {\n          label: '第五年需求',\n          prop: 'fifthYearQuantity',\n          align: 'center',\n          width: '120'\n        }]\n      },\n      dialogConfig: [{\n        title: '供应商信息',\n        isRequired: false,\n        unMutiple: true\n      }, {\n        title1: '总价报价',\n        title2: '一级报价',\n        title3: '明细报价'\n      }],\n      modalNo: 'EXTP-BAS-0001',\n      //导入模板编号,\n      orgCode: undefined,\n      planNo: undefined\n    };\n  },\n  created: function created() {},\n  computed: _objectSpread({}, mapState({\n    dt_srm_pdj: function dt_srm_pdj(state) {\n      return state.dict.dt_srm_pdj;\n    },\n    dt_srm_pdf: function dt_srm_pdf(state) {\n      return state.dict.dt_srm_pdf;\n    },\n    //选择方式\n    dt_srm_pdi: function dt_srm_pdi(state) {\n      return state.dict.dt_srm_pdi;\n    },\n    //报价方式\n    dt_srm_pdl: function dt_srm_pdl(state) {\n      return state.dict.dt_srm_pdl;\n    },\n    dt_srm_pdm: function dt_srm_pdm(state) {\n      return state.dict.dt_srm_pdm;\n    },\n    dt_cate_platformSeries: function dt_cate_platformSeries(state) {\n      return state.srmBisSelect.dt_cate_platformSeries;\n    },\n    //平台系列\n    dt_const: function dt_const(state) {\n      return state.srmBisSelect.dt_const;\n    } //平台系列\n\n  })),\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$store.dispatch(\"dict/getDicData\", [\"dt_srm_pdj\", \"dt_srm_pdf\", \"dt_srm_pdi\", \"dt_srm_pdl\", \"dt_srm_pdm\"]);\n    this.$store.dispatch(\"srmBisSelect/getBisData\", [\"dt_cate_platformSeries\", \"dt_const\"]);\n    this.setTableHeight(); //表格高度自适应\n\n    window.onresize = function () {\n      _this.setTableHeight();\n    };\n  },\n  methods: {\n    //表格高度计算\n    setTableHeight: function setTableHeight() {\n      this.theight = this.$myFun.getSingleTbHeight() - 185;\n    },\n    refresh: function refresh() {\n      this.getList();\n    },\n    //获取表格数据\n    getList: function getList() {\n      var _this2 = this;\n\n      if (this.listQuery.orgCode) {\n        api.queryRFQRecords(this.listQuery).then(function (res) {\n          var options = [_this2.dt_srm_pdj, _this2.dt_srm_pdf, _this2.dt_srm_pdi];\n          res.data = _this2.$myFun.codeToName(res.data, options, ['state', 'choiceMethod', 'quotationMethod']);\n          _this2.dataList = res.data.list;\n          _this2.total = res.data.pages.count;\n\n          if (_this2.dataList.length > 0) {\n            _this2.setFirstLine();\n          }\n        });\n      } else {\n        this.$message({\n          type: 'warning',\n          message: '查询时组织编码不能为空'\n        });\n      }\n    },\n    //单条数据获取\n    getRow: function getRow() {\n      var _this3 = this;\n\n      console.log(this.currentSelectedRow);\n      api.queryRFQItems(this.currentSelectedRow.rfqNo).then(function (res) {\n        _this3.itemList = res.data;\n        _this3.totalItem = res.data.length;\n      });\n    },\n    //从表详情获取\n    getItem: function getItem() {// this.itemQuery.proposalNo = this.currentSelectedRow.proposalNo\n      // api.queryItem(this.itemQuery).then(res => {\n      //     this.itemList = res.data.list\n      //     this.totalItem = res.data.pages.count\n      // })\n    },\n    //表格查询\n    handleQuery: function handleQuery() {\n      this.listQuery.currentPage = 1;\n      this.getList();\n    },\n    //表格显示条数变化\n    handleSizeChange: function handleSizeChange(val) {\n      this.listQuery.pageSize = val;\n      this.getList();\n    },\n    //表格当前页变化\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.listQuery.currentPage = val;\n      this.getList();\n    },\n    handleDownload: function handleDownload() {\n      console.log('邀标资料下载');\n    },\n    handlePlanSubmit: function handlePlanSubmit() {\n      var _this4 = this;\n\n      console.log('技术方案提交');\n      var hdata = {\n        method: \"SUBMIT_TECHNICAL_PROPOSAL\",\n        // replyTechnicalProposalDTO: {\n        //     materielCode: \"\",\n        //     rfqNo: this.selectedRows[0].rfqNo,\n        //     technicalProposalDTOs: [\n        //         {\n        //             attachment: \"技术\",\n        //             audit: false,\n        //             auditor: 1001,\n        //             auditorName: \"许嘉璐\",\n        //             description: \"技术\",\n        //             download: false,\n        //             rfqName: \"技术\",\n        //             rfqType: 1001,\n        //             submit: false\n        //         }\n        //     ]\n        // },\n        rfqNo: this.selectedRows[0].rfqNo\n      };\n      api.handleRecords(hdata).then(function () {\n        _this4.$message({\n          type: 'success',\n          message: '技术方案提交成功'\n        });\n\n        _this4.getList();\n      });\n    },\n    handleQuoteSubmit: function handleQuoteSubmit() {\n      var _this5 = this;\n\n      var hdata = {\n        method: \"SUBMIT_QUOTED_PROPOSAL\",\n        // replyTechnicalProposalDTO: {\n        //     materielCode: \"\",\n        //     rfqNo: this.selectedRows[0].rfqNo,\n        //     technicalProposalDTOs: [\n        //         {\n        //             attachment: \"技术\",\n        //             audit: false,\n        //             auditor: 1001,\n        //             auditorName: \"许嘉璐\",\n        //             description: \"技术\",\n        //             download: false,\n        //             rfqName: \"技术\",\n        //             rfqType: 1001,\n        //             submit: false\n        //         }\n        //     ]\n        // },\n        rfqNo: this.selectedRows[0].rfqNo\n      };\n      api.handleRecords(hdata).then(function () {\n        _this5.$message({\n          type: 'success',\n          message: '报价提交成功'\n        });\n\n        _this5.getList();\n      });\n    },\n    handleRfq: function handleRfq() {\n      var _this6 = this;\n\n      console.log(this.selectedRows, 'hgf');\n\n      if (this.selectedSubRows && this.selectedSubRows.length > 0) {\n        this.$nextTick(function () {\n          _this6.$refs.technicalResponse.dialogVisible = true;\n\n          _this6.$refs.technicalResponse.getList(_this6.selectedRows[0]);\n        });\n      } else {\n        this.$message({\n          title: \"警告\",\n          message: \"请勾选记录\",\n          type: \"warning\"\n        });\n      }\n    },\n    confirmRfq: function confirmRfq(val) {\n      var _this7 = this;\n\n      var hdata = {\n        method: \"REPLY\",\n        replyTechnicalProposalDTO: {\n          materielCodeList: this.selectedSubRows.map(function (v) {\n            return v.materielCode;\n          }),\n          rfqNo: this.selectedRows[0].rfqNo,\n          technicalProposalDTOs: val\n        },\n        rfqNo: this.selectedRows[0].rfqNo\n      };\n      api.handleRecords(hdata).then(function () {\n        _this7.$message({\n          type: 'success',\n          message: '报价提交成功'\n        });\n\n        _this7.getList();\n      });\n    },\n    quoto: function quoto() {\n      var _this8 = this;\n\n      var quotationMethod = this.selectedRows[0].quotationMethod;\n      var fdata = {\n        rfqNo: this.selectedRows[0].rfqNo,\n        supplierCode: this.selectedRows[0].supplierCode,\n        supplierName: this.selectedRows[0].supplierName,\n        materielCode: this.selectedSubRows[0].materielCode,\n        materielName: this.selectedSubRows[0].materielName,\n        materielClass: this.selectedSubRows[0].materielClass,\n        materielClassName: this.selectedSubRows[0].materielClassName\n      };\n\n      switch (quotationMethod) {\n        case 'PDI0':\n          {\n            //总价\n            var params = {\n              method: 'TOTAL',\n              rfqNo: this.selectedRows[0].rfqNo,\n              materielCodes: [],\n              quoteRounds: this.selectedSubRows[0].quoteRounds\n            };\n            this.selectedSubRows.forEach(function (val, index) {\n              params.materielCodes[index] = val.materielCode;\n            });\n            params.materielCodes = params.materielCodes.join(\",\");\n            console.log(this.selectedSubRows[0].quotedProposalState, 'pppp');\n\n            if (!this.selectedSubRows[0].quotedProposalState) {\n              this.$refs.refQuoteTotal.methodType = 'add';\n              this.$refs.refQuoteTotal.initForm(fdata, null, this.selectedSubRows);\n              this.$refs.refQuoteTotal.dialogVisible = true;\n            } else {\n              api.queryQuoteRow(params).then(function (res) {\n                _this8.$refs.refQuoteTotal.methodType = 'edit';\n\n                _this8.$refs.refQuoteTotal.initForm(fdata, res.data, _this8.selectedSubRows);\n\n                _this8.$refs.refQuoteTotal.dialogVisible = true;\n              });\n            }\n\n            break;\n          }\n\n        case 'PDI1':\n          {\n            //一级\n            var _params = {\n              method: 'FIRST',\n              rfqNo: this.selectedRows[0].rfqNo,\n              materielCodes: this.selectedSubRows[0].materielCode,\n              quoteRounds: this.selectedSubRows[0].quoteRounds\n            };\n\n            if (!this.selectedSubRows[0].quotedProposalState) {\n              this.$refs.refQuoteLevel1.methodType = 'add';\n              this.$refs.refQuoteLevel1.resetTemp();\n              this.$refs.refQuoteLevel1.initForm(fdata, null, 'add');\n              this.$refs.refQuoteLevel1.dialogVisible = true;\n            } else {\n              api.queryQuoteRow(_params).then(function (res) {\n                _this8.$refs.refQuoteLevel1.methodType = 'edit';\n\n                _this8.$refs.refQuoteLevel1.initForm(fdata, res.data, 'edit');\n\n                _this8.$refs.refQuoteLevel1.dialogVisible = true;\n              });\n            }\n\n            break;\n          }\n\n        case 'PDI2':\n          {\n            //明细\n            this.$refs.refQuote.orgCode = this.selectedRows[0].orgCode;\n            var _params2 = {\n              method: 'ITEM',\n              rfqNo: this.selectedRows[0].rfqNo,\n              materielCodes: this.selectedSubRows[0].materielCode,\n              quoteRounds: this.selectedSubRows[0].quoteRounds\n            };\n            this.$refs.refQuote.params = _params2;\n\n            if (!this.selectedSubRows[0].quotedProposalState) {\n              this.$refs.refQuote.methodType = 'add';\n              this.$refs.refQuote.initForm(fdata, null);\n              this.$refs.refQuote.dialogVisible = true;\n            } else {\n              api.queryQuoteRow(_params2).then(function (res) {\n                _this8.$refs.refQuote.methodType = 'edit';\n\n                _this8.$refs.refQuote.initForm(fdata, res.data);\n\n                _this8.$refs.refQuote.dialogVisible = true;\n              });\n            }\n\n            break;\n          }\n      }\n    },\n    handleQuote: function handleQuote() {\n      var _this9 = this;\n\n      if (this.selectedSubRows.length > 0 && this.selectedRows.length) {\n        if (this.selectedRows[0].quotationMethod !== \"PDI0\") {\n          if (this.selectedSubRows.length > 1) {\n            this.$message({\n              title: \"警告\",\n              message: \"请勾选一条记录\",\n              type: \"warning\"\n            });\n          } else {\n            this.quoto();\n          }\n        } else {\n          if (this.selectedSubRows.length > 1) {\n            var status = this.selectedSubRows.some(function (value) {\n              // debugger\n              return value !== _this9.selectedSubRows[0];\n            });\n\n            if (!status) {\n              this.$message({\n                title: \"警告\",\n                message: \"请选择轮次一样的数据进行批量操作\",\n                type: \"warning\"\n              });\n            }\n          }\n\n          this.quoto();\n        }\n      } else {\n        this.$message({\n          type: 'warning',\n          message: '请先选择一条数据'\n        });\n      }\n    },\n    handleSorDownload: function handleSorDownload() {\n      console.log('SOR下载');\n    },\n    handleFileImport: function handleFileImport() {\n      console.log('附件上传');\n    },\n    handleQuoteImport: function handleQuoteImport() {\n      console.log('报价导入');\n    },\n    handleQuoteView: function handleQuoteView() {\n      console.log('报价预览');\n    },\n    //操作按钮事件\n    oprateClick: function oprateClick(clickMethod) {\n      switch (clickMethod) {\n        case 'handleDownload':\n          {\n            this.handleDownload();\n            break;\n          }\n\n        case 'handlePlanSubmit':\n          {\n            this.handlePlanSubmit();\n            break;\n          }\n\n        case 'handleQuoteSubmit':\n          {\n            this.handleQuoteSubmit();\n            break;\n          }\n\n        case 'handleRfq':\n          {\n            this.handleRfq();\n            break;\n          }\n\n        case 'handleQuote':\n          {\n            this.handleQuote();\n            break;\n          }\n\n        case 'handleSorDownload':\n          {\n            this.handleSorDownload();\n            break;\n          }\n\n        case 'handleFileImport':\n          {\n            this.handleFileImport();\n            break;\n          }\n\n        case 'handleQuoteImport':\n          {\n            this.handleQuoteImport();\n            break;\n          }\n\n        case 'handleQuoteView':\n          {\n            this.handleQuoteView();\n            break;\n          }\n      }\n    },\n    selectChangeSub: function selectChangeSub(val) {\n      if (this.Single) {\n        if (val.length > 1) {\n          this.$refs.tbSub.clearSelection(); //清除其他行的选中\n\n          this.$refs.tbSub.toggleRowSelection(val[val.length - 1], \"selected\"); //单击行绑定点击事件\n        } else if (val.length === 1) {\n          this.selectedSubRows = val;\n          this.currentSelectedSubRow = val[val.length - 1];\n        } else if (val.length === 0) {\n          this.selectedSubRows = val;\n          this.currentSelectedSubRow = null;\n        }\n      } else {\n        this.selectedSubRows = val;\n        this.currentSelectedSubRow = val[val.length - 1];\n      }\n    },\n    // 表格选择框选中 注:参数为选中的所有行的数组\n    selectChange: function selectChange(val) {\n      if (this.isSingle) {\n        if (val.length > 1) {\n          this.$refs.tb.clearSelection(); //清除其他行的选中\n\n          this.$refs.tb.toggleRowSelection(val[val.length - 1], \"selected\"); //单击行绑定点击事件\n        } else if (val.length === 1) {\n          this.selectedRows = val;\n          this.currentSelectedRow = val[val.length - 1];\n          this.getRow();\n        } else if (val.length === 0) {\n          this.selectedRows = val;\n          this.currentSelectedRow = null; // this.itemList = []\n        }\n      } else {\n        this.selectedRows = val;\n        this.currentSelectedRow = val[val.length - 1];\n        this.getRow();\n      }\n    },\n    //加载时默认选中第一行\n    setFirstLine: function setFirstLine() {\n      var _this10 = this;\n\n      this.$nextTick(function () {\n        _this10.$refs.tb.toggleRowSelection(_this10.dataList[0], \"selected\");\n\n        _this10.$refs.tb.setCurrentRow(_this10.dataList[0]);\n      });\n    },\n    showGys: function showGys() {\n      this.$refs.refGys.dialogVisible = true;\n    },\n    //供应商确认\n    handleGysClick: function handleGysClick(gysRows) {\n      this.$set(this.listQuery, 'supplierCode', gysRows[0].supplierCode);\n      this.$set(this.listQuery, 'supplierName', gysRows[0].supplierName);\n    },\n    //默认选中采购\n    setCaigou: function setCaigou(options) {\n      if (options) {\n        if (options.length > 0) {\n          this.listQuery.orgCode = options[0].organizationCode;\n          this.getList();\n        }\n      }\n    }\n  }\n};",null]}