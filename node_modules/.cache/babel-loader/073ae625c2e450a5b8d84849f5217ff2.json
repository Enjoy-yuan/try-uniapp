{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/components/Select/knbomwlxz.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/components/Select/knbomwlxz.vue","mtime":1596610933168},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Pagination from '@/components/Pagination'; // 分页组件\n\nimport * as api from \"@/api/data-base/instorageProcess\";\nexport default {\n  components: {\n    Pagination: Pagination\n  },\n  props: ['unMutiple', 'bomType', 'orgCode'],\n  data: function data() {\n    return {\n      listAll: null,\n      listSelected: null,\n      listSub: null,\n      totalAll: 0,\n      totalSelected: 0,\n      activeName2: 'first',\n      tableKey: 0,\n      listQueryAll: {\n        page: true,\n        currentPage: 1,\n        pageSize: 10,\n        bomType: '',\n        orgCode: '',\n        materielCode: '',\n        materielName: ''\n      },\n      isEdit: true,\n      detailList: []\n    };\n  },\n  mounted: function mounted() {\n    //创建时加载备选项\n    this.getList1();\n  },\n  methods: {\n    handleFilter1: function handleFilter1() {\n      //查询备选项\n      this.getList1();\n    },\n    handleFilter2: function handleFilter2() {\n      //查询已选项\n      this.getList2();\n    },\n    getList1: function getList1() {\n      var _this = this;\n\n      //备选项查询\n      this.listQueryAll.orgCode = this.orgCode;\n      this.listQueryAll.bomType = this.bomType;\n      api.queryRecords(this.listQueryAll.orgCode, this.listQueryAll.bomType, this.listQueryAll).then(function (res) {\n        _this.listAll = res.data.list;\n        _this.totalAll = res.data.pages.count;\n      });\n    },\n    getList2: function getList2() {\n      //已选项查询\n      this.listSelected = this.selectRowData1;\n    },\n    getDetail: function getDetail(val) {\n      var _this2 = this;\n\n      if (val) {\n        api.queryRecordsDetail(val.versions, {}).then(function (res) {\n          res = res.data;\n          _this2.listSub = res;\n\n          if (_this2.unMutiple) {\n            _this2.$emit('clickRows', {\n              v1: val,\n              v2: _this2.listSub\n            });\n          } else {\n            _this2.$emit('clickRows', _this2.listSelected);\n          }\n        });\n      } else {\n        this.$emit('clickRows', []);\n      }\n    },\n    selectChange: function selectChange(val) {\n      if (this.unMutiple) {\n        this.selectOneRow(val);\n      } else {\n        this.selectRow1(val);\n      }\n    },\n    selectRow1: function selectRow1(val) {\n      //备选项选中行\n      this.selectRowData1 = val;\n      this.listSelected = this.selectRowData1;\n      this.getDetail(val[val.length - 1]); // this.$emit('clickRows' ,val,this.listSub);\n    },\n    selectOneRow: function selectOneRow(val) {\n      var arr = [];\n      arr.push(val[val.length - 1]);\n      this.selectRowData1 = arr;\n\n      if (arr[0]) {\n        this.getDetail(arr[0]);\n      }\n\n      if (val.length > 1) {\n        this.$refs.tbselect.clearSelection();\n        this.$refs.tbselect.toggleRowSelection(val[val.length - 1], 'selected');\n      }\n\n      this.listSelected = this.selectRowData1;\n    }\n  }\n};",null]}