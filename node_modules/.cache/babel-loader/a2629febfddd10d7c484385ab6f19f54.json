{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/supplierManagement/supplierAccess/comprehensiveEvaluation/dialog/dialogResult.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/supplierManagement/supplierAccess/comprehensiveEvaluation/dialog/dialogResult.vue","mtime":1596610933920},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// import { createRecords, updateRecords } from \"@/api/productionMaterial/hand_pull_material\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: 'dialogResult',\n  components: {},\n  props: ['unMutiple', 'title', 'curdialogStatus'],\n  data: function data() {\n    return {\n      isEdit: false,\n      formData: {\n        evaluationNo: null,\n        score: null,\n        grade: null,\n        recommendResult: null,\n        remark: null\n      },\n      tableData: [],\n      dialogVisible: false,\n      formConfig: [{\n        type: 'commonInput',\n        disabled: true,\n        label: '综合评价分数',\n        prop: 'score',\n        width: ''\n      }, {\n        type: 'srmBisSelect',\n        disabled: true,\n        dType: 'dt_cate_grade',\n        label: '综合等级',\n        prop: 'grade',\n        width: '',\n        key: 'code',\n        value: 'name'\n      }, {\n        type: 'dictSelect',\n        disabled: true,\n        dType: 'dt_srm_pan',\n        label: '推荐意见',\n        prop: 'recommendResult',\n        width: ''\n      }, {\n        type: 'textarea',\n        label: '备注',\n        prop: 'remark',\n        width: '800px',\n        rows: \"2\"\n      }],\n      tableConfig: [{\n        label: '评价单号',\n        prop: 'evaluationNo',\n        align: 'center',\n        width: 'auto'\n      }, {\n        label: '分项评价',\n        prop: 'evaluationItemCN',\n        align: 'center',\n        width: 'auto'\n      }, {\n        label: '权重(%)',\n        prop: 'weight',\n        align: 'center',\n        width: 'auto'\n      }, {\n        label: '评价分数',\n        prop: 'score',\n        align: 'center',\n        width: 'auto'\n      }, {\n        label: '评价等级',\n        prop: 'gradeCN',\n        align: 'center',\n        width: 'auto'\n      }, {\n        label: '推荐意见',\n        prop: 'recommendResult',\n        align: 'center',\n        width: 'auto'\n      }, {\n        label: '评价结论',\n        prop: 'auditResultCN',\n        align: 'center',\n        width: 'auto'\n      }, {\n        label: '状态',\n        prop: 'stateCN',\n        align: 'center',\n        width: 'auto'\n      }, {\n        label: '评价人',\n        prop: 'evaluationUserName',\n        align: 'center',\n        width: 'auto'\n      }, {\n        label: '考察人',\n        prop: 'investigateUser',\n        align: 'center',\n        width: 'auto'\n      }]\n    };\n  },\n  computed: _objectSpread({}, mapState({\n    dt_srm_pb4: function dt_srm_pb4(state) {\n      return state.dict.dt_srm_pb4;\n    },\n    //考察项\n    dt_srm_pam: function dt_srm_pam(state) {\n      return state.dict.dt_srm_pam;\n    },\n    //评价等级\n    dt_srm_pal: function dt_srm_pal(state) {\n      return state.dict.dt_srm_pal;\n    },\n    //评价状态\n    dt_cate_grade: function dt_cate_grade(state) {\n      return state.srmBisSelect.dt_cate_grade;\n    },\n    //综合评价等级\n    dt_srm_pan: function dt_srm_pan(state) {\n      return state.dict.dt_srm_pan;\n    } //推荐意见\n\n  })),\n  mounted: function mounted() {\n    this.$store.dispatch(\"dict/getDicData\", [\"dt_srm_pb4\", \"dt_srm_pam\", \"dt_srm_pal\", \"dt_srm_pan\"]);\n    this.$store.dispatch(\"srmBisSelect/getBisData\", [\"dt_cate_grade\"]);\n  },\n  methods: {\n    handleConfirm: function handleConfirm() {\n      var _this = this;\n\n      this.$refs.refForm.validate(function (valid) {\n        if (valid) {\n          _this.$confirm('确认保存吗?', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(function () {\n            var cdata = {\n              method: \"UPDATE\",\n              remark: _this.formData.remark\n            };\n\n            _this.$emit('handleDialogClick', _this.formData.evaluationNo, cdata);\n\n            _this.dialogVisible = false;\n          }).catch(function () {\n            _this.$message({\n              type: 'info',\n              message: '已取消'\n            });\n          });\n        }\n      });\n    },\n    //表格操作删除\n    handleView: function handleView(row) {\n      this.$emit('handleView', row);\n    },\n    initForm: function initForm(row) {\n      for (var key in this.formData) {\n        for (var par in row) {\n          if (key === par) {\n            this.$set(this.formData, key, row[key]);\n          }\n        }\n      }\n\n      var options = [this.dt_srm_pb4];\n      row.evaluationItemDTOs = this.$myFun.codeToName(row.evaluationItemDTOs, options, ['evaluationItem']);\n      this.tableData = row.evaluationItemDTOs;\n      this.calculateScore();\n    },\n    //计算得分\n    calculateScore: function calculateScore() {\n      var score = 0;\n      this.tableData.forEach(function (item) {\n        if (!item.score) {\n          item.score = 0;\n        }\n\n        if (!item.weight) {\n          item.weight = 0;\n        }\n\n        score += parseInt(item.score) * parseInt(item.weight) / 100;\n      });\n      this.$set(this.formData, 'score', score);\n\n      for (var i = 0; i < this.dt_cate_grade.data.length; i++) {\n        if (parseInt(this.dt_cate_grade.data[i].value1) < parseInt(score) && parseInt(score) <= parseInt(this.dt_cate_grade.data[i].value2)) {\n          this.$set(this.formData, 'grade', this.dt_cate_grade.data[i].code);\n          this.$set(this.formData, 'recommendResult', this.dt_cate_grade.data[i].weight);\n          break;\n        }\n      }\n    }\n  }\n};",null]}