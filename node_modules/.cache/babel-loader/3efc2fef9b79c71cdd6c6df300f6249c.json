{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/data-base/materielTransferType/dialog/dialogAddMain.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/data-base/materielTransferType/dialog/dialogAddMain.vue","mtime":1596610933332},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/yuan/Documents/\\u5927\\u5510\\u5E7F\\u7535/dt-web/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { createRecords, updateRules, queryRecords } from \"@/api/data-base/material_transfer_type\";\nimport { mapState } from 'vuex';\nexport default {\n  name: 'addMain',\n  data: function data() {\n    return {\n      booleanValue: [[{\n        value: 1,\n        label: '是'\n      }, {\n        value: 0,\n        label: '否'\n      }], [{\n        value: 1,\n        label: '+'\n      }, {\n        value: 0,\n        label: '-'\n      }]],\n      obList: [],\n      //移动类型列表\n      referDataSourceList: [],\n      //参照数据来源\n      AddMainlist: {\n        wareRuleCode: '',\n        wareRuleName: '',\n        statsClassify: '',\n        screenGroupNum: '',\n        isProdBatch: '',\n        isQcNotice: '',\n        refSources: '',\n        isSuperIndicaChk: '',\n        refUpdate: '',\n        isNegativeStockChk: '',\n        fetchStockStatArr: [],\n        fetchStockStat: '',\n        fetchStockTypeArr: [],\n        fetchStockType: '',\n        storeStockStat: '',\n        storeStockType: '',\n        isAccount: '',\n        accountField: '',\n        accountDirection: '',\n        bizTypeFlag: '',\n        isTrigProdInd: '',\n        isTrigAutoProof: '',\n        reversalBizType: '',\n        completedLink: '',\n        stockTypeValueMode: '',\n        wareLocationMode: '',\n        areaType: '',\n        isSingle: '',\n        isIntegration: '',\n        qcReceive: '',\n        unCheckReceive: '',\n        freeReceive: '',\n        interfaceNumber: '',\n        isReversal: '',\n        exoSystemBizType: ''\n      },\n      dialogStatus: 0,\n      dialogFormVisible: false,\n      rules: {\n        wareRuleCode: [{\n          required: true,\n          message: this.$t('validate.required'),\n          trigger: 'blur'\n        }],\n        wareRuleName: [{\n          required: true,\n          message: this.$t('validate.required'),\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created: function created() {\n    this.referDataSourceList = [];\n  },\n  computed: _objectSpread({}, mapState({\n    dt_statistic_type: function dt_statistic_type(state) {\n      return state.dict.dt_statistic_type;\n    },\n    dt_referdata_resource: function dt_referdata_resource(state) {\n      return state.dict.dt_referdata_resource;\n    },\n    dt_stock_type: function dt_stock_type(state) {\n      return state.dict.dt_stock_type;\n    },\n    dt_stock_status: function dt_stock_status(state) {\n      return state.dict.dt_stock_status;\n    },\n    dt_businesstype_identity: function dt_businesstype_identity(state) {\n      return state.dict.dt_businesstype_identity;\n    },\n    dt_account_field: function dt_account_field(state) {\n      return state.dict.dt_account_field;\n    },\n    dt_stockType_valueMode: function dt_stockType_valueMode(state) {\n      return state.dict.dt_stockType_valueMode;\n    },\n    dt_location_match: function dt_location_match(state) {\n      return state.dict.dt_location_match;\n    },\n    dt_whpartition_type: function dt_whpartition_type(state) {\n      return state.dict.dt_whpartition_type;\n    }\n  })),\n  mounted: function mounted() {\n    this.$store.dispatch('dict/getDicData', ['dt_statistic_type', 'dt_referdata_resource', 'dt_stock_type', 'dt_stock_status', 'dt_businesstype_identity', 'dt_account_field', 'dt_stockType_valueMode', 'dt_location_match', 'dt_whpartition_type']);\n  },\n  methods: {\n    forceUpdateSel: function forceUpdateSel() {\n      this.$forceUpdate();\n    },\n    getAttrRule: function getAttrRule() {\n      var _this = this;\n\n      queryRecords().then(function (res) {\n        _this.obList = res.data;\n      });\n    },\n    addMainConfirm: function addMainConfirm() {\n      var _this2 = this;\n\n      this.$refs.AddMainlist.validate(function (valid) {\n        if (valid) {\n          _this2.$confirm('确认保存吗?', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(function () {\n            if (_this2.AddMainlist.fetchStockStatArr.length) {\n              _this2.AddMainlist.fetchStockStat = _this2.AddMainlist.fetchStockStatArr.join(',');\n            } else {\n              _this2.AddMainlist.fetchStockStat = '';\n            }\n\n            if (_this2.AddMainlist.fetchStockTypeArr.length) {\n              _this2.AddMainlist.fetchStockType = _this2.AddMainlist.fetchStockTypeArr.join(',');\n            } else {\n              _this2.AddMainlist.fetchStockType = '';\n            }\n\n            var conData = Object.assign({}, _this2.AddMainlist);\n            delete conData.fetchStockStatArr;\n            delete conData.fetchStockTypeArr;\n            createRecords(conData).then(function () {\n              _this2.$message({\n                type: 'success',\n                message: '保存成功'\n              });\n\n              _this2.$emit('refreshTable');\n\n              _this2.dialogFormVisible = false;\n            });\n          }).catch(function () {\n            _this2.$message({\n              type: 'info',\n              message: '已取消'\n            });\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    updateMainConfirm: function updateMainConfirm() {\n      var _this3 = this;\n\n      this.$refs.AddMainlist.validate(function (valid) {\n        if (valid) {\n          _this3.$confirm('确认保存吗?', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(function () {\n            if (_this3.AddMainlist.fetchStockStatArr.length) {\n              _this3.AddMainlist.fetchStockStat = _this3.AddMainlist.fetchStockStatArr.join(',');\n            } else {\n              _this3.AddMainlist.fetchStockStat = '';\n            }\n\n            if (_this3.AddMainlist.fetchStockTypeArr.length) {\n              _this3.AddMainlist.fetchStockType = _this3.AddMainlist.fetchStockTypeArr.join(',');\n            } else {\n              _this3.AddMainlist.fetchStockType = '';\n            }\n\n            var conData = Object.assign({}, _this3.AddMainlist);\n            delete conData.fetchStockStatArr;\n            delete conData.fetchStockTypeArr;\n            updateRules(_this3.AddMainlist.wareRuleCode, _this3.AddMainlist).then(function () {\n              _this3.$message({\n                type: 'success',\n                message: '保存成功'\n              });\n\n              _this3.$emit('refreshTable');\n\n              _this3.dialogFormVisible = false;\n            });\n          }).catch(function () {\n            _this3.$message({\n              type: 'info',\n              message: '已取消'\n            });\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm: function resetForm() {\n      var _this4 = this;\n\n      setTimeout(function () {\n        console.log('11111', _this4.AddMainlist);\n\n        _this4.$refs.AddMainlist.resetFields();\n      }, 0);\n    }\n  }\n};",null]}