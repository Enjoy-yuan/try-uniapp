{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/procurementDemand/newproductDemand/newproductWlwh/dialog/wlxz.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/procurementDemand/newproductDemand/newproductWlwh/dialog/wlxz.vue","mtime":1596610933865},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as api from \"@/api/project/srm/materialClassify/materialMaintain\"; // import { mapState } from 'vuex'\n\nimport { DICT_CODE } from '@/utils/constant';\nimport caiGou from '@/components/Select/xtpt/caigou'; //下拉组件\n\nimport Pagination from '@/components/Pagination';\nexport default {\n  name: \"wlxz\",\n  components: {\n    caiGou: caiGou,\n    Pagination: Pagination\n  },\n  props: ['unMutiple'],\n  data: function data() {\n    return {\n      dialogCodeVisible: false,\n      list: null,\n      listSelected: [],\n      total: 0,\n      parentsRows: null,\n      treeData: [],\n      defaultProps: {\n        children: \"children\",\n        label: \"className\"\n      },\n      listQuery: {\n        currentPage: 1,\n        pageSize: 10,\n        orgCode: 'dtcg0001'\n      },\n      contentStyleObj: {\n        height: \"\"\n      },\n      selectCode: [],\n      tableKey: 0,\n      activeName2: 'first',\n      DICT_CODE: DICT_CODE,\n      parentId: null\n    };\n  },\n  computed: {// ...mapState({\n    //     dt_materiel_classify: state => state.dict.dt_materiel_classify,\n    // })\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    // this.$store.dispatch('dict/getDicData', ['dt_materiel_classify'])\n    //表格高度自适应\n    window.onresize = function () {\n      _this.setTreeHeight();\n    };\n\n    this.setTreeHeight();\n    this.getTree();\n    this.getList();\n  },\n  methods: {\n    handleNodeClick: function handleNodeClick(data) {\n      //点击树查询\n      this.parentId = data.rowId;\n      this.treeGetList(data.classCode);\n    },\n    treeGetList: function treeGetList(rowId) {\n      var _this2 = this;\n\n      //点击树查询\n      this.listQuery.classCode = rowId;\n      api.queryRecords(this.listQuery).then(function (res) {\n        _this2.list = res.data.list;\n      });\n    },\n    //树高度设置\n    setTreeHeight: function setTreeHeight() {\n      this.contentStyleObj.height = this.$myFun.getSingleTbHeight();\n    },\n    getTree: function getTree() {\n      var _this3 = this;\n\n      var a = {\n        orgCode: this.listQuery.orgCode\n      };\n      api.queryRecords(a).then(function (res) {\n        _this3.treeData = _this3.$myFun.addRoot(res.data, 'rowId', 'parentRowId');\n      });\n    },\n    getList: function getList() {\n      var _this4 = this;\n\n      api.queryRecords(this.listQuery).then(function (res) {\n        _this4.list = res.data.list;\n      });\n    },\n    handleQuery: function handleQuery() {\n      this.listQuery.currentPage = 1;\n      this.getTree();\n      this.getList();\n    },\n    //检查是否取消勾选\n    checkUnsel: function checkUnsel(val, row) {\n      var isuncheck = true;\n      val.forEach(function (item) {\n        if (item.materielCode === row.materielCode) {\n          isuncheck = false;\n        }\n      });\n      return isuncheck;\n    },\n    confirm: function confirm() {\n      if (this.listSelected && this.listSelected.length > 0) {\n        this.$emit('listSelected', this.listSelected);\n      } else {\n        this.$message({\n          title: \"警告\",\n          message: \"请勾选信息\",\n          type: \"warning\"\n        });\n      }\n    },\n    selectMain: function selectMain(val, row) {\n      var _this5 = this;\n\n      if (this.unMutiple) {\n        var isuncheck = this.checkUnsel(val, row);\n\n        if (!isuncheck) {\n          var arr = [];\n          arr.push(val[val.length - 1]);\n          this.listSelected = arr;\n\n          if (val.length > 1) {\n            this.$refs.tbselect.clearSelection();\n            this.$refs.tbselect.toggleRowSelection(val[val.length - 1], 'selected');\n          }\n        } else {\n          this.listSelected = [];\n        }\n      } else {\n        var _isuncheck = this.checkUnsel(val, row);\n\n        if (!_isuncheck) {\n          if (this.listSelected) {\n            val.forEach(function (items, indexv) {\n              var isSelected = false;\n\n              _this5.listSelected.forEach(function (item) {\n                if (item.materielCode === items.materielCode) {\n                  isSelected = true;\n                }\n              });\n\n              if (!isSelected) {\n                _this5.listSelected.push(val[indexv]);\n              }\n            });\n          } else {\n            this.listSelected = val;\n          }\n        } else {\n          this.listSelected = this.listSelected.filter(function (item) {\n            return item.materielCode !== row.materielCode;\n          });\n        }\n      }\n    }\n  }\n};",null]}