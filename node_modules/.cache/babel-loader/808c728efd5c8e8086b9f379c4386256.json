{"remainingRequest":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/babel-loader/lib/index.js!/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuan/Documents/大唐广电/cf_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/cf_web/src/views/data-base/storageMaterialClassification/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/cf_web/src/views/data-base/storageMaterialClassification/index.vue","mtime":1600927611467},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as api1 from \"@/api/data-base/warehouse\";\nimport * as api from \"@/api/data-base/warehouse-distribute\";\nimport Pagination from \"@/components/Pagination\";\nimport { DT_ORG_TYPE } from \"@/utils/constant\";\nimport materielTable from \"./materielTable\";\nimport personSelect from \"@/components/Select/personSelect\"; //物料信息模块\n\nimport ckbm from \"./ckbm\";\nexport default {\n  name: \"storage_material_classification\",\n  components: {\n    Pagination: Pagination,\n    materielTable: materielTable,\n    personSelect: personSelect,\n    ckbm: ckbm\n  },\n  data: function data() {\n    return {\n      list: null,\n      list1: null,\n      tableKey: [0, 1],\n      //表格索引，虚拟dom渲染表格时使用\n      theight: 0,\n      stheight: 0,\n      //右子表高度\n      total: 0,\n      total1: 0,\n      listQuery: {\n        currentPage: 1,\n        pageSize: 15,\n        orgCode: undefined,\n        warehouseCode: undefined\n      },\n      listQuery1: {\n        currentPage: 1,\n        pageSize: 15,\n        locationCode: undefined,\n        warehouseCode: undefined,\n        areaCode: undefined\n      },\n      parentsRows: null,\n      parentsRows2: null,\n      parentsRows3: null,\n      temp: {\n        warehouseCode: undefined,\n        warehouseName: undefined,\n        materielCode: undefined,\n        materielName: undefined,\n        locationCode: undefined,\n        locationName: undefined,\n        areaCode: undefined,\n        areaName: undefined,\n        stockEmp: undefined,\n        stockEmpName: undefined,\n        goodsReadyEmp: undefined,\n        goodsReadyEmpName: undefined,\n        materialputEmp: undefined,\n        materialputEmpName: undefined,\n        state: 1,\n        orgName: undefined,\n        orgCode: undefined\n      },\n      dtos: {\n        warehouseCode: undefined,\n        warehouseName: undefined,\n        materielCode: undefined,\n        materielName: undefined,\n        locationCode: undefined,\n        locationName: undefined,\n        areaCode: undefined,\n        areaName: undefined,\n        stockEmp: undefined,\n        stockEmpName: undefined,\n        goodsReadyEmp: undefined,\n        goodsReadyEmpName: undefined,\n        materialputEmp: undefined,\n        materialputEmpName: undefined,\n        state: 1,\n        orgName: undefined,\n        orgCode: undefined\n      },\n      dtos1: {\n        warehouseCode: undefined,\n        warehouseName: undefined,\n        materielCode: undefined,\n        materielName: undefined,\n        locationCode: undefined,\n        locationName: undefined,\n        areaCode: undefined,\n        areaName: undefined,\n        stockEmp: undefined,\n        stockEmpName: undefined,\n        goodsReadyEmp: undefined,\n        goodsReadyEmpName: undefined,\n        materialputEmp: undefined,\n        materialputEmpName: undefined,\n        state: 1,\n        orgName: undefined,\n        orgCode: undefined\n      },\n      dtoscssz: {\n        stockEmp: undefined,\n        stockEmpName: undefined,\n        goodsReadyEmp: undefined,\n        goodsReadyEmpName: undefined,\n        materialputEmp: undefined,\n        materialputEmpName: undefined,\n        rowIds: [],\n        warehouseCode: undefined\n      },\n      warehouseCode: undefined,\n      warehouseName: undefined,\n      areaCode: undefined,\n      materielCode: undefined,\n      materielName: undefined,\n      stockEmpName: undefined,\n      state: 1,\n      ckbmDialogFormVisible: false,\n      locationDialogVisible: false,\n      dialogFormVisible: false,\n      dialogFormVisible1: false,\n      dialogFormVisible2: false,\n      gysxzDialogFormVisible: false,\n      materielDialogFormVisible: false,\n      purchasingPersonnelDialogFormVisible: false,\n      dialogStatus: \"\",\n      DT_ORG_TYPE: DT_ORG_TYPE,\n      rules: {}\n    };\n  },\n  created: function created() {// this.getList()\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.setTableHeight(); //表格高度自适应\n\n    window.onresize = function () {\n      _this.setTableHeight();\n    };\n  },\n  methods: {\n    getList: function getList() {\n      var _this2 = this;\n\n      api1.queryLocation(this.listQuery.warehouseCode, this.listQuery).then(function (res) {\n        _this2.list = res.data.list;\n        _this2.total = res.data.pages.count;\n      });\n    },\n    //表格高度计算\n    setTableHeight: function setTableHeight() {\n      this.theight = this.$myFun.getSingleTbHeight() + 52;\n      this.stheight = this.theight;\n    },\n    getList1: function getList1() {\n      var _this3 = this;\n\n      this.listQuery1.rule = 'Classified';\n      api.queryRecords(this.listQuery1).then(function (res) {\n        _this3.list1 = res.data.list;\n        _this3.total1 = res.data.pages.count;\n      });\n    },\n    selectRow: function selectRow(val) {\n      //表一复选框选中方法\n      this.selectlistRow = val[val.length - 1];\n      this.getList1();\n    },\n    selectRow1: function selectRow1(val) {\n      //表一单击行选中方法\n      this.selectlistRow1 = val;\n      this.listQuery1.warehouseCode = this.selectlistRow1.warehouseCode;\n      this.listQuery1.areaCode = this.selectlistRow1.areaCode;\n      this.getList1();\n    },\n    selectRow2: function selectRow2(val) {\n      //表二复选框选中方法\n      this.selectlistRow2 = val[val.length - 1];\n\n      if (val.length > 1) {\n        this.$refs.mx.clearSelection();\n        this.$refs.mx.toggleRowSelection(val.pop());\n      }\n    },\n    handleClickckbm: function handleClickckbm() {\n      //打开仓库弹窗\n      this.ckbmDialogFormVisible = true;\n    },\n    handleDblclickckbm: function handleDblclickckbm(row) {\n      //仓库弹窗父子传值\n      this.parentsRows = row;\n    },\n    selectTypeRow: function selectTypeRow(row) {\n      //物料信息选中行\n      this.parentsRows2 = row;\n    },\n    handleCreatewl: function handleCreatewl() {\n      //新增物料弹窗\n      if (this.selectlistRow1) {\n        this.dialogStatus = \"update2\";\n        this.gysxzDialogFormVisible = true;\n      } else {\n        this.$message({\n          title: \"警告\",\n          message: \"请选择一条信息\",\n          type: \"warning\"\n        });\n      }\n    },\n    update2: function update2() {\n      var _this4 = this;\n\n      //新增物料确认按钮\n      this.dtos = [];\n      this.parentsRows2.forEach(function (item, index) {\n        var obj = {\n          areaCode: _this4.selectlistRow1.areaCode,\n          locationCode: _this4.selectlistRow1.locationCode,\n          warehouseCode: _this4.selectlistRow1.warehouseCode,\n          orgCode: _this4.parentsRows.orgCode,\n          orgName: _this4.parentsRows.orgName,\n          locationMaterielRule: 'Classified'\n        };\n\n        _this4.dtos.push(obj);\n\n        _this4.dtos[index].materielCode = item.dictItemKey;\n        _this4.dtos[index].materielName = item.dictItemValue;\n      });\n      api.addRecord1(this.dtos).then(function () {\n        _this4.getList1();\n\n        _this4.gysxzDialogFormVisible = false;\n\n        _this4.$notify({\n          title: \"成功\",\n          message: \"新增成功\",\n          type: \"success\",\n          duration: 2000\n        });\n      });\n    },\n    update3: function update3() {\n      //新增物料编码弹窗确认按钮\n      if (this.parentsRows2 && this.parentsRows2.length == 1) {\n        this.temp.materielCode = this.parentsRows2[0].dictItemKey;\n        this.temp.materielName = this.parentsRows2[0].dictItemValue;\n        this.gysxzDialogFormVisible = false;\n      } else {\n        this.$message({\n          title: \"警告\",\n          message: \"请选择一条信息\",\n          type: \"warning\"\n        });\n      }\n    },\n    update4: function update4() {\n      //保管员中弹窗确认按钮\n      if (this.parentsRows3) {\n        this.temp.stockEmpName = this.parentsRows3[0].employeeName;\n        this.purchasingPersonnelDialogFormVisible = false;\n      } else {\n        this.$message({\n          title: \"警告\",\n          message: \"请选择一条信息\",\n          type: \"warning\"\n        });\n      }\n    },\n    handleSet: function handleSet() {\n      //参数设置弹窗\n      if (this.selectlistRow2) {\n        this.dialogStatus = \"createcssz\";\n        this.dialogFormVisible1 = true;\n        this.temp.stockEmpName = this.selectlistRow2.stockEmpName;\n      } else {\n        this.$message({\n          title: \"警告\",\n          message: \"请选择信息\",\n          type: \"warning\"\n        });\n      }\n    },\n    createcssz: function createcssz() {\n      var _this5 = this;\n\n      //参数设置确认\n      var rowIdsArry = [];\n      rowIdsArry.push(this.selectlistRow2.rowId);\n      this.dtoscssz.rowIds = rowIdsArry;\n      this.dtoscssz.stockEmp = this.temp.stockEmp;\n      this.dtoscssz.stockEmpName = this.temp.stockEmpName;\n      api.updateRecordcssz(this.dtoscssz).then(function () {\n        _this5.getList1();\n\n        _this5.dialogFormVisible1 = false;\n\n        _this5.$notify({\n          title: \"成功\",\n          message: \"编辑成功\",\n          type: \"success\",\n          duration: 2000\n        });\n      });\n    },\n    handleDelete: function handleDelete() {\n      var _this6 = this;\n\n      //删除方法\n      if (this.selectlistRow2) {\n        this.$confirm(this.$t('message.isDeleteContinue'), this.$t('message.prompt'), {\n          confirmButtonText: this.$t('message.yes'),\n          cancelButtonText: this.$t('message.no'),\n          type: 'warning'\n        }).then(function () {\n          api.deleteRecord(_this6.selectlistRow2.rowId).then(function () {\n            _this6.getList1();\n\n            _this6.$notify({\n              title: \"成功\",\n              message: \"删除成功\",\n              type: \"success\",\n              duration: 2000\n            });\n          });\n        });\n      } else {\n        this.$message({\n          title: \"警告\",\n          message: \"请选择一条信息\",\n          type: \"warning\"\n        });\n      }\n    },\n    handleCreate: function handleCreate() {\n      //新增方法\n      this.resetTemp();\n\n      if (this.selectlistRow1) {\n        this.dialogStatus = \"create\";\n        this.temp.warehouseCode = this.selectlistRow1.warehouseCode;\n        this.temp.locationCode = this.selectlistRow1.locationCode;\n        this.temp.areaCode = this.selectlistRow1.areaCode;\n        this.temp.warehouseName = this.parentsRows.warehouseName;\n        this.temp.locationName = this.selectlistRow1.locationName;\n        this.temp.areaName = this.selectlistRow1.areaName;\n        this.dialogFormVisible = true;\n      } else {\n        this.$message({\n          title: \"警告\",\n          message: \"请选择一条信息\",\n          type: \"warning\"\n        });\n      }\n    },\n    handleUpdate: function handleUpdate() {\n      //编辑方法\n      if (this.selectlistRow2) {\n        this.dialogStatus = \"update\";\n        this.temp.warehouseCode = this.selectlistRow1.warehouseCode;\n        this.temp.warehouseName = this.parentsRows.warehouseName;\n        this.temp.locationCode = this.selectlistRow1.locationCode;\n        this.temp.locationName = this.selectlistRow1.locationName;\n        this.temp.areaCode = this.selectlistRow1.areaCode;\n        this.temp.areaName = this.selectlistRow1.areaName;\n        this.temp.materielCode = this.selectlistRow2.materielCode;\n        this.temp.materielName = this.selectlistRow2.materielName;\n        this.temp.stockEmp = this.selectlistRow2.stockEmp;\n        this.temp.stockEmpName = this.selectlistRow2.stockEmpName;\n        this.temp.goodsReadyEmpName = this.selectlistRow2.goodsReadyEmpName;\n        this.temp.materialputEmpName = this.selectlistRow2.materialputEmpName;\n        this.temp.goodsReadyEmp = this.selectlistRow2.goodsReadyEmp;\n        this.temp.materialputEmpName = this.selectlistRow2.materialputEmpName;\n        this.dialogFormVisible = true;\n      } else {\n        this.$message({\n          title: \"警告\",\n          message: \"请选择一条信息\",\n          type: \"warning\"\n        });\n      }\n    },\n    handleLead: function handleLead() {},\n    handlegPersonnel: function handlegPersonnel() {\n      //业务人员\n      this.purchasingPersonnelDialogFormVisible = true;\n    },\n    purchasingPersonnels: function purchasingPersonnels(row) {\n      //保管员父子传值\n      this.parentsRows3 = row;\n    },\n    handleClickMateriel: function handleClickMateriel() {\n      //物料分类编码弹窗\n      this.gysxzDialogFormVisible = true;\n    },\n    create: function create() {\n      var _this7 = this;\n\n      this.dtos.warehouseCode = this.temp.warehouseCode;\n      this.dtos.warehouseName = this.temp.warehouseName;\n      this.dtos.materielCode = this.temp.materielCode;\n      this.dtos.materielName = this.temp.materielName;\n      this.dtos.locationCode = this.temp.locationCode;\n      this.dtos.locationName = this.temp.locationName;\n      this.dtos.goodsReadyEmp = this.temp.goodsReadyEmp;\n      this.dtos.goodsReadyEmpName = this.temp.goodsReadyEmpName;\n      this.dtos.materialputEmp = this.temp.materialputEmp;\n      this.dtos.materialputEmpName = this.temp.materialputEmpName;\n      this.dtos.locationMaterielRule = \"Classified\";\n      this.dtos.areaCode = this.temp.areaCode;\n      this.dtos.areaName = this.temp.areaName;\n      this.dtos.stockEmp = this.temp.stockEmp;\n      this.dtos.stockEmpName = this.temp.stockEmpName;\n      this.dtos.state = this.temp.state;\n      this.dtos.orgName = this.parentsRows.orgCode;\n      this.dtos.orgCode = this.parentsRows.orgName;\n      api.addRecord(this.dtos).then(function () {\n        _this7.getList1();\n\n        _this7.dialogFormVisible = false;\n\n        _this7.$notify({\n          title: \"成功\",\n          message: \"新增成功\",\n          type: \"success\",\n          duration: 2000\n        });\n      });\n    },\n    update: function update() {\n      var _this8 = this;\n\n      //编辑方法\n      this.dtos1.warehouseCode = this.temp.warehouseCode;\n      this.dtos1.warehouseName = this.temp.warehouseName;\n      this.dtos1.materielCode = this.temp.materielCode;\n      this.dtos1.materielName = this.temp.materielName;\n      this.dtos1.locationCode = this.temp.locationCode;\n      this.dtos1.locationName = this.temp.locationName;\n      this.dtos1.areaCode = this.temp.areaCode;\n      this.dtos1.areaName = this.temp.areaName;\n      this.dtos1.stockEmp = this.selectlistRow2.stockEmp;\n      this.dtos1.stockEmpName = this.temp.stockEmpName;\n      this.dtos1.goodsReadyEmp = this.selectlistRow2.goodsReadyEmp;\n      this.dtos1.goodsReadyEmpName = this.temp.goodsReadyEmpName;\n      this.dtos1.materialputEmp = this.selectlistRow2.materialputEmp;\n      this.dtos1.materialputEmpName = this.temp.materialputEmpName;\n      this.dtos1.state = this.temp.state;\n      this.dtos1.orgCode = this.selectlistRow2.orgCode;\n      this.dtos1.orgName = this.selectlistRow2.orgName;\n      api.updateRecord(this.selectlistRow2.rowId, this.dtos1).then(function () {\n        _this8.getList1();\n\n        _this8.dialogFormVisible = false;\n\n        _this8.$notify({\n          title: \"成功\",\n          message: \"编辑成功\",\n          type: \"success\",\n          duration: 2000\n        });\n      });\n    },\n    update1: function update1() {\n      if (this.parentsRows) {\n        this.listQuery.warehouseCode = this.parentsRows.warehouseCode;\n        this.ckbmDialogFormVisible = false;\n      } else {\n        this.$message({\n          title: \"警告\",\n          message: \"请选择一条信息\",\n          type: \"warning\"\n        });\n      }\n    },\n    handleQuery: function handleQuery() {\n      this.listQuery.currentPage = 1;\n      this.getList();\n    },\n    handleClose: function handleClose() {\n      this.resetTemp();\n      this.$refs.temp.resetFields();\n    },\n    resetTemp: function resetTemp() {\n      this.temp = {\n        warehouseCode: undefined,\n        warehouseName: undefined,\n        materielCode: undefined,\n        materielName: undefined,\n        locationCode: undefined,\n        locationName: undefined,\n        areaCode: undefined,\n        areaName: undefined,\n        stockEmp: undefined,\n        stockEmpName: undefined,\n        goodsReadyEmp: undefined,\n        goodsReadyEmpName: undefined,\n        materialputEmp: undefined,\n        materialputEmpName: undefined,\n        state: 1,\n        orgName: undefined,\n        orgCode: undefined\n      };\n    }\n  }\n};",null]}