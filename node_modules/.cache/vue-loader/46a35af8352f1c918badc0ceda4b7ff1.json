{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/energyConsumptionReport/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/energyConsumptionReport/index.vue","mtime":1596610933522},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as api from '@/api/project/ems/energyReport/energyConsumptionReport.js'\nimport Bar from '@/views/project/EMS/energyReport/temp/bar.vue'\nimport { mapState } from 'vuex'\n\n// import Pagination from '@/components/Pagination'\nexport default {\n    name: 'energyConsumptionReport', //工序级能源消耗报表\n    components: { Bar },\n    data () {\n        return {\n            theight: 0, //表格高度\n            xAxisData: [],\n            listQuery: {\n                //查询\n                startTime: undefined,\n                energyConsumptionLevel: 'level_step'\n            },\n            barData: {\n                id: 'echartsaa',\n                data: null\n            },\n            color: [\n                '#fd6361',\n                '#02b7ae',\n                '#37454e',\n                '#606b6d',\n                '#fd6361',\n                '#ff9669',\n                '#05b7ab'\n            ] //黄 蓝 黑 灰 红 橘  绿\n        }\n    },\n    computed: {\n        ...mapState({\n            dt_energyConsumption_level: state =>\n                state.emsDict.dt_energyConsumption_level\n        })\n    },\n    mounted () {\n        this.setTableHeight()\n        //表格高度自适应\n        window.onresize = () => {\n            this.setTableHeight()\n        }\n        this.$store.dispatch('emsDict/getDicData', ['dt_energyConsumption_level'])\n        this.getList()\n        // this.drawLine()\n    },\n    destroyed () {\n        this.setTableHeight()\n        this.$store.dispatch('emsDict/getDicData', ['dt_energyConsumption_level'])\n        this.getList()\n    },\n    methods: {\n        //表格高度计算\n        setTableHeight () {\n            this.theight = this.$myFun.getSingleTbHeight()\n        },\n        deleteQuery () {\n            // 清除查询条件\n            this.listQuery.energyConsumptionLevel = 'level_step'  //level_step\n            this.listQuery.startTime = undefined\n            this.getList()\n        },\n        //获取表格数据\n        getList () {\n            api.query(this.listQuery).then(response => {\n                // this.list = response.data\n                let eleEnergy = []\n                let gasEnergy = []\n                let waterEnergy = []\n                this.xAxisData = []\n                response.data.forEach(item => {\n                    eleEnergy.push(item.eleCost)\n                    gasEnergy.push(item.gasCost)\n                    waterEnergy.push(item.waterCost)\n                    this.xAxisData.push(item.levelCode)\n                })\n                this.barData.data = [\n                    {\n                        name: '水能耗',\n                        type: 'bar',\n                        data: waterEnergy,\n                        itemStyle: {\n                            normal: { color: this.color[0] }\n                        }\n                    },\n                    {\n                        name: '电能耗',\n                        type: 'bar',\n                        data: eleEnergy,\n                        itemStyle: {\n                            normal: { color: this.color[1] }\n                        }\n                    },\n                    {\n                        name: '气能耗',\n                        type: 'bar',\n                        data: gasEnergy,\n                        itemStyle: {\n                            normal: { color: this.color[2] }\n                        }\n                    }\n                ]\n            })\n        },\n        drawLine () {\n            this.myChart = this.$echarts.init(\n                document.getElementById('myChart')\n            )\n        }\n    }\n}\n",null]}