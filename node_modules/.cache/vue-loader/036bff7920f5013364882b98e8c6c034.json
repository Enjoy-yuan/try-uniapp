{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/WMS/productionMaterial/pullerStorage/content/contentProof.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/WMS/productionMaterial/pullerStorage/content/contentProof.vue","mtime":1596610934160},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getProofList, getPrintStorageList } from \"@/api/project/wms/productionMaterial/pullerStorage\"\nimport AuthoType from '@/components/Select/AuthoType.vue'//权限类型下拉组件\nimport Pagination from \"@/components/Pagination\";\nimport { DT_ORG_TYPE } from '@/utils/constant'\nimport { mapState } from 'vuex';\n\nexport default {\n    name: \"proof\",\n    components: { Pagination, AuthoType },\n    data () {\n        return {\n            theight: 0,\n            sheight: 0,\n            tableKey: 0,\n            list: null,\n            listDetail: null,\n            DT_ORG_TYPE: DT_ORG_TYPE,\n            total: 0,\n            rangeTime: \"\",\n            selectRows: [],\n            dialogGys: false,\n            supplierRows: [],\n            listQuery: {\n                page: true,\n                currentPage: 1,\n                pageSize: 10,\n                purchaseOrderNumber: '',\n                receiveOrderNumber: '',\n                createDateStart: '',\n                createDateEnd: '',\n                orgCode: '',\n                warehouseCode: '',\n                businessType: '',\n                supplierCode: ''//供应商\n            },\n            sublistQuery: {\n                page: true,\n                currentPage: 1,\n                pageSize: 10,\n                receiveOrderNumber: undefined//订单号\n            },\n            rules: {\n\n            }\n        };\n    },\n    computed: {\n        ...mapState({\n            dt_llrk_transfer_screenGroupNum: state => state.businessComponent.dt_llrk_transfer_screenGroupNum\n        })\n    },\n    mounted () {\n        this.setTableHeight();\n        //表格高度自适应\n        window.onresize = () => {\n            this.setTableHeight()\n        };\n        this.$store.dispatch('businessComponent/getBusinessComponentData', ['dt_llrk_transfer_screenGroupNum']);\n    },\n    methods: {\n        //表格高度计算\n        setTableHeight () {\n            this.theight = this.$myFun.getSingleTbHeight() - 50;\n            this.sheight = this.$myFun.getSingleTbHeight() - 75;\n        },\n        //主表数据获取\n        getListData () {\n            getProofList(this.listQuery).then(res => {\n                this.list = res.data.list;\n            })\n\n        },\n        //显示主表\n        getList () {\n            if (this.rangeTime) {\n                var d1 = this.rangeTime[0];\n                var d2 = this.rangeTime[1];\n                this.listQuery.createDateStart = d1;\n                this.listQuery.createDateEnd = d2;\n            } else {\n                this.listQuery.createDateStart = '';\n                this.listQuery.createDateEnd = '';\n            }\n            this.listDetail = []\n            this.getListData();\n        },\n        //显示从表\n        getSubList (row) {\n            this.sublistQuery.receiveOrderNumber = row.receiveOrderNumber;\n            getPrintStorageList(this.sublistQuery).then(res => {\n                this.listDetail = res.data.list;\n                this.total = res.data.pages.count;\n            });\n        },\n        //查询\n        handleQuery () {\n            this.listRow = [];\n            this.listQuery.currentPage = 1;\n            this.getList();\n        },\n        //每页大小变化\n        handleSizeChange (val) {\n            this.listQuery.pageSize = val;\n            this.getList();\n        },\n        //当前页变化\n        handleCurrentChange (val) {\n            this.listQuery.currentPage = val;\n            this.getList();\n        },\n        //主表勾选框选中\n        selectRow (val) {\n            this.selectRows = val[val.length - 1];\n            if (val.length > 1) {\n                this.$refs.tbmain.clearSelection()\n                this.$refs.tbmain.toggleRowSelection(val[val.length - 1], 'selected')\n            }\n\n            if (val.length !== 0) {\n                this.locateWarehouseCode = this.selectRows.warehouseCode;\n                this.getSubList(val[val.length - 1]);\n            }\n        },\n        //主表点击显示从表\n        showSubTable (val) {\n            this.selectRows = val;\n            this.$refs.tbmain.clearSelection()\n            this.$refs.tbmain.toggleRowSelection(val, 'selected');\n            this.getSubList(val);\n        },\n\n        setdefault (val, i) {\n            if (i === 1) {\n                this.listQuery.orgCode = val;\n            } else if (i === 3) {\n                this.listQuery.warehouseCode = val;\n                this.listQuery.businessType = this.dt_llrk_transfer_screenGroupNum.options[0].wareRuleCode;\n                this.getList()\n            }\n        },\n        handlePrint () { },\n        handleExport () { },\n        showGys () {\n            this.$emit('showGys', 'proof');\n        },\n        setGys (rows) {\n            this.supplierRows = rows;\n            if (!this.supplierRows[0]) {\n                this.$set(this.listQuery, 'supplierCode', \"\");\n                this.$set(this.listQuery, 'supplierName', \"\");\n                this.dialogGys = false;\n            } else if (this.supplierRows.length === 1) {\n                this.$set(this.listQuery, 'supplierCode', this.supplierRows[0].supplierCode);\n                this.$set(this.listQuery, 'supplierName', this.supplierRows[0].supplierName);\n                this.dialogGys = false;\n            }\n        }\n    }\n}\n",null]}