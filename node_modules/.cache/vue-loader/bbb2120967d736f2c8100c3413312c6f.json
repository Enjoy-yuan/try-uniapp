{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/keyReport/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/keyReport/index.vue","mtime":1596610933524},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as api from '@/api/project/ems/energyReport/keyReport.js'\nimport Bar from '@/views/project/EMS/energyReport/temp/bar.vue'\nimport { mapState } from 'vuex'\nexport default {\n    name: 'keyReport', //重点产品报表\n    components: { Bar },\n    data () {\n        return {\n            theight: 0, //表格高度\n            isSingle: true, //表格是否单选 点击各按钮根据流程逻辑控制单多选\n            list: [],\n            chartsData: {\n                name: '',\n                id: 'myChartKey',\n                data: null\n            },\n            xAxisData: [],\n            listQuery: {\n                //查询\n                productCode: undefined,\n                month: undefined\n            },\n            color: [\n                '#fd6361',\n                '#02b7ae',\n                '#37454e',\n                '#606b6d',\n                '#fd6361',\n                '#ff9669',\n                '#05b7ab'\n            ] //黄 蓝 黑 灰 红 橘  绿\n        }\n    },\n    computed: {\n        ...mapState({\n            dt_cp_product_list: state =>\n                state.businessComponent.dt_cp_product_list\n        })\n    },\n    mounted () {\n        this.setTableHeight()\n        //表格高度自适应\n        window.onresize = () => {\n            this.setTableHeight()\n        }\n        this.$store.dispatch('businessComponent/getBusinessComponentData', [\n            'dt_cp_product_list'\n        ])\n        this.getList()\n    },\n    destroyed () {\n        this.setTableHeight()\n        this.$store.dispatch('businessComponent/getBusinessComponentData', [\n            'dt_cp_product_list'\n        ])\n        this.getList()\n    },\n    methods: {\n        //获取表格数据\n        getList () {\n            this.series = []\n            this.xAxisData = []\n            api.query(this.listQuery).then(response => {\n                this.list = response.data\n                let eleEnergy = []\n                let gasEnergy = []\n                let waterEnergy = []\n                response.data.forEach(item => {\n                    eleEnergy.push(item.eleEnergy)\n                    gasEnergy.push(item.gasEnergy)\n                    waterEnergy.push(item.waterEnergy)\n                    this.xAxisData.push(item.productCode)\n                })\n                this.chartsData.data = [\n                    {\n                        name: '水能耗',\n                        type: 'bar',\n                        data: waterEnergy,\n                        itemStyle: {\n                            normal: { color: this.color[0] }\n                        }\n                    },\n                    {\n                        name: '电能耗',\n                        type: 'bar',\n                        data: eleEnergy,\n                        itemStyle: {\n                            normal: { color: this.color[1] }\n                        }\n                    },\n                    {\n                        name: '气能耗',\n                        type: 'bar',\n                        data: gasEnergy,\n                        itemStyle: {\n                            normal: { color: this.color[2] }\n                        }\n                    }\n                ]\n            })\n        },\n        setTableHeight () {\n            this.theight = this.$myFun.getSingleTbHeight()\n        },\n        deleteQuery () {\n            // 清除查询条件\n            this.listQuery.productCode = undefined\n            this.listQuery.month = undefined\n            this.getList()\n        },\n    }\n}\n",null]}