{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SPM/sparePartsPurchase/requirementsGathering/dialog/setDivision.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SPM/sparePartsPurchase/requirementsGathering/dialog/setDivision.vue","mtime":1596610933603},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as api from \"@/api/project/spm/sparePartsPurchase/requirementsGathering\"\nimport { DICT_CODE } from '@/utils/constant'\nimport caiGou from '@/components/Select/xtpt/caigou'//下拉组件\nimport personSelect from \"@/components/Select/personSelect.vue\"\nexport default {\n    components: { caiGou, personSelect },\n    data () {\n        return {\n            DICT_CODE: DICT_CODE,\n            dialogStatus: '',\n            dialogVisible: false,\n            dialogVisiblePerson: false,\n            temp: {},\n            parentRowsperson: [],\n            rowIds: [],\n            tempRul: {\n                procurementGroupCode: [\n                    {\n                        required: true,\n                        message: '采购组不能为空',\n                        trigger: 'blur'\n                    }\n                ],\n                planerName: [\n                    {\n                        required: true,\n                        message: '计划员不能为空',\n                        trigger: ['blur', 'change']\n                    }\n                ]\n            }\n        }\n    },\n    methods: {\n        //获取采购组名称\n        selectorgGroupName (val) {\n            this.temp.procurementGroupName = val\n        },\n        //请购人选择\n        handlePerson () {\n            this.dialogVisiblePerson = true\n        },\n        //请购人选择\n        person (val) {\n            this.parentRowsperson = val\n        },\n        //请购人确定\n        confirmPerson () {\n            if (this.parentRowsperson) {\n                this.$set(this.temp, 'planerCode', this.parentRowsperson.employeeCode)\n                this.$set(this.temp, 'planerName', this.parentRowsperson.employeeName)\n                this.dialogVisiblePerson = false\n            } else {\n                this.$message({\n                    title: '警告',\n                    message: '请选择一条信息',\n                    type: 'warning'\n                })\n            }\n        },\n        create () {\n            let sumUpdateDTO = {\n                planerCode: this.temp.planerCode,\n                planerName: this.temp.planerName,\n                procurementGroupCode: this.temp.procurementGroupCode,\n                procurementGroupName: this.temp.procurementGroupName,\n                rowIds: this.rowIds\n            }\n            api.updateRecord(sumUpdateDTO).then(() => {\n                this.$message({\n                    title: '成功',\n                    message: '分工成功',\n                    type: 'success',\n                    duration: 2000\n                })\n                this.dialogVisible = false\n                this.$emit('refresh')\n            })\n        },\n        resetTemp () {\n            this.temp = {\n                procurementGroupCode: undefined,\n                planerName: undefined\n            }\n        }\n    }\n}\n",null]}