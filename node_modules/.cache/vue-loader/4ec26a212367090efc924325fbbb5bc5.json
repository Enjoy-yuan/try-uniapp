{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/MES/productionExecution/firstReport/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/MES/productionExecution/firstReport/index.vue","mtime":1596610933584},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as api from '@/api/project/mes/productionExecution/manualScanCode'\nimport Pagination from '@/components/Pagination'\nimport { getWorkstation } from '@/utils/auth'\n\nexport default {\n    name: 'manualScanCode',\n    components: { Pagination },\n    data() {\n        return {\n            list: [],\n            listSub: null,\n            options: [],\n            total: 0,\n            theight: 0, //表格高度\n            listQuery: {\n                // stationCode: getWorkstation(),\n                workOrderCode: undefined,\n                pageSize: 10,\n                currentPage: 1,\n                type: 'FIRSTPROSTEP'\n            },\n            temp: {\n                workOrderCode: undefined,\n                barCode: undefined,\n                stationCode: undefined\n            },\n            userWorkStation: getWorkstation(),\n            tableKey: [0]\n        }\n    },\n    filters: {\n        splitState: function(e) {\n            if (e === '1') {\n                return '是'\n            } else {\n                return '否'\n            }\n        }\n    },\n\n    mounted() {\n        this.setTableHeight()\n        //表格高度自适应\n        window.onresize = () => {\n            this.setTableHeight()\n        }\n        this.getOptions()\n    },\n    methods: {\n        getList() {\n            api.queryRecords(this.listQuery).then(res => {\n                this.list = res.data.list\n                this.total = res.data.pages.count\n            })\n        },\n        getOptions() {\n            let workOrderState = 'work_order20'\n            api.getRecord(workOrderState).then(res => {\n                this.options = res.data\n            })\n        },\n        //表格高度计算\n        setTableHeight() {\n            this.theight = this.$myFun.getSingleTbHeight()\n        },\n\n        handleCertain() {\n            this.temp.workOrderCode = this.listQuery.workOrderCode\n            this.temp.stationCode = this.listQuery.stationCode\n            if (this.listQuery.workOrderCode) {\n                this.getList()\n            } else {\n                this.list = []\n            }\n        },\n        handleInput() {\n            if (this.temp.barCode) {\n                let dto = {\n                    workOrderCode: this.temp.workOrderCode,\n                    type: 'FIRSTPROSTEP',\n                    barCode: this.temp.barCode,\n                    stationCode: this.userWorkStation\n                }\n                api.addRecord(dto).then(() => {\n                    this.temp.barCode = undefined\n                    this.getList()\n                    this.$message({\n                        title: '成功',\n                        message: '录入成功',\n                        type: 'success',\n                        duration: 2000\n                    })\n                })\n            } else {\n                this.$message({\n                    type: 'info',\n                    message: '请输入条码'\n                })\n            }\n        },\n        handleDelete(index) {\n            //删除列表\n            this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            })\n                .then(() => {\n                    let id = this.list[index].rowId\n                    let type = 'FIRSTPROSTEP'\n                    api.deleteRecord(type, id).then(() => {\n                        this.getList()\n                        this.$message({\n                            title: '成功',\n                            message: '删除成功',\n                            type: 'success',\n                            duration: 2000\n                        })\n                    })\n                })\n                .catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    })\n                })\n        }\n    }\n}\n",null]}