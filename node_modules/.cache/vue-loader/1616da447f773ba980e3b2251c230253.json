{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/components/Dialog/dialogPersonSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/components/Dialog/dialogPersonSelect.vue","mtime":1596610933151},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Tree from \"@/components/Tree\" // Secondary package based on el-pagination\nimport Pagination from '@/components/Pagination'\nimport { selectlists } from '@/api/system/employees'\n\nexport default {\n    name: 'personSelect',\n    components: { Pagination, Tree },\n    props: ['unMutiple', 'title', 'propName', 'propCode', 'required'],\n    data () {\n        return {\n            treeType: 'org',\n            treeParams: {\n                orgCode: null\n            },\n            dialogVisible: false,\n            list: [],\n            total: 0,\n            listLoading: true,\n            listQuery: {\n                currentPage: 1,\n                pageSize: 10,\n                page: 1,\n                orgId: null,\n                employeeCode: null,\n                employeeName: null\n            },\n            selectedRows: [],\n            currentSelectedRow: null,\n            treeStyleObj: {\n                height: '437px'\n            }\n        }\n    },\n    created () {\n        this.handleQuery()\n    },\n    watch: {\n        'listQuery.orgId' (val) {\n            if (val) {\n                this.handleQuery()\n            }\n        }\n    },\n    methods: {\n        handleQuery () {//查询组织列表\n            this.listQuery.page = 1\n            selectlists(this.listQuery).then(response => {\n                this.list = response.data.list\n                this.total = response.data.pages.count\n                // Just to simulate the time of the request\n            })\n        },\n        selectChange (val) {//备选项选中行\n            if (this.unMutiple) {\n                if (val.length > 1) {\n                    this.$refs.tb.clearSelection() //清除其他行的选中\n                    this.$refs.tb.toggleRowSelection(val[val.length - 1], \"selected\") //单击行绑定点击事件\n                } else if (val.length === 1) {\n                    this.selectedRows = val\n                    this.currentSelectedRow = val[val.length - 1]\n                } else if (val.length === 0) {\n                    this.selectedRows = val\n                    this.currentSelectedRow = null\n                }\n            } else {\n                this.selectedRows = val\n                this.currentSelectedRow = val[val.length - 1]\n            }\n        },\n        personConfirm () {\n            if (this.required && this.selectedRows) {\n                if (this.selectedRows.length === 0) {\n                    this.$message({ type: 'warning', message: '请选择一条数据' })\n                } else {\n                    this.$emit('personConfirm', this.selectedRows, this.propCode, this.propName)\n                    this.dialogVisible = false\n                }\n            } else {\n                if (this.selectedRows) {\n                    if (this.selectedRows.length === 0) {\n                        this.$emit('personConfirm', [{ employeeCode: null, employeeName: null }], this.propCode, this.propName)\n                    } else {\n                        this.$emit('personConfirm', this.selectedRows, this.propCode, this.propName)\n                    }\n                } else {\n                    this.$emit('personConfirm', [{ employeeCode: null, employeeName: null }], this.propCode, this.propName)\n                }\n                this.dialogVisible = false\n            }\n        },\n        setTreeDatas (id) {\n            this.$set(this.listQuery, 'orgId', id)\n        }\n    }\n}\n",null]}