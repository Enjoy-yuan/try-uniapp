{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/components/Select/knbomwlxz.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/components/Select/knbomwlxz.vue","mtime":1596610933168},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Pagination from '@/components/Pagination' // 分页组件\nimport * as api from \"@/api/data-base/instorageProcess\"\nexport default {\n    components: { Pagination },\n    props: ['unMutiple', 'bomType', 'orgCode'],\n    data () {\n        return {\n            listAll: null,\n            listSelected: null,\n            listSub: null,\n            totalAll: 0,\n            totalSelected: 0,\n            activeName2: 'first',\n            tableKey: 0,\n            listQueryAll: {\n                page: true,\n                currentPage: 1,\n                pageSize: 10,\n                bomType: '',\n                orgCode: '',\n                materielCode: '',\n                materielName: ''\n            },\n            isEdit: true,\n            detailList: []\n        }\n    },\n    mounted () {//创建时加载备选项\n        this.getList1()\n    },\n    methods: {\n        handleFilter1 () {//查询备选项\n            this.getList1()\n        },\n        handleFilter2 () {//查询已选项\n            this.getList2()\n        },\n        getList1 () {//备选项查询\n            this.listQueryAll.orgCode = this.orgCode;\n            this.listQueryAll.bomType = this.bomType;\n            api.queryRecords(this.listQueryAll.orgCode, this.listQueryAll.bomType, this.listQueryAll).then(res => {\n                this.listAll = res.data.list\n                this.totalAll = res.data.pages.count\n            });\n        },\n        getList2 () {//已选项查询\n            this.listSelected = this.selectRowData1\n        },\n        getDetail (val) {\n            if (val) {\n                api.queryRecordsDetail(val.versions, {}).then(res => {\n                    res = res.data;\n                    this.listSub = res;\n                    if (this.unMutiple) {\n                        this.$emit('clickRows', {\n                            v1: val,\n                            v2: this.listSub\n                        });\n                    } else {\n                        this.$emit('clickRows', this.listSelected);\n                    }\n\n                })\n            } else {\n                this.$emit('clickRows', [])\n            }\n        },\n        selectChange (val) {\n            if (this.unMutiple) {\n                this.selectOneRow(val);\n            } else {\n                this.selectRow1(val);\n            }\n        },\n        selectRow1 (val) {//备选项选中行\n            this.selectRowData1 = val\n            this.listSelected = this.selectRowData1;\n            this.getDetail(val[val.length - 1]);\n            // this.$emit('clickRows' ,val,this.listSub);\n        },\n        selectOneRow (val) {\n            let arr = [];\n            arr.push(val[val.length - 1])\n            this.selectRowData1 = arr;\n            if (arr[0]) {\n                this.getDetail(arr[0]);\n            }\n            if (val.length > 1) {\n                this.$refs.tbselect.clearSelection()\n                this.$refs.tbselect.toggleRowSelection(val[val.length - 1], 'selected')\n            }\n            this.listSelected = this.selectRowData1;\n\n        }\n    }\n}\n",null]}