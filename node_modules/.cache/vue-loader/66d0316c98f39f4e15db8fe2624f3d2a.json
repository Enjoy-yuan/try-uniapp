{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/priceManage/supplierQuote/detailQuoteNote/Dialog/dialogCompare.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/priceManage/supplierQuote/detailQuoteNote/Dialog/dialogCompare.vue","mtime":1596610933727},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as api from \"@/api/project/srm/supplierSelect/priceReview\"\nimport { mapState } from \"vuex\"\nexport default {\n    name: 'dialogCompare',\n    props: ['unMutiple', 'title', 'curdialogStatus'],\n    data () {\n        return {\n            formData: {},\n            listSelected: [],//已选项\n            dialogVisible: false,\n            list: [],\n            listSub: [],\n        }\n    },\n    computed: {\n        ...mapState({\n            dt_srm_pdj: state => state.dict.dt_srm_pdj,\n            dt_srm_pdf: state => state.dict.dt_srm_pdf,\n        })\n    },\n    filters: {\n        stateFilter: function (a) {\n            if (a === \"0\") {\n                return \"否\"\n            } else {\n                return \"是\"\n            }\n        }\n    },\n    mounted () {\n        this.$store.dispatch(\"dict/getDicData\", [\"dt_srm_pdj\", 'dt_srm_pdf'])\n    },\n    methods: {\n        getList (val) {\n            this.formData = val\n            let dto = {\n                materielCode: val.materielCode,\n                rfqNo: val.noticeNo,\n                supplierCode: val.supplierCode,\n                quotationSource: 'notice'\n            }\n            api.priceCompare(dto).then(res => {\n                this.list = res.data\n            })\n        },\n        selectChange (val) {\n            this.listSelected = val\n        },\n        //对比按钮单击事件\n        handleCompare () {\n            if (this.listSelected.length === 2) {\n                if (this.formData.quotationMethod == \"PDI0\") {\n                    this.listSub = this.listSelected.map(v => {\n                        v.rawMaterialCost = 0\n                        v.subtotalCosts = 0\n                        v.recoveryValue = 0\n                        v.outsourcingCost = 0\n                        v.toolingCost = 0\n                        v.processingCost = 0\n                        v.wasteLoss = 0\n                        v.designCost = 0\n                        v.managementRate = 0\n                        v.managementCost = 0\n                        v.financialRate = 0\n                        v.packingCost = 0\n                        v.logisticsCost = 0\n                        v.otherCost = 0\n                        v.profitRate = 0\n                        v.profit = 0\n                        v.financialCost = 0\n                        v.realPrice = v.taxFreePrice\n                        return v\n                    })\n                } else {\n                    this.listSub = this.listSelected.map(v => {\n                        v.totalQuotation.quoteRounds = v.quoteRounds\n                        v.totalQuotation.rowId = v.rowId\n                        return v.totalQuotation\n                    })\n                }\n                let rawMaterialCost = parseFloat(this.listSub[0].rawMaterialCost) - parseFloat(this.listSub[1].rawMaterialCost)\n                let subtotalCosts = parseFloat(this.listSub[0].subtotalCosts) - parseFloat(this.listSub[1].subtotalCosts)\n                let recoveryValue = parseFloat(this.listSub[0].recoveryValue) - parseFloat(this.listSub[1].recoveryValue)\n                let outsourcingCost = parseFloat(this.listSub[0].outsourcingCost) - parseFloat(this.listSub[1].outsourcingCost)\n                let toolingCost = parseFloat(this.listSub[0].toolingCost) - parseFloat(this.listSub[1].toolingCost)\n                let processingCost = parseFloat(this.listSub[0].processingCost) - parseFloat(this.listSub[1].processingCost)\n                let wasteLoss = parseFloat(this.listSub[0].wasteLoss) - parseFloat(this.listSub[1].wasteLoss)\n                let designCost = parseFloat(this.listSub[0].designCost) - parseFloat(this.listSub[1].designCost)\n                let managementRate = parseFloat(this.listSub[0].managementRate) - parseFloat(this.listSub[1].managementRate)\n                let managementCost = parseFloat(this.listSub[0].managementCost) - parseFloat(this.listSub[1].managementCost)\n                let financialRate = parseFloat(this.listSub[0].financialRate) - parseFloat(this.listSub[1].financialRate)\n                let financialCost = parseFloat(this.listSub[0].financialCost) - parseFloat(this.listSub[1].financialCost)\n                let packingCost = parseFloat(this.listSub[0].packingCost) - parseFloat(this.listSub[1].packingCost)\n                let logisticsCost = parseFloat(this.listSub[0].logisticsCost) - parseFloat(this.listSub[1].logisticsCost)\n                let otherCost = parseFloat(this.listSub[0].otherCost) - parseFloat(this.listSub[1].otherCost)\n                let profitRate = parseFloat(this.listSub[0].profitRate) - parseFloat(this.listSub[1].profitRate)\n                let profit = parseFloat(this.listSub[0].profit) - parseFloat(this.listSub[1].profit)\n                let realPrice = parseFloat(this.listSub[0].realPrice) - parseFloat(this.listSub[1].realPrice)\n                let dataSum = {                    key: 'sum', quoteRounds: '差异', rawMaterialCost: rawMaterialCost, subtotalCost: subtotalCosts, recoveryValue: recoveryValue, outsourcingCost: outsourcingCost, toolingCost: toolingCost, processingCost: processingCost, wasteLoss: wasteLoss,\n                    designCost: designCost, managementRate: managementRate, managementCost: managementCost, financialRate: financialRate, financialCost: financialCost, packingCost: packingCost, logisticsCost: logisticsCost, otherCost: otherCost, profitRate: profitRate, profit: profit, realPrice: realPrice\n                }\n                this.listSub.push(dataSum)\n            } else {\n                this.$message({\n                    type: 'warning',\n                    message: '请选择两条报价信息对比'\n                })\n            }\n\n        }\n    }\n}\n",null]}