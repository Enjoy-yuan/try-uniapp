{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/IOT/MOM/dataQuery/components/echartsCom.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/IOT/MOM/dataQuery/components/echartsCom.vue","mtime":1597811884826},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: 'echartsCom',\n    props: ['list'], // 图表数据\n    data() {\n        return {\n            legendData: [], // 图例数组\n            xAxisData: [], // 横坐标日期\n            series: [], // 折线图数据\n            myChart: null // 初始化echarts实例\n        }\n    },\n    methods: {\n        // 父组件点击查询时调用\n        showEcharts() {\n            // 异步获取父组件的数据\n            setTimeout(() => {\n                // 数据重置\n                this.legendData = []\n                this.xAxisData = []\n                this.series = []\n                let deleteTime = []\n                if (this.list.length > 0) {\n                    this.myChart = this.$echarts.init(document.getElementById('chart'))\n                    this.list.map((item) => {\n                        this.xAxisData.push(item.time)\n                        delete item.time\n                        deleteTime.push(item)\n                    })\n                    // console.log(this.xAxisData)\n                    this.legendData = Object.keys(deleteTime[0])\n                    // console.log(this.legendData)\n                    this.legendData.map((item) => {\n                        let obj = {\n                            name: item,\n                            type: 'line',\n                            stack: '总量',\n                            smooth: true,\n                            data: []\n                        }\n                        deleteTime.map((childItem) => {\n                            obj.data = obj.data.concat(childItem[item])\n                        })\n                        this.series.push(obj)\n                    })\n                    this.drawChart()\n                }\n            })\n        },\n        // 绘制折线图\n        drawChart() {\n            let option = {\n                tooltip: {\n                    trigger: 'axis'\n                },\n                legend: {\n                    data: this.legendData\n                },\n\n                toolbox: {\n                    x: '95%',\n                    feature: {\n                        saveAsImage: {}\n                    }\n                },\n                xAxis: {\n                    type: 'category',\n                    boundaryGap: false,\n                    data: this.xAxisData\n                },\n                yAxis: {\n                    type: 'value'\n                },\n                series: this.series\n            }\n            // 必须指定第二个参数，折线图不合并\n            this.myChart.setOption(option, true)\n        }\n    }\n}\n",null]}