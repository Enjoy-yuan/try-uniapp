{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/instrumentReport/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/instrumentReport/index.vue","mtime":1596610933523},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as api from '@/api/project/ems/energyReport/instrumentReport.js'\nimport Pagination from '@/components/Pagination'\nimport { mapState } from 'vuex'\nexport default {\n    name: 'instrumentReport', //仪表分析报表\n    components: { Pagination },\n    data () {\n        return {\n            theight: 0, //表格高度\n            isSingle: true, //表格是否单选 点击各按钮根据流程逻辑控制单多选\n            list: [],\n            total: 0,\n            listQuery: {\n                //查询\n                page: true,\n                month: undefined,\n                currentPage: 1,\n                pageSize: 15\n            },\n            currentSelectedRow: null, //当前选中的行\n            selectedRows: null, //多选时选中的所有行\n            selectlistRow: null,\n            tableKey: 0 //表格索引\n        }\n    },\n    computed: {\n        ...mapState({\n            dt_sb_modelList: state => state.businessComponent.dt_sb_modelList\n        })\n    },\n    mounted () {\n        this.$store.dispatch('businessComponent/getBusinessComponentData', [\n            'dt_sb_modelList'\n        ])\n        this.setTableHeight()\n        //表格高度自适应\n        window.onresize = () => {\n            this.setTableHeight()\n        }\n        this.getList()\n    },\n    destroyed () {\n        this.$store.dispatch('businessComponent/getBusinessComponentData', [\n            'dt_sb_modelList'\n        ])\n        this.setTableHeight()\n        this.getList()\n    },\n    methods: {\n        //表格高度计算\n        setTableHeight () {\n            this.theight = this.$myFun.getSingleTbHeight()\n        },\n        //获取表格数据\n        getList () {\n            api.query(this.listQuery).then(response => {\n                response.data.map((v, i) => {\n                    v.serial = i + 1\n                })\n                this.list = response.data\n                this.total = response.data.length\n            })\n        },\n\n        //表格查询\n        handleQuery () {\n            this.listQuery.currentPage = 1\n            this.getList()\n        },\n        deleteQuery () {\n            // 清除查询条件\n            this.listQuery.currentPage = 1\n            this.listQuery.month = undefined\n            this.getList()\n        },\n        //表格显示条数变化\n        handleSizeChange (val) {\n            this.listQuery.pageSize = val\n            this.getList()\n        },\n        //表格当前页变化\n        handleCurrentChange (val) {\n            this.listQuery.currentPage = val\n            this.getList()\n        },\n        //点击表格某一行\n        rowClick (val) {\n            this.$refs.tb.toggleRowSelection(val, 'selected') //单击行绑定点击事件\n        }\n    }\n}\n",null]}