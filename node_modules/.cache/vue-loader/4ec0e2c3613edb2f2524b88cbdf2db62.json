{"remainingRequest":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/cf_web/src/views/project/IOT/MOM/logService/components/serviceLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/cf_web/src/views/project/IOT/MOM/logService/components/serviceLog.vue","mtime":1601016968293},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport throttle from 'lodash/throttle'\nimport Pagination from '@/components/Pagination'\nimport * as api from '@/api/project/iot/MOM/logService'\nexport default {\n    components: { Pagination },\n    data() {\n        return {\n            time: '',\n            listQuery: {\n                currentPage: 1,\n                pageSize: 15,\n                startTime: '',\n                endTime: '',\n                userName: '',\n                ip: ''\n            },\n            listLoading: false,\n            tableData: [],\n            theight: 0,\n            total: 0\n        }\n    },\n    mounted() {\n        this.theight = this.$myFun.getSingleTbHeight() - 30\n        window.onresize = () => {\n            this.theight = this.$myFun.getSingleTbHeight() - 30\n        }\n        this.handleQuery()\n    },\n    methods: {\n        //表格查询\n        handleQuery: throttle(\n            function() {\n                this.listQuery.currentPage = 1\n                this.getList()\n            },\n            2000,\n            {\n                leading: true,\n                trailing: false\n            }\n        ),\n        getList() {\n            this.listLoading = true\n            if (this.time) {\n                this.listQuery.startTime = this.time[0]\n                this.listQuery.endTime = this.time[1]\n            }\n            api.getService(this.listQuery).then((res) => {\n                this.tableData = []\n                res.data.list.map((item) => {\n                    if (item.logInfo) {\n                        item.logInfo.createTime = item.createTime\n                        item.logInfo.operation = item.operation\n                        item.logInfo.throwable = item.throwable\n                        this.tableData.push(item.logInfo)\n                    }\n                })\n                this.total = res.data.total\n                this.listLoading = false\n            })\n        }\n    }\n}\n",null]}