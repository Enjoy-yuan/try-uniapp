{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/procurementDemand/twoElements/twoelementList/dialog/addReason.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/procurementDemand/twoElements/twoelementList/dialog/addReason.vue","mtime":1596610933868},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from \"vuex\"\nimport * as api from \"@/api/project/srm/procurementDemand/twoelementList\"\nimport throttle from 'lodash/throttle'\n\nexport default {\n    data () {\n        return {\n            dialogVisibleTwo: false,\n            selectlistRow: null,\n            temp: {\n                rowId: undefined\n            },\n            rules: {\n                represent: [{ required: true, message: '原因描述不能为空', trigger: 'blur' }],\n            }\n        }\n    },\n    computed: {\n        ...mapState({\n            dt_srm_pba: state => state.dict.dt_srm_pba,\n\n        })\n    },\n    mounted () {\n        this.$store.dispatch(\"dict/getDicData\", [\"dt_srm_pba\"])\n\n    },\n    methods: {\n        handleClose () {\n            this.$refs.dataForm.resetFields()\n        },\n        updateData: throttle(function () {\n            this.$refs.dataForm.validate(valid => {\n                if (valid) {\n                    let dto = {\n                        reason: this.temp.reason,\n                        represent: this.temp.represent,\n                        rowIds: []\n                    }\n                    this.selectlistRow.forEach((val, index) => {\n                        dto.rowIds[index] = val.rowId\n                    })\n                    api.updateRecord(dto).then(() => {\n                        this.$message({\n                            title: '成功',\n                            message: '编辑成功',\n                            type: 'success',\n                            duration: 2000\n                        })\n                        this.dialogVisibleTwo = false\n                        this.$emit('refresh')\n                    })\n                } else {\n                    return false\n                }\n            })\n        }, 2000,\n            {\n                leading: true,\n                trailing: false\n            }\n        ),\n        resetTemp () {\n            this.temp = {\n                reason: undefined,\n                represent: undefined\n            }\n        }\n    }\n}\n",null]}