{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/IOT/MOM/projectCenter/main.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/IOT/MOM/projectCenter/main.vue","mtime":1597386224560},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { queryProjects } from \"@/api/project/iot/IOT/project\"\nimport Pagination from \"@/components/Pagination\"\nimport { mapState } from 'vuex'\nimport throttle from 'lodash/throttle'\nexport default {\n    name: \"GPMain\",\n    components: { Pagination },\n    computed: {\n        ...mapState({\n            iot_project_type: state => state.iotDict.iot_project_type\n        })\n    },\n    data () {\n        return {\n            theight: 0,//表格高度\n            listLoading: false,\n            list: null,\n            total: 0,\n            listQuery: {\n                page: true,\n                currentPage: 1,\n                pageSize: 15,\n                projectType: undefined,\n                projectName: undefined\n            },\n            tableKey: 0 //表格索引\n        }\n    },\n    mounted () {\n        this.setTableHeight()\n        window.onresize = () => {\n            this.setTableHeight()\n        }\n        this.getList()\n    },\n    methods: {\n        //获取表格数据\n        getList () {\n            this.listLoading = true\n            queryProjects(this.listQuery).then(response => {\n                this.list = response.data.list\n                let options = [this.iot_project_type]\n                this.list = this.$myFun.srmCodeToName(\n                    response.data.list,\n                    options,\n                    ['projectType']\n                )\n                this.total = response.data.pages.count\n                setTimeout(() => {\n                    this.listLoading = false\n                }, 1.5 * 100)\n            })\n        },\n        //表格查询\n        handleQuery: throttle(\n            function () {\n                this.listQuery.currentPage = 1\n                this.getList()\n            },\n            2000,\n            {\n                leading: true,\n                trailing: false\n            }\n        ),\n        toInfo (code) {\n            this.$emit('setCode', code)\n            this.$emit('setPage', 'subMain')\n        },\n        show () {\n            return this.$message({\n                title: this.$t('message.warning'),\n                message: \"暂无该功能!\",\n                type: \"warning\"\n            })\n        },\n        //表格高度计算\n        setTableHeight () {\n            this.theight = this.$myFun.getSingleTbHeight()\n        }\n    }\n};\n",null]}