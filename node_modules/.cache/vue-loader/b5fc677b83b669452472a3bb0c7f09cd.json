{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/productionLineAnalysis/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/productionLineAnalysis/index.vue","mtime":1596610933525},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as api from '@/api/project/ems/energyReport/productionLineAnalysis.js'\nimport Bar from '@/views/project/EMS/energyReport/temp/bar.vue'\nexport default {\n    name: 'productionLineAnalysis',\n    components: { Bar },\n    data () {\n        return {\n            theight: 0, //表格高度\n            list: [],\n            xAxis: undefined,\n            chartData: null,\n            listQuery: {\n                //查询\n                monthDate: undefined\n            },\n            color: [\n                '#fd6361',\n                '#02b7ae',\n                '#37454e',\n                '#606b6d',\n                '#fd6361',\n                '#ff9669',\n                '#05b7ab'\n            ] //黄 蓝 黑 灰 红 橘  绿\n        }\n    },\n    mounted () {\n        this.setTableHeight()\n        //表格高度自适应\n        window.onresize = () => {\n            this.setTableHeight()\n        }\n        this.getList()\n    },\n    destroyed () {\n        this.getList()\n    },\n    methods: {\n        //表格高度计算\n        setTableHeight () {\n            this.theight = this.$myFun.getSingleTbHeight() - 185 + 'px'\n        },\n        //获取表格数据\n        getList () {\n            api.query(this.listQuery).then(response => {\n                this.list = JSON.parse(JSON.stringify(response.data))\n                this.xAxis = this.list.map(item => {\n                    return item.productLineName\n                })\n                let waterPlan = []\n                let electricPlan = []\n                let gasPlan = []\n                let waterReal = []\n                let electricReal = []\n                let gasReal = []\n                let waterLegend = ['水计划', '水实际']\n                let eleLegend = ['电计划', '电实际']\n                let gasLegend = ['气计划', '气实际']\n                this.list.forEach(item => {\n                    waterPlan.push(item.waterPlan)\n                    electricPlan.push(item.electricPlan)\n                    gasPlan.push(item.gasPlan)\n                    waterReal.push(item.waterReal)\n                    electricReal.push(item.electricReal)\n                    gasReal.push(item.gasReal)\n                })\n                let waterSerie = [\n                    {\n                        name: '水计划',\n                        type: 'bar',\n                        data: waterPlan,\n                        itemStyle: {\n                            normal: { color: this.color[2] }\n                        }\n                    },\n                    {\n                        name: '水实际',\n                        type: 'bar',\n                        data: waterReal,\n                        itemStyle: {\n                            normal: { color: this.color[0] }\n                        }\n                    }\n                ]\n                let eleSerie = [\n                    {\n                        name: '电计划',\n                        type: 'bar',\n                        data: electricPlan,\n                        itemStyle: {\n                            normal: { color: this.color[1] }\n                        }\n                    },\n                    {\n                        name: '电实际',\n                        type: 'bar',\n                        data: electricReal,\n                        itemStyle: {\n                            normal: { color: this.color[5] }\n                        }\n                    }\n                ]\n                let gsSerie = [\n                    {\n                        name: '气计划',\n                        type: 'bar',\n                        data: gasPlan,\n                        itemStyle: {\n                            normal: { color: this.color[0] }\n                        }\n                    },\n                    {\n                        name: '气实际',\n                        type: 'bar',\n                        data: gasReal,\n                        itemStyle: {\n                            normal: { color: this.color[3] }\n                        }\n                    }\n                ]\n                this.chartData = [\n                    {\n                        id: 'waterSerie',\n                        name: '水',\n                        data: waterSerie,\n                        legend: waterLegend\n                    },\n                    {\n                        id: 'eleSerie',\n                        name: '电',\n                        data: eleSerie,\n                        legend: eleLegend\n                    },\n                    {\n                        id: 'gsSerie',\n                        name: '气',\n                        data: gsSerie,\n                        legend: gasLegend\n                    }\n                ]\n            })\n        },\n        deleteQuery () {\n            // 清除查询条件\n            this.listQuery.monthDate = undefined\n            this.getList()\n        },\n    }\n}\n",null]}