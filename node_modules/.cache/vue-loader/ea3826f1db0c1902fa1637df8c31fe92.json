{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/supplierManagement/supplierAudit/supplierCollectionAudit/formation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/supplierManagement/supplierAudit/supplierCollectionAudit/formation.vue","mtime":1596610933950},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport tab1 from \"@/components/srmSupplierTab/Tab/tab1\"\nimport tab2 from \"@/components/srmSupplierTab/Tab/tab2\"\nimport tab3 from \"@/components/srmSupplierTab/Tab/tab3\"\nimport tab4 from \"@/components/srmSupplierTab/Tab/tab4\"\nimport tab5 from \"@/components/srmSupplierTab/Tab/tab5\"\nimport tab6 from \"@/components/srmSupplierTab/Tab/tab6\"\nimport tab7 from \"@/components/srmSupplierTab/Tab/tab7\"\nimport tab8 from \"@/components/srmSupplierTab/Tab/tab8\"\nimport tab9 from \"@/components/srmSupplierTab/Tab/tab9\"\nimport * as api from \"@/api/project/srm/supplierManagement/supplierRegister\"\n\nexport default {\n    components: { tab1, tab2, tab3, tab4, tab5, tab6, tab7, tab8, tab9 },\n    data () {\n        return {\n            edit: false,\n            state: '',\n            status: false,\n            rowData: {},\n            tabName: 'jbxx',\n            tabConfig: [\n                { label: '基本信息', name: 'jbxx', prop: 'jbxx' },\n                { label: '工厂信息', name: 'gcxx', prop: 'gcxx' },\n                { label: '市场业绩', name: 'scyj', prop: 'scyj' },\n                { label: '主要联系人', name: 'zylxr', prop: 'zylxr' },\n                { label: '主要工艺流程', name: 'zygylc', prop: 'zygylc' },\n                { label: '主要软件及设备清单', name: 'sbqd', prop: 'sbqd' },\n                { label: '主要模检具清单', name: 'mjjqd', prop: 'mjjqd' },\n                { label: '主要证书清单', name: 'zsqd', prop: 'zsqd' },\n                { label: '主要二级供应商清单', name: 'gysqd', prop: 'gysqd' }\n            ],\n        }\n    },\n    methods: {\n        handleClose () {\n            this.$emit('changeState', 'list')\n        },\n        handleClick (tab) {\n            if (this.state === 'edit') {\n                if (tab.name === 'jbxx') {\n                    this.$refs.tab1[0].getFactory(this.rowData)\n                } else if (tab.name === 'gcxx') {\n                    this.$refs.tab2[0].getList(this.rowData)\n                } else if (tab.name === 'scyj') {\n                    this.$refs.tab3[0].getList(this.rowData)\n                } else if (tab.name === 'zylxr') {\n                    this.$refs.tab4[0].getList(this.rowData)\n                } else if (tab.name === 'zygylc') {\n                    this.$refs.tab5[0].getList(this.rowData)\n                } else if (tab.name === 'sbqd') {\n                    this.$refs.tab6[0].getList(this.rowData)\n                } else if (tab.name === 'mjjqd') {\n                    this.$refs.tab7[0].getList(this.rowData)\n                } else if (tab.name === 'zsqd') {\n                    this.$refs.tab8[0].getList(this.rowData)\n                } else if (tab.name === 'gysqd') {\n                    this.$refs.tab9[0].getList(this.rowData)\n                }\n            }\n        },\n        initForm (type, row) {\n            this.state = type\n            this.rowData = row\n            this.$refs.tab1[0].getCountry()\n            if (type === 'edit') {\n                this.$refs.tab1[0].edit = true\n                this.edit = false\n                this.status = true\n                this.$nextTick(() => {\n                    if (this.tabName === 'jbxx') {\n                        this.$refs.tab1[0].getList(this.rowData)\n                        this.$refs.tab1[0].getFactory(row)\n                    }\n                    this.$refs.tab2[0].list = []\n                    this.$refs.tab3[0].list = []\n                    this.$refs.tab3[0].listSub = []\n                    this.$refs.tab4[0].list = []\n                    this.$refs.tab5[0].list = []\n                    this.$refs.tab6[0].list = []\n                    this.$refs.tab7[0].list = []\n                    this.$refs.tab8[0].list = []\n                    this.$refs.tab9[0].list = []\n                })\n            } else {\n                this.$refs.tab1[0].mainFactory = []\n                this.$refs.tab1[0].edit = false\n                this.edit = true\n                this.status = false\n                this.$nextTick(() => {\n                    this.$refs.tab1[0].resetTemp()\n                    this.$refs.tab1[0].$refs['mainLista'].clearValidate()\n                    this.$refs.tab1[0].$refs['mainListc'].clearValidate()\n                })\n            }\n        },\n        handleSave () {\n            this.$refs.tab1[0].$refs['mainLista'].validate(valid => {\n                if (valid) {\n                    this.$refs.tab1[0].$refs['mainListc'].validate(valid => {\n                        if (valid) {\n                            if (this.state === 'add') {\n                                api.addRecord(this.$refs.tab1[0].mainList).then(() => {\n                                    this.handleClose()\n                                    this.$message({\n                                        title: '成功',\n                                        message: '新增成功',\n                                        type: 'success',\n                                        duration: 2000\n                                    })\n                                    this.$emit('fresh', 'list')\n                                })\n                            } else if (this.state === 'edit') {\n                                api.updateRecord(this.rowData.rowId, this.$refs.tab1[0].mainList).then(() => {\n                                    this.handleClose()\n                                    this.$message({\n                                        title: '成功',\n                                        message: '编辑成功',\n                                        type: 'success',\n                                        duration: 2000\n                                    })\n                                    this.$emit('fresh', 'list')\n                                })\n                            }\n                        } else {\n                            return false\n                        }\n                    })\n\n                } else {\n                    return false\n                }\n            })\n        },\n        handleConfirm () {\n            let dto = {\n                method: 'confirm',\n                purchaseOrg: this.rowData.purchaseOrg,\n                purchaser: this.rowData.purchaser\n            }\n            api.confirmRecord(this.rowData.rowId, dto).then(() => {\n                this.$message({\n                    title: '成功',\n                    message: '信息确认成功',\n                    type: 'success',\n                    duration: 2000\n                })\n                this.$emit('fresh', 'list')\n            })\n        }\n    }\n}\n",null]}