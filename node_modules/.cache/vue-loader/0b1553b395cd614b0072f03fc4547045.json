{"remainingRequest":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/cf_web/src/components/Slider/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/cf_web/src/components/Slider/index.vue","mtime":1600927611126},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: \"slider\",\n    props: ['min', 'max', 'value'],\n    data () {\n        return {\n            slider: null,        //滚动条DOM元素\n            thunk: null,         //拖拽DOM元素\n            per: this.value,     //当前值\n        }\n    },\n    watch: {\n        value () {\n\n        }\n    },\n    //渲染到页面的时候\n    mounted () {\n        this.slider = this.$refs.slider\n        this.thunk = this.$refs.trunk\n        var _this = this\n        this.thunk.onmousedown = function (e) {\n            var width = parseInt(_this.width)\n            var disX = e.clientX\n            document.onmousemove = function (e) {\n                // value, left, width\n                // 当value变化的时候，会通过计算属性修改left，width\n\n                // 拖拽的时候获取的新width\n                var newWidth = e.clientX - disX + width\n                // 拖拽的时候得到新的百分比\n                var scale = newWidth / _this.slider.offsetWidth\n                let per = Math.ceil((_this.max - _this.min) * scale + _this.min)\n                per = Math.max(per, _this.min)\n                per = Math.min(per, _this.max)\n                _this.$emit('change', per)\n            }\n            document.onmouseup = function () {\n                document.onmousemove = document.onmouseup = null\n            }\n            return false\n        }\n    },\n    computed: {\n        // 设置一个百分比，提供计算slider进度宽度和trunk的left值\n        // 对应公式为  当前值-最小值/最大值-最小值 = slider进度width / slider总width\n        // trunk left =  slider进度width + trunk宽度/2\n        scale () {\n            return (this.value - this.min) / (this.max - this.min)\n        },\n        width () {\n            if (this.slider) {\n                return this.slider.offsetWidth * this.scale + 'px'\n            } else {\n                return 0 + 'px'\n            }\n        },\n        left () {\n            if (this.slider) {\n                return this.slider.offsetWidth * this.scale - this.thunk.offsetWidth / 2 + 'px'\n            } else {\n                return 0 + 'px'\n            }\n        }\n    },\n}\n",null]}