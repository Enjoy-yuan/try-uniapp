{"remainingRequest":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/cf_web/src/views/data-base/warehouseDistribute/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/cf_web/src/views/data-base/warehouseDistribute/index.vue","mtime":1600927611472},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as api1 from \"@/api/data-base/warehouse\"\nimport * as api from \"@/api/data-base/warehouse-distribute\"\nimport Pagination from \"@/components/Pagination\"\nimport orgSelect from \"@/components/Select/orgSelect.vue\"\nimport { DT_ORG_TYPE } from \"@/utils/constant\"\nimport personSelect from \"@/components/Select/personSelect.vue\"\nimport ImportFile from \"@/components/ImportFile\"\nimport wlxzbyzsj from \"@/components/Select/wlxzbyzsj.vue\"\n\nexport default {\n    name: \"warehouseDistribute\",\n    components: {\n        Pagination,\n        orgSelect,\n        personSelect,\n        ImportFile,\n        wlxzbyzsj\n    },\n    data () {\n        return {\n            list: null,\n            list1: null,\n            theight: 0,\n            stheight: 0,//右子表高度\n            tableKey: [0, 1],//表格索引，虚拟dom渲染表格时使用\n            total: 0,\n            total1: 0,\n            listQuery: {\n                currentPage: 1,\n                pageSize: 15,\n                orgName: undefined,\n                warehouseCode: undefined\n            },\n            listQuery1: {\n                currentPage: 1,\n                pageSize: 15,\n                warehouseCode: undefined,\n                orgCode: undefined,\n                stockEmpName: undefined,\n                stockEmp: undefined,\n            },\n\n            dtos1: {\n                warehouseCode: undefined,\n                materielCode: undefined,\n                materielName: undefined,\n                stockEmp: undefined,\n                stockEmpName: undefined,\n                goodsReadyEmp: undefined,\n                goodsReadyEmpName: undefined,\n                materialputEmp: undefined,\n                materialputEmpName: undefined,\n                state: undefined,\n                orgName: undefined,\n                orgCode: undefined\n            },\n            dtoscssz: {\n                stockEmp: undefined,\n                stockEmpName: undefined,\n                goodsReadyEmp: undefined,\n                goodsReadyEmpName: undefined,\n                materialputEmp: undefined,\n                materialputEmpName: undefined,\n                rowIds: [],\n                warehouseCode: undefined\n            },\n            parentsRows3: [],\n            parentsRows2: null,\n            temp: {\n                orgName: undefined,\n                warehouseCode: undefined,\n                warehouseName: undefined,\n                purchaseName: undefined,\n                materielCode: undefined,\n                materielName: undefined,\n                storeman: undefined,\n                stockman: undefined,\n                feeder: undefined\n            },\n            locationDialogVisible: false,\n            dialogFormVisible: false,\n            dialogFormVisible1: false,\n            dialogFormVisible2: false,\n            gysxzDialogFormVisible: false,\n            materielDialogFormVisible: false,\n            bgPersonnelDialogFormVisible: false,\n            blPersonnelDialogFormVisible1: false,\n            tlPersonnelDialogFormVisible2: false,\n            importDialogVisible: false,//导入弹框\n            modalNo: 'EXTP-BAS-0001',//导入模板编号\n            dialogStatus: \"\",\n            // DICT_CODE: DICT_CODE,\n            DT_ORG_TYPE: DT_ORG_TYPE,\n            // TWO_STATE_OPTIONS: TWO_STATE_OPTIONS,\n            rules: {}\n        }\n    },\n    created () {\n        this.getList()\n    },\n    mounted () {\n        this.setTableHeight()\n        //表格高度自适应\n        window.onresize = () => {\n            this.setTableHeight()\n        }\n        this.getList()\n    },\n    methods: {\n        getList () {//查询组织\n            api1.queryRecords(this.listQuery).then(res => {\n                this.list = res.data.list\n                this.total = res.data.pages.count\n            })\n        },\n        //表格高度计算\n        setTableHeight () {\n            this.theight = this.$myFun.getSingleTbHeight() + 55\n            this.stheight = this.theight - 42\n        },\n        getList1 () {//查询仓库物料\n            this.listQuery1.warehouseCode = this.selectlistRow.warehouseCode\n            this.listQuery1.orgCode = this.selectlistRow.orgCode\n            api.queryRecords(this.listQuery1).then(res => {\n                console.log(res, '9')\n                this.list1 = res.data.list\n                // console.log(this.list)\n                this.total1 = res.data.pages.count\n            })\n        },\n\n        handleCreate () {//新增方法\n            this.resetTemp()\n            if (this.selectlistRow) {\n                this.dialogStatus = \"create\"\n                this.temp.warehouseCode = this.selectlistRow.warehouseCode\n                this.temp.warehouseName = this.selectlistRow.warehouseName\n                this.dialogFormVisible = true\n            } else {\n                this.$message({\n                    title: \"警告\",\n                    message: \"请选择一条信息\",\n                    type: \"warning\"\n                })\n            }\n        },\n        create () {//新增方法\n            // this.dtos.warehouseCode=this.temp.warehouseCode\n            // this.dtos.materielCode=this.temp.materielCode\n            // this.dtos.materielName=this.temp.materielName\n            // this.dtos.stockEmpName=this.temp.stockEmpName\n            // this.dtos.goodsReadyEmpName=this.temp.goodsReadyEmpName\n            // this.dtos.materialputEmpName=this.temp.materialputEmpName\n            // this.dtos.state=this.temp.state\n            // this.dtos.orgName=this.selectlistRow.orgName\n            // this.dtos.orgCode=this.selectlistRow.orgCode\n            // this.dtos=this.temp\n            api.addRecord(this.temp).then(() => {\n                this.getList1()\n                this.dialogFormVisible = false\n                this.$notify({\n                    title: \"成功\",\n                    message: \"新增成功\",\n                    type: \"success\",\n                    duration: 2000\n                })\n                this.$refs.xz.qx()\n            })\n        },\n        handleUpdate () {//编辑方法\n            this.resetTemp()\n            if (this.selectlistRow2 && this.selectlistRow2.length == 1) {\n                this.dialogStatus = \"update\"\n                this.temp = this.selectlistRow2[0]\n                this.dialogFormVisible = true\n            } else {\n                this.$message({\n                    title: \"警告\",\n                    message: \"请选择一条信息\",\n                    type: \"warning\"\n                })\n            }\n        },\n        update () {//编辑方法\n            // this.dtos1.warehouseCode=this.temp.warehouseCode\n            // this.dtos1.warehouseName=this.temp.warehouseName\n            // this.dtos1.materielCode=this.temp.materielCode\n            // this.dtos1.materielName=this.temp.materielName\n            // this.dtos1.stockEmp=this.selectlistRow2[0].stockEmp\n            // this.dtos1.stockEmpName=this.temp.stockEmpName\n            // this.dtos1.goodsReadyEmp=this.selectlistRow2[0].goodsReadyEmp\n            // this.dtos1.goodsReadyEmpName=this.temp.goodsReadyEmpName\n            // this.dtos1.materialputEmp=this.selectlistRow2[0].materialputEmp\n            // this.dtos1.materialputEmpName=this.temp.materialputEmpName\n            // this.dtos1.state=this.temp.state\n            // this.dtos1.orgCode=this.selectlistRow2[0].orgCode\n            // this.dtos1.orgName=this.selectlistRow2[0].orgName\n            this.dtos1 = this.selectlistRow2[0]\n            api.updateRecord(this.selectlistRow2[0].rowId, this.dtos1).then(() => {\n                this.getList1()\n                this.dialogFormVisible = false\n                this.$notify({\n                    title: \"成功\",\n                    message: \"编辑成功\",\n                    type: \"success\",\n                    duration: 2000\n                })\n                this.$refs.xz.qx()\n            })\n        },\n        handleDelete () {//删除方法\n            if (this.selectlistRow2 && this.selectlistRow2.length == 1) {\n                this.$confirm(\"此操作将永久删除该文件，是否继续?\", \"提示\", {\n                    confirmButtonText: \"确定\",\n                    cancelButtonText: \"取消\",\n                    type: \"warning\"\n                }).then(() => {\n                    api.deleteRecord(this.selectlistRow2[0].rowId).then(() => {\n                        this.getList1()\n                        this.$notify({\n                            title: \"成功\",\n                            message: \"删除成功\",\n                            type: \"success\",\n                            duration: 2000\n                        })\n                    })\n                }).catch(() => {\n                    this.$message({\n                        type: \"info\",\n                        message: \"已取消删除\"\n                    })\n                })\n            } else {\n                this.$message({\n                    title: \"警告\",\n                    message: \"请选择一条信息\",\n                    type: \"warning\"\n                })\n            }\n        },\n        handleSet () {//参数设置\n            // this.resetTemp()\n            if (this.selectlistRow2 && this.selectlistRow2.length > 0) {\n                this.dialogStatus = \"createcssz\"\n                this.temp.stockEmpName = this.selectlistRow2[0].stockEmpName\n                this.temp.goodsReadyEmpName = this.selectlistRow2[0].goodsReadyEmpName\n                this.temp.materialputEmpName = this.selectlistRow2[0].materialputEmpName\n                this.dialogFormVisible1 = true\n            } else {\n                this.$message({\n                    title: \"警告\",\n                    message: \"请选择信息\",\n                    type: \"warning\"\n                })\n            }\n        },\n        createcssz () { //参数设置\n            let b = this.selectlistRow2.map(v => {\n                return v.rowId\n            })\n            this.dtoscssz.rowIds = b\n            this.dtoscssz.stockEmp = this.selectlistRow2[0].stockEmp\n            this.dtoscssz.stockEmpName = this.temp.stockEmpName\n            this.dtoscssz.goodsReadyEmp = this.selectlistRow2[0].goodsReadyEmp\n            this.dtoscssz.goodsReadyEmpName = this.temp.goodsReadyEmpName\n            this.dtoscssz.materialputEmp = this.selectlistRow2[0].materialputEmp\n            this.dtoscssz.materialputEmpName = this.temp.materialputEmpName\n            api.updateRecordcssz(this.dtoscssz).then(() => {\n                this.getList1()\n                this.dialogFormVisible1 = false\n                this.$notify({\n                    title: \"成功\",\n                    message: \"编辑成功\",\n                    type: \"success\",\n                    duration: 2000\n                })\n            })\n        },\n        handleLead () {//导入\n            this.importDialogVisible = true\n            this.$nextTick(() => {\n                this.$refs.importDialog.getList()\n            })\n        },\n        handlegPersonnel () {//业务人员（保管员）\n            this.bgPersonnelDialogFormVisible = true\n        },\n        handlegPersonnel1 () {//业务人员（备料员）\n            this.blPersonnelDialogFormVisible1 = true\n            //  this.$refs.ww1.dd1()\n        },\n        handlegPersonnel2 () {//业务人员（投料员）\n            this.tlPersonnelDialogFormVisible2 = true\n            // this.$refs.ww2.dd1()\n        },\n        purchasingPersonnels (row) { //业务人员选中行\n            this.parentsRows3 = row\n        },\n        handSelectRows1 (row) { //物料信息选中行\n            this.parentsRows2 = row\n        },\n        mydata () { },\n        handleCreatewl () {//新增物料弹窗\n            if (this.selectlistRow) {\n                this.dialogStatus = \"update1\"\n                this.gysxzDialogFormVisible = true\n                this.$nextTick(function () {\n                    this.$refs.wlxzQMRef.getList()\n                })\n            } else {\n                this.$message({\n                    title: \"警告\",\n                    message: \"请选择一条信息\",\n                    type: \"warning\"\n                })\n            }\n        },\n        handleClickMateriel () {//新增\n            //  this.$refs.xz.qx();\n            this.gysxzDialogFormVisible = true\n            this.$nextTick(function () {\n                this.$refs.wlxzQMRef.getList()\n            })\n        },\n\n        update1 () {//新增物料确认按钮\n            if (this.$refs.wlxzQMRef.listSelected.length) {\n                // this.temp.supplierCode = this.parentsRows3[0].employeeCode;\n                let a = this.$refs.wlxzQMRef.listSelected.map(v => {\n                    v.orgCode = this.selectlistRow.orgCode\n                    v.orgName = this.selectlistRow.orgName\n                    v.warehouseCode = this.selectlistRow.warehouseCode\n                    return v\n                })\n                console.log(a, \"999\")\n                api.addRecord1(a).then(() => {\n                    this.getList1()\n                    this.gysxzDialogFormVisible = false\n                    this.$notify({\n                        title: \"成功\",\n                        message: \"新增成功\",\n                        type: \"success\",\n                        duration: 2000\n                    })\n                    this.$refs.xz.qx()\n                })\n            } else {\n                this.$message({\n                    title: \"警告\",\n                    message: \"请选择一条信息\",\n                    type: \"warning\"\n                })\n            }\n        },\n        update2 () {//新增中物料编码弹窗确认按钮\n            if (this.$refs.wlxzQMRef.listSelected.length == 1) {\n                this.temp.orgCode = this.selectlistRow.orgCode\n                this.temp.orgName = this.selectlistRow.orgName\n                this.temp.materielCode = this.$refs.wlxzQMRef.listSelected[0].materielCode\n                this.temp.materielName = this.$refs.wlxzQMRef.listSelected[0].materielName\n                this.gysxzDialogFormVisible = false\n            } else {\n                this.$message({\n                    title: \"警告\",\n                    message: \"请选择一条信息\",\n                    type: \"warning\"\n                })\n            }\n        },\n        update3 () {//保管员中弹窗确认按钮\n            if (this.dialogFormVisible || this.dialogFormVisible1) {\n                if (!this.parentsRows3[0]) {\n                    this.temp.stockEmpName = \"\"\n                    this.temp.stockEmp = \"\"\n                    this.bgPersonnelDialogFormVisible = false\n                } else {\n                    this.temp.stockEmpName = this.parentsRows3[0].employeeName\n                    this.temp.stockEmp = this.parentsRows3[0].employeeCode\n                    this.bgPersonnelDialogFormVisible = false\n                }\n            } else {\n                if (!this.parentsRows3[0]) {\n                    this.listQuery1.stockEmpName = \"\"\n                    this.listQuery1.stockEmp = \"\"\n                    this.temp.stockEmpName = \"\"\n                    this.bgPersonnelDialogFormVisible = false\n                } else {\n                    this.listQuery1.stockEmp = this.parentsRows3[0].employeeCode\n                    this.listQuery1.stockEmpName = this.parentsRows3[0].employeeName\n                    this.temp.stockEmpName = \"\"\n                    this.bgPersonnelDialogFormVisible = false\n                }\n\n            }\n        },\n        update4 () {//备料员中弹窗确认按钮\n            if (this.dialogFormVisible || this.dialogFormVisible1) {\n                if (!this.parentsRows3[0]) {\n                    this.temp.goodsReadyEmpName = \"\"\n                    this.temp.goodsReadyEmp = \"\"\n                    this.blPersonnelDialogFormVisible1 = false\n\n                } else {\n                    this.temp.goodsReadyEmpName = this.parentsRows3[0].employeeName\n                    this.temp.goodsReadyEmp = this.parentsRows3[0].employeeCode\n                    this.blPersonnelDialogFormVisible1 = false\n                }\n            } else {\n                if (!this.parentsRows3[0]) {\n                    this.listQuery1.goodsReadyEmp = \"\"\n                    this.listQuery1.goodsReadyEmpName = \"\"\n                    this.temp.goodsReadyEmpName = \"\"\n                    this.blPersonnelDialogFormVisible1 = false\n                } else {\n                    this.listQuery1.goodsReadyEmp = this.parentsRows3[0].employeeCode\n                    this.listQuery1.goodsReadyEmpName = this.parentsRows3[0].employeeName\n                    this.temp.goodsReadyEmpName = \"\"\n                    this.blPersonnelDialogFormVisible1 = false\n                }\n            }\n        },\n\n        update5 () {//投料员中弹窗确认按钮\n\n            if (this.dialogFormVisible || this.dialogFormVisible1) {\n                if (!this.parentsRows3[0]) {\n                    this.temp.materialputEmpName = \"\"\n                    this.temp.materialputEmp = \"\"\n                    this.tlPersonnelDialogFormVisible2 = false\n                } else {\n                    this.temp.materialputEmpName = this.parentsRows3[0].employeeName\n                    this.temp.materialputEmp = this.parentsRows3[0].employeeCode\n                    this.tlPersonnelDialogFormVisible2 = false\n                }\n            } else {\n                if (!this.parentsRows3[0]) {\n                    this.listQuery1.materialputEmp = \"\"\n                    this.listQuery1.materialputEmpName = \"\"\n                    this.temp.materialputEmpName = \"\"\n                    this.tlPersonnelDialogFormVisible2 = false\n                } else {\n                    this.listQuery1.materialputEmp = this.parentsRows3[0].employeeCode\n                    this.listQuery1.materialputEmpName = this.parentsRows3[0].employeeName\n                    this.temp.materialputEmpName = \"\"\n                    this.tlPersonnelDialogFormVisible2 = false\n                }\n\n            }\n\n\n        },\n        handleQuery () {\n            this.listQuery.currentPage = 1\n            this.getList()\n        },\n        handleQuerysub () {\n            this.getList1()\n        },\n        handleSizeChange (val) {\n            this.listQuery.pageSize = val\n            this.getList()\n        },\n        handleCurrentChange (val) {\n            this.listQuery.currentPage = val\n            this.getList()\n        },\n        handleClose () {\n            this.resetTemp()\n            this.$refs.temp.resetFields()\n        },\n        selectRow (val) {//表一复选框选中方法\n            this.selectlistRow = val[val.length - 1]\n            if (val.length > 1) {\n                this.$refs.tb.clearSelection()\n                this.$refs.tb.toggleRowSelection(val.pop())\n            }\n            this.$refs.tb.setCurrentRow(this.selectlistRow)\n            if (this.selectlistRow) {\n                this.getList1()\n            }\n        },\n\n        selectRow1 (val) {//表一单击行选中方法\n            this.selectlistRow1 = val\n            this.$refs.tb.clearSelection()\n            this.$refs.tb.toggleRowSelection(val) //单击行绑定点击事件\n        },\n        selectRow2 (val) {//表二复选框选中方法\n            this.selectlistRow2 = val\n        },\n\n        resetTemp () {\n            this.temp = {\n                materielCode: undefined,\n                materielName: undefined,\n                warehouseCode: undefined,\n                warehouseName: undefined,\n                state: 1,\n                stockEmpName: undefined,\n                goodsReadyEmpName: undefined,\n                materialputEmpName: undefined\n            }\n        }\n    }\n};\n",null]}