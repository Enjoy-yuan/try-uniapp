{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/newProducts/newDevelopmentPlan/planFeedback/content/projectPlan.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/newProducts/newDevelopmentPlan/planFeedback/content/projectPlan.vue","mtime":1596611178277},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { DICT_CODE } from '@/utils/constant'\nimport caiGou from '@/components/Select/xtpt/caigou'//下拉组件\nimport Pagination from \"@/components/Pagination\"\nimport { mapState } from \"vuex\"\nimport dialogWlxzbyzsj from '@/components/Dialog/dialogWlxzbyzsj.vue'//主数据物料选择\nimport dialogGysxz from '@/components/Dialog/dialogsGysxz'//供应商选择\nimport itemCodeSelect from '@/components/Dialog/itemCodeSelect'//项目号选择\nexport default {\n    name: \"developmentPlan\",\n    components: { caiGou, Pagination, dialogWlxzbyzsj, dialogGysxz, itemCodeSelect },\n    data () {\n        return {\n            rangeDate: null,\n            DICT_CODE: DICT_CODE,\n            modalnum: null,//模板编号，非模板页面可删\n            theight: 0,//表格高度\n            isSingle: true,//表格是否单选 点击各按钮根据流程逻辑控制单多选\n            list: [],\n            total: 0,\n            publishTime: '',\n            dialogVisible: false,\n            dialogItemVisible: false,\n            dialogAddVisible: false,\n            listQuery: {\n                //查询\n                page: true,\n                currentPage: 1,\n                pageSize: 15\n            },\n            currentSelectedRow: null,//当前选中的行\n            selectedRows: null,//多选时选中的所有行\n            tableKey: 0 //表格索引\n        }\n    },\n    created () { },\n    computed: {\n        ...mapState({\n            dt_srm_p0: state => state.dict.dt_srm_p0\n        })\n    },\n    watch: {\n        'rangeDate' (value) {\n            if (value) {\n                this.listQuery.createTimeStart = value[0]\n                this.listQuery.createTimeEnd = value[1]\n            } else {\n                this.listQuery.createTimeStart = undefined\n                this.listQuery.createTimeEnd = undefined\n            }\n        },\n    },\n    mounted () {\n        this.$store.dispatch(\"dict/getDicData\", [\"dt_srm_p0\"])\n        this.setTableHeight()\n        //表格高度自适应\n        window.onresize = () => {\n            this.setTableHeight()\n        }\n        this.getList()\n    },\n    methods: {\n        //表格高度计算\n        setTableHeight () {\n            this.theight = this.$myFun.getSingleTbHeight()\n        },\n        //获取表格数据\n        getList () {\n            this.list = [{\n                state: '确认主计划', rowId: '1', orgCode: '乘用车采购部', materialCode: 'K9-1999',\n                materialName: 'K9-1999', itemCode: 'TEST0001', itemName: 'X7项目', carType: 'X7',\n                supplierCode: '429991', supplierName: '湖北中生电器有限公司', editor: 'srm', requireTime: '2019-7-23 10:36:31',\n                publishTime: '2019-7-23 10:36:31', actualTime: '2019-7-23 10:36:31'\n            }, {\n                state: '新增大时程计划', rowId: '2', orgCode: '乘用车采购部', materialCode: 'LJMK20180529',\n                materialName: 'LJMK20180529', itemCode: 'ST00909', itemName: '景逸X6', carType: '景逸X6',\n                supplierCode: '310127', supplierName: '联合汽车电子有限公司', editor: 'srm', requireTime: '2019-7-23 10:36:31',\n                publishTime: '2019-7-23 10:36:31', actualTime: '2019-7-23 10:36:31'\n            }]\n        },\n        //表格查询\n        handleQuery () {\n            this.listQuery.currentPage = 1\n            this.getList()\n        },\n        //表格显示条数变化\n        handleSizeChange (val) {\n            this.listQuery.pageSize = val\n            this.getList()\n        },\n        //表格当前页变化\n        handleCurrentChange (val) {\n            this.listQuery.currentPage = val\n            this.getList()\n        },\n        handleMaterial () {\n            this.$refs.refZsjWlxz.dialogVisible = true\n        },\n        confirmMateriel (val) {\n            console.log(val, 'val')\n            this.listQuery.materielCode = val[0].materialCode\n            this.listQuery.materielName = val[0].materialName\n        },\n        showGys () {\n            this.$refs.refGys.dialogVisible = true\n            this.$refs.refGys.getList()\n        },\n        //供应商选择确定\n        handleGysClick (val) {\n            console.log(val)\n            this.$set(this.listQuery, 'supplierName', val[0].supplierName)\n            this.$set(this.listQuery, 'supplierCode', val[0].supplierCode)\n        },\n        //项目号选择\n        handleItemCode () {\n            this.$refs.itemCode.dialogVisible = true\n            this.$refs.itemCode.getList()\n\n        },\n        handleItemClick (val) {\n            console.log(val)\n            this.$set(this.listQuery, 'itemName', val[0].itemName)\n            this.$set(this.listQuery, 'itemCode', val[0].itemCode)\n        },\n        handleInput () {\n            //大时程计划录入单击事件方法\n            this.$emit('setState', 'create', '')\n        },\n        handleReject () {\n            //驳回主计划\n        },\n        handleConfrim () {\n            //确认主计划\n        },\n        handlePublish () {\n            //大时程计划发布\n        },\n        handleUpdate () {\n            //编辑按钮单击事件方法\n            this.$emit('setState', 'update', '')\n        },\n        handleSearch () {\n            //查\n            this.$emit('setState', 'create', '')\n        },\n        handleGantt () {\n            //甘特\n\n        },\n        handleDelete () {\n            //删除按钮单击事件方法\n        },\n        handleConfirm () { //物料选择弹框确定按钮单击事件\n            if (this.$refs.wlxz.listSelected && this.$refs.wlxz.listSelected.length > 0) {\n                this.listQuery.materialCode = this.$refs.wlxz.listSelected[0].materielCode\n                this.dialogVisible = false\n            } else {\n                this.listQuery.materialCode = ''\n                this.dialogVisible = false\n            }\n\n        },\n        handleItemConfirm () { //项目号弹窗确定按钮单击事件\n            if (this.$refs.item.listSelected && this.$refs.item.listSelected.length > 0) {\n                this.listQuery.itemCode = this.$refs.item.listSelected[0].itemCode\n                this.dialogItemVisible = false\n            } else {\n                this.listQuery.itemCode = ''\n                this.dialogItemVisible = false\n            }\n        },\n        // 表格选择框选中 注:参数为选中的所有行的数组\n        selectChange (val) {\n            if (this.isSingle) {\n                if (val.length > 1) {\n                    this.$refs.tb.clearSelection() //清除其他行的选中\n                    this.$refs.tb.toggleRowSelection(val[val.length - 1], \"selected\") //单击行绑定点击事件\n                } else if (val.length === 1) {\n                    this.selectedRows = val\n                    this.currentSelectedRow = val[val.length - 1]\n                }\n            } else {\n                this.selectedRows = val\n                this.currentSelectedRow = val[val.length - 1]\n            }\n        },\n        //点击表格某一行\n        rowClick (val) {\n            this.$refs.tb.toggleRowSelection(val, \"selected\") //单击行绑定点击事件\n        }\n    }\n};\n",null]}