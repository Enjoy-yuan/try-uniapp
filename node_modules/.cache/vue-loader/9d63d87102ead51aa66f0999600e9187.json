{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/information/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/information/index.vue","mtime":1603329739766},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as api from '@/api/data-base/color'\nimport Pagination from '@/components/Pagination'\nimport addMain from './dialog/addMain'\nexport default {\n    name: 'information',\n    components: { Pagination, addMain },\n    data () {\n        return {\n            list: null,\n            total: 0,\n            theight: 0, //表格高度\n            listQuery: {\n                page: true,\n                currentPage: 1,\n                pageSize: 15,\n                colorCode: undefined,\n                colorName: undefined\n            },\n            temp: {\n                colorCode: undefined,\n                colorName: undefined,\n                colorAbbreviation: undefined,\n                state: 1,\n                remark: undefined\n            },\n            colorCode: undefined,\n            selectCode: [],\n            dialogFormVisible: false,\n            dialogStatus: '',\n            tableKey: 0,\n        }\n    },\n    created () {\n        this.getList()\n    },\n    mounted () {\n        this.setTableHeight()\n        //表格高度自适应\n        window.onresize = () => {\n            this.setTableHeight()\n        }\n\n        window.setInterval(() => {\n            setTimeout(() => {\n                ///调取接口获取数据\n                this.getList()\n            }, 0)\n        }, 30000)\n    },\n    methods: {\n        handleSearch (index, row) {\n            console.log(index, row)\n            this.$refs.addMain.temp = { ...row }\n            this.$refs.addMain.dialogVisible = true\n        },\n        getList () {\n            api.queryRecords(this.listQuery).then(res => {\n                this.list = res.data.list\n                this.total = res.data.pages.count\n            })\n        },\n        handleRead () {\n            if (this.selectlistRow && this.selectlistRow.length > 0) {\n                this.$confirm('此操作将读取该文件, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                })\n                    .then(() => {\n                        // let ids = []\n                        // this.selectlistRow.forEach((val, index) => {\n                        //     ids[index] = val.colorCode\n                        // })\n                        // api.deleteRecord(ids).then(() => {\n                        //     this.getList(),\n                        //         this.$message({\n                        //             title: '成功',\n                        //             message: '删除成功',\n                        //             type: 'success',\n                        //             duration: 2000\n                        //         })\n                        // })\n                    })\n                    .catch(() => {\n                        this.$message({\n                            type: 'info',\n                            message: '已取消已读'\n                        })\n                    })\n            } else {\n                this.$message({\n                    title: '警告',\n                    message: '请选择信息',\n                    type: 'warning'\n                })\n            }\n        },\n        //表格高度计算\n        setTableHeight () {\n            this.theight = this.$myFun.getSingleTbHeight()\n        },\n        handleQuery () {\n            //查询\n            this.listQuery.currentPage = 1\n            this.getList()\n        },\n\n        // 获取表格选中时的数据\n        selectRow (val) {\n            this.selectlistRow = val\n        },\n    }\n}\n",null]}