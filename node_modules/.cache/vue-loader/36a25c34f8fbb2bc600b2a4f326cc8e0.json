{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/qualificationEnergyReport/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/EMS/energyReport/qualificationEnergyReport/index.vue","mtime":1596610933525},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as api from '@/api/project/ems/energyReport/index.js'\nimport Pagination from '@/components/Pagination'\nexport default {\n    name: 'qualificationEnergyReport', //能源质量合格率统计\n    components: { Pagination },\n    data () {\n        return {\n            pickerOptions: {\n                onPick: ({ maxDate, minDate }) => {\n                    this.selectDate = minDate.getTime()\n                    if (maxDate) {\n                        this.selectDate = ''\n                    }\n                }, disabledDate: (time) => {\n                    if (this.selectDate !== '') {\n                        const one = 31 * 24 * 3600 * 1000\n                        const minTime = this.selectDate - one\n                        const maxTime = this.selectDate + one\n                        return time.getTime() < minTime || time.getTime() > maxTime\n                    }\n                }\n            },\n            theight: 0, //表格高度\n            isSingle: true, //表格是否单选 点击各按钮根据流程逻辑控制单多选\n            list: [],\n            total: 0,\n            dataTime: undefined,\n            listQuery: {\n                //查询\n                beginTime: undefined,\n                endTime: undefined,\n                page: true,\n                currentPage: 1,\n                pageSize: 15\n            },\n            currentSelectedRow: null, //当前选中的行\n            selectedRows: null, //多选时选中的所有行\n            selectlistRow: null,\n            tableKey: 0 //表格索引\n        }\n    },\n    mounted () {\n        this.setTableHeight()\n        //表格高度自适应\n        window.onresize = () => {\n            this.setTableHeight()\n        }\n        this.getList()\n    },\n    destroyed () {\n        this.setTableHeight()\n        this.getList()\n    },\n    methods: {\n        //表格高度计算\n        setTableHeight () {\n            this.theight = this.$myFun.getSingleTbHeight()\n        },\n        //获取表格数据\n        getList () {\n            if (this.dataTime) {\n                this.listQuery.beginTime = this.TimeTranslate(this.dataTime[0])\n                this.listQuery.endTime = this.TimeTranslate(this.dataTime[1])\n            }\n\n            api.qualificationEnergy(this.listQuery).then(response => {\n                response.data.list.map((v, i) => {\n                    v.serial = i + 1\n                })\n                this.list = response.data.list\n                this.total = response.data.pages.count\n            })\n        },\n        deleteQuery () {\n            // 清除查询条件\n            this.dataTime = undefined\n            this.listQuery.beginTime = undefined  //level_step\n            this.listQuery.endTime = undefined\n            this.getList()\n        },\n        //标准时间转换\n        TimeTranslate (date) {\n            var y = date.getFullYear()\n            var m = date.getMonth() + 1\n            m = m < 10 ? '0' + m : m\n            var d = date.getDate()\n            d = d < 10 ? '0' + d : d\n            return y + '-' + m + '-' + d\n        },\n\n        //表格查询\n        handleQuery () {\n            this.listQuery.currentPage = 1\n            this.getList()\n        },\n        //表格显示条数变化\n        handleSizeChange (val) {\n            this.listQuery.pageSize = val\n            this.getList()\n        },\n        //表格当前页变化\n        handleCurrentChange (val) {\n            this.listQuery.currentPage = val\n            this.getList()\n        },\n        //点击表格某一行\n        rowClick (val) {\n            this.$refs.tb.toggleRowSelection(val, 'selected') //单击行绑定点击事件\n        },\n        handleClose () {\n            this.resetTemp()\n            this.$refs.temp.resetFields()\n        }\n    }\n}\n",null]}