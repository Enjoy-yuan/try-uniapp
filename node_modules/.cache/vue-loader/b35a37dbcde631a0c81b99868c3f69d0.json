{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/login/index.vue","mtime":1603419967572},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getTheme } from '@/utils/auth'\nexport default {\n    data() {\n        return {\n            formData: {\n                username: '',\n                password: '',\n                checked: false\n            },\n            loading: false,\n            redirect: '',\n            otherQuery: {},\n            rules: {\n                username: [{ required: true, message: '请输入用户名', trigger: 'blur' }],\n                password: [\n                    { required: true, message: '请输入密码', trigger: 'blur' },\n                    { min: 6, max: 12, message: '密码长度必须为 6 到 12 个字符', trigger: 'blur' }\n                ]\n            }\n        }\n    },\n    mounted() {\n        // 获取主题色\n        if (getTheme()) {\n            document.getElementsByClassName('el-button--primary')[0].style.backgroundColor = getTheme()\n        }\n    },\n    methods: {\n        // changeChecked() {\n        //     // 获取主题色\n        //     if (getTheme()) {\n        //         if (this.formData.checked) {\n        //             document.getElementsByClassName('el-checkbox__label')[0].style.color = getTheme()\n        //             document.getElementsByClassName('el-checkbox__inner')[0].style.backgroundColor = getTheme()\n        //             document.getElementsByClassName('el-checkbox__inner')[0].style.borderColor = getTheme()\n        //         } else {\n        //             document.getElementsByClassName('el-checkbox__label')[0].style.color = '#606266'\n        //             document.getElementsByClassName('el-checkbox__inner')[0].style.backgroundColor = '#fff'\n        //             document.getElementsByClassName('el-checkbox__inner')[0].style.borderColor = '#DCDFE6'\n        //         }\n        //     }\n        // },\n        login() {\n            this.$refs.form.validate((valid) => {\n                if (valid) {\n                    this.loading = true\n                    this.$store\n                        .dispatch('user/LoginByUsername', {\n                            username: this.formData.username,\n                            password: this.formData.password\n                        })\n                        .then(() => {\n                            let queryData = this.$route.query\n                            let redirectUrl = queryData.redirect\n                            delete queryData.redirect\n                            this.$router.push({\n                                path: redirectUrl || '/',\n                                query: queryData\n                            })\n                            this.loading = false\n                        })\n                        .catch(() => {\n                            this.loading = false\n                        })\n                } else {\n                    console.log('error submit!!')\n                    return false\n                }\n            })\n        }\n    }\n}\n",null]}