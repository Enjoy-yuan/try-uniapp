{"remainingRequest":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/contractManage/supplierPerformance/dailyEvaluation/evaluationFormat/dialog/setModel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/dt-web/src/views/project/SRM/contractManage/supplierPerformance/dailyEvaluation/evaluationFormat/dialog/setModel.vue","mtime":1597628790263},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/dt-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as api from \"@/api/project/srm/contractManage/evaluationModel\"\nimport { mapState } from 'vuex'\nimport dialogPersonSelect from '@/components/Dialog/dialogPersonSelect.vue'//选择人\nexport default {\n    props: ['isSingle'],\n    components: { dialogPersonSelect },\n    data () {\n        return {\n            dataIndex: null,\n            dialogVisible: false,\n            listSelected: null,\n            tableKey: 0,\n            list: null,\n            listQuery: {}\n\n        }\n    },\n    computed: {\n        ...mapState({\n            dt_srm_pak: state => state.dict.dt_srm_pak,\n            dt_srm_pb1: state => state.dict.dt_srm_pb1,\n            dt_srm_pb2: state => state.dict.dt_srm_pb2,\n            dt_srm_pb5: state => state.dict.dt_srm_pb5,\n            dt_srm_pb4: state => state.dict.dt_srm_pb4,\n            dt_srm_pas: state => state.dict.dt_srm_pas,\n\n        })\n    },\n    mounted () {\n        this.$store.dispatch('dict/getDicData', ['dt_srm_pak', 'dt_srm_pb1', 'dt_srm_pb2', 'dt_srm_pb5', 'dt_srm_pb4', 'dt_srm_pas'])\n        if (this.dt_srm_pb4) {\n            this.getList()\n        }\n    },\n    watch: {\n        // 'dt_srm_pb4' (val) {\n        //     if (val) {\n        //         this.listQuery.parentCode = 'root'\n        //         this.listQuery.method = 'configure'\n        //         api.queryRecordTree(this.listQuery).then(res => {\n        //             this.list = val.map(v => {\n        //                 res.data.forEach(item => {\n        //                     if (v.dictItemValue == item.name) {\n        //                         v.versionCode = item.classificationCode\n        //                     }\n        //                 })\n        //                 return v\n        //             })\n        //         })\n        //     }\n        // }\n    },\n    methods: {\n        checked (i) {\n            console.log(1111)\n            this.$refs.tb.toggleRowSelection(this.list[i], true)\n        },\n        getList () {\n            console.log(this.dt_srm_pb4, 'this.dt_srm_pb4')\n            this.listQuery.parentCode = 'root'\n            this.listQuery.method = 'configure'\n            api.queryRecordTree(this.listQuery).then(res => {\n                this.list = this.dt_srm_pb4.map(v => {\n                    res.data.forEach(item => {\n                        if (v.dictItemValue == item.name) {\n                            v.versionCode = item.classificationCode\n                        }\n                    })\n                    return v\n                })\n                if (this.listSelected) {\n                    this.listSelected.forEach(items => {\n                        this.list.forEach((item, index) => {\n                            if (item.dictItemKey === items.dictItemKey) {\n                                this.$nextTick(function () {\n                                    this.checked(index)\n                                })\n                            }\n                        })\n                    })\n                }\n            })\n        },\n        showPerson (index, val) {\n            console.log(index, val)\n            this.$refs.person.dialogVisible = true\n            this.dataIndex = index\n        },\n        personConfirm (val) {\n            this.$set(this.list[this.dataIndex], 'evaluationPerson', val[0].employeeName)\n            console.log(val)\n        },\n        handleConfirm () {\n            if (this.selectlistRow) {\n                this.$emit('handleConfirm', this.selectlistRow)\n                this.dialogVisible = false\n            } else {\n                this.$message({\n                    title: \"警告\",\n                    message: \"请勾选记录\",\n                    type: \"warning\"\n                })\n            }\n        },\n        selectChange (val) {\n            if (this.isSingle) {\n                this.selectlistRow = val[val.length - 1]\n                if (val.length > 1) {\n                    this.$refs.tb.clearSelection()\n                    this.$refs.tb.toggleRowSelection(val.pop())\n                }\n                this.$refs.tb.setCurrentRow(this.selectlistRow)\n            } else {\n                this.selectlistRow = val\n            }\n\n        },\n        //点击表格某一行\n        rowClick (val) {\n            if (this.isSingle) {\n                this.$refs.tb.clearSelection() //清除其他行的选中\n            }\n            this.$refs.tb.toggleRowSelection(val, \"selected\") //单击行绑定点击事件\n        },\n    }\n}\n",null]}