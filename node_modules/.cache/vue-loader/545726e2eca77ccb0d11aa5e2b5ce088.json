{"remainingRequest":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuan/Documents/大唐广电/cf_web/src/views/data-base/materielTransferType/dialog/dialogAddMain.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuan/Documents/大唐广电/cf_web/src/views/data-base/materielTransferType/dialog/dialogAddMain.vue","mtime":1600927611453},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuan/Documents/大唐广电/cf_web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport { createRecords, updateRules, queryRecords } from \"@/api/data-base/material_transfer_type\";\nimport { mapState } from 'vuex';\n\nexport default {\n    name: 'addMain',\n    data () {\n        return {\n            booleanValue: [[{\n                value: 1,\n                label: '是'\n            }, {\n                value: 0,\n                label: '否'\n            }], [{\n                value: 1,\n                label: '+'\n            }, {\n                value: 0,\n                label: '-'\n            }]],\n            obList: [],//移动类型列表\n            referDataSourceList: [],//参照数据来源\n            AddMainlist: {\n                wareRuleCode: '',\n                wareRuleName: '',\n                statsClassify: '',\n                screenGroupNum: '',\n                isProdBatch: '',\n                isQcNotice: '',\n                refSources: '',\n                isSuperIndicaChk: '',\n                refUpdate: '',\n                isNegativeStockChk: '',\n                fetchStockStatArr: [],\n                fetchStockStat: '',\n                fetchStockTypeArr: [],\n                fetchStockType: '',\n                storeStockStat: '',\n                storeStockType: '',\n                isAccount: '',\n                accountField: '',\n                accountDirection: '',\n                bizTypeFlag: '',\n                isTrigProdInd: '',\n                isTrigAutoProof: '',\n                reversalBizType: '',\n                completedLink: '',\n                stockTypeValueMode: '',\n                wareLocationMode: '',\n                areaType: '',\n                isSingle: '',\n                isIntegration: '',\n                qcReceive: '',\n                unCheckReceive: '',\n                freeReceive: '',\n                interfaceNumber: '',\n                isReversal: '',\n                exoSystemBizType: '',\n            },\n            dialogStatus: 0,\n            dialogFormVisible: false,\n            rules: {\n                wareRuleCode: [\n                    { required: true, message: this.$t('validate.required'), trigger: 'blur' }\n                ],\n                wareRuleName: [\n                    { required: true, message: this.$t('validate.required'), trigger: 'blur' }\n                ]\n            }\n        }\n    },\n    created () {\n        this.referDataSourceList = [];\n    },\n    computed: {\n        ...mapState({\n            dt_statistic_type: state => state.dict.dt_statistic_type,\n            dt_referdata_resource: state => state.dict.dt_referdata_resource,\n            dt_stock_type: state => state.dict.dt_stock_type,\n            dt_stock_status: state => state.dict.dt_stock_status,\n            dt_businesstype_identity: state => state.dict.dt_businesstype_identity,\n            dt_account_field: state => state.dict.dt_account_field,\n            dt_stockType_valueMode: state => state.dict.dt_stockType_valueMode,\n            dt_location_match: state => state.dict.dt_location_match,\n            dt_whpartition_type: state => state.dict.dt_whpartition_type\n        })\n    },\n    mounted () {\n        this.$store.dispatch('dict/getDicData', ['dt_statistic_type', 'dt_referdata_resource', 'dt_stock_type', 'dt_stock_status', 'dt_businesstype_identity', 'dt_account_field', 'dt_stockType_valueMode', 'dt_location_match', 'dt_whpartition_type']);\n    },\n    methods: {\n        forceUpdateSel () {\n            this.$forceUpdate();\n        },\n        getAttrRule () {\n            queryRecords().then(res => {\n                this.obList = res.data;\n            })\n        },\n        addMainConfirm () {\n            this.$refs.AddMainlist.validate((valid) => {\n                if (valid) {\n                    this.$confirm('确认保存吗?', '提示', {\n                        confirmButtonText: '确定',\n                        cancelButtonText: '取消',\n                        type: 'warning'\n                    }).then(() => {\n                        if (this.AddMainlist.fetchStockStatArr.length) {\n                            this.AddMainlist.fetchStockStat = this.AddMainlist.fetchStockStatArr.join(',');\n                        } else {\n                            this.AddMainlist.fetchStockStat = '';\n                        }\n                        if (this.AddMainlist.fetchStockTypeArr.length) {\n                            this.AddMainlist.fetchStockType = this.AddMainlist.fetchStockTypeArr.join(',');\n                        } else {\n                            this.AddMainlist.fetchStockType = '';\n                        }\n                        let conData = Object.assign({}, this.AddMainlist);\n                        delete conData.fetchStockStatArr;\n                        delete conData.fetchStockTypeArr;\n                        createRecords(conData).then(() => {\n                            this.$message({\n                                type: 'success',\n                                message: '保存成功'\n                            });\n                            this.$emit('refreshTable')\n                            this.dialogFormVisible = false;\n                        });\n                    }).catch(() => {\n                        this.$message({\n                            type: 'info',\n                            message: '已取消'\n                        });\n                    });\n                } else {\n                    return false;\n                }\n            })\n        },\n        updateMainConfirm () {\n            this.$refs.AddMainlist.validate((valid) => {\n                if (valid) {\n\n                    this.$confirm('确认保存吗?', '提示', {\n                        confirmButtonText: '确定',\n                        cancelButtonText: '取消',\n                        type: 'warning'\n                    }).then(() => {\n                        if (this.AddMainlist.fetchStockStatArr.length) {\n                            this.AddMainlist.fetchStockStat = this.AddMainlist.fetchStockStatArr.join(',');\n                        } else {\n                            this.AddMainlist.fetchStockStat = '';\n                        }\n                        if (this.AddMainlist.fetchStockTypeArr.length) {\n                            this.AddMainlist.fetchStockType = this.AddMainlist.fetchStockTypeArr.join(',');\n                        } else {\n                            this.AddMainlist.fetchStockType = '';\n                        }\n                        let conData = Object.assign({}, this.AddMainlist);\n                        delete conData.fetchStockStatArr;\n                        delete conData.fetchStockTypeArr;\n                        updateRules(this.AddMainlist.wareRuleCode, this.AddMainlist).then(() => {\n                            this.$message({\n                                type: 'success',\n                                message: '保存成功'\n                            });\n                            this.$emit('refreshTable')\n                            this.dialogFormVisible = false;\n                        });\n                    }).catch(() => {\n                        this.$message({\n                            type: 'info',\n                            message: '已取消'\n                        });\n                    });\n                } else {\n                    return false\n                }\n            })\n        },\n        resetForm () {\n            setTimeout(() => {\n                console.log('11111', this.AddMainlist);\n                this.$refs.AddMainlist.resetFields();\n            }, 0)\n        },\n        // changeCompletedLink(){\n        //     console.log(this.AddMainlist);\n        // }\n    }\n}\n",null]}